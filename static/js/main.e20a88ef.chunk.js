(this["webpackJsonppipeline-editor"]=this["webpackJsonppipeline-editor"]||[]).push([[0],{33:function(e,t,n){},34:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(13),i=n.n(a),c=(n(33),n(34),n(4)),s=n(5),u=n(8),p=n(24),l=n(2),d=n(3),f=n.n(d),m=n(6),b=n(1),v=function(e){var t,n=e.taskSpec,o=e.closeEditor,a=e.setArguments,i=Object(r.useState)(Object(l.a)({},n.arguments)),s=Object(c.a)(i,2),u=s[0],p=s[1],d=n.componentRef.spec;if(void 0===d)return console.error("ArgumentsEditor called with missing taskSpec.componentRef.spec",n),Object(b.jsx)(b.Fragment,{});var v=null!==(t=d.inputs)&&void 0!==t?t:[];return Object(b.jsxs)("form",{onSubmit:function(){var e=Object(m.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),style:{position:"fixed",display:"table",borderSpacing:"5px",background:"white",border:"1px solid black",borderRadius:"4px",padding:"15px"},children:[Object(b.jsxs)("legend",{children:["Input arguments for ",d.name]}),Object(b.jsx)("div",{children:v.map((function(e){var t,n=e.name,r=void 0,o=void 0,a=u[n];void 0===a?r=e.default:"string"===typeof a?r=a:o="taskOutput"in a?"<from task ".concat(a.taskOutput.taskId," / ").concat(a.taskOutput.outputName,">"):"graphInput"in a?"<from graph input ".concat(a.graphInput.inputName,">"):"<reference>";var i,c=!(n in u)&&!0!==e.optional&&void 0===e.default,s=void 0===(i=e.type)?"Any":"string"===typeof i?i:JSON.stringify(i);return Object(b.jsxs)("div",{style:{display:"table-row"},children:[Object(b.jsx)("label",{style:{textAlign:"right",display:"table-cell",whiteSpace:"nowrap"},children:Object(b.jsxs)("span",{children:[n," (",Object(b.jsx)("span",{style:{textOverflow:"ellipsis",overflow:"hidden",maxWidth:"90px",display:"inline-block",verticalAlign:"bottom"},title:s,children:s}),")"]})}),Object(b.jsx)("input",{style:{display:"table-cell"},placeholder:o,required:c,value:null!==(t=r)&&void 0!==t?t:"",pattern:void e.type,onChange:function(e){u[n]=e.target.value,p(Object(l.a)({},u))}}),Object(b.jsx)("div",{style:{display:"table-cell"},children:Object(b.jsx)("button",{type:"button",title:"Reset to default",onClick:function(e){delete u[n],p(Object(l.a)({},u))},disabled:!(n in u),children:"\u2327"})})]},n)}))}),Object(b.jsx)("button",{type:"button",onClick:o,children:"Close"}),Object(b.jsx)("button",{type:"button",onClick:function(e){null===a||void 0===a||a(u),null===o||void 0===o||o()},children:"Apply"})]})},h=s.f.Top,j=s.f.Bottom,g=function(e){return"task"===e.type&&void 0!==e.data&&"taskSpec"in e.data};function O(e,t,n,r,o){for(var a=[],i=e.length,u=0;u<i;u++){var p,l,d=e[u],f=r+d.name,m=String(100*((u+1)/(i+1)))+"%",v=n===s.f.Top||n===s.f.Bottom?{left:m}:{top:m},h=null!==(p=null===(l=d.type)||void 0===l?void 0:l.toString())&&void 0!==p?p:"Any",j=["handle_".concat(r).concat(h).replace(" ","_")];(null!==o&&void 0!==o?o:[]).includes(d.name)&&j.push("missing-argument"),j=j.map((function(e){return e.replace(" ","_")}));var g=x(n,i),O=Object(c.a)(g,2),y=O[0],k=O[1];a.push(Object(b.jsx)(s.d,{type:t,position:n,id:f,style:v,isConnectable:!0,title:d.name+" : "+h,className:j.join(" "),children:Object(b.jsx)("div",{className:y,style:k,children:d.name})},f))}return a}function x(e,t){var n=180,r="label";return e===s.f.Top||e===s.f.Bottom?(t>1&&(n=180/(t+1)),n<35&&(n=50,r+=" label-angled")):n=60,[r,{maxWidth:"".concat(n,"px")}]}var y=function(e){var t,n,o,a,i=e.data,s=Object(r.useState)(!1),u=Object(c.a)(s,2),p=u[0],l=u[1],d=i.taskSpec,f=d.componentRef.spec;if(void 0===f)return Object(b.jsx)(b.Fragment,{});var m=null!==(t=f.name)&&void 0!==t?t:"<component>",g=(null!==(n=f.inputs)&&void 0!==n?n:[]).filter((function(e){var t;return!0!==e.optional&&void 0===e.default&&!(e.name in(null!==(t=d.arguments)&&void 0!==t?t:{}))})).map((function(e){return e.name})),x=function(e,t){return O(e,"target",h,"input_",t)}(null!==(o=f.inputs)&&void 0!==o?o:[],g),y=O(null!==(a=f.outputs)&&void 0!==a?a:[],"source",j,"output_"),k=x.concat(y);return Object(b.jsxs)("div",{onDoubleClick:function(){l(!p)},title:i.taskId,children:[m,k,p&&Object(b.jsx)(v,{taskSpec:d,closeEditor:function(){l(!1)},setArguments:i.setArguments})]})},k=["name","description","metadata","inputs","outputs","implementation"],w=["children","componentSpec","setComponentSpec"],S={task:Object(r.memo)(y)},_=function(e){var t,n,o,a=e.children,i=e.componentSpec,d=void 0===i?{implementation:{graph:{tasks:{}}}}:i,f=e.setComponentSpec,m=Object(p.a)(e,w),v=Object(r.useState)(),h=Object(c.a)(v,2),j=h[0],g=h[1];if(!("graph"in d.implementation))return Object(b.jsx)(b.Fragment,{});var O=d.implementation.graph,x=Object.entries(O.tasks).map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1],o={x:0,y:0};if(void 0!==r.annotations)try{var a=r.annotations["editor.position"],i=JSON.parse(a);o={x:i.x,y:i.y}}catch(s){}return{id:n,data:{taskSpec:r,taskId:n,setArguments:function(e){return T(n,e)}},position:o,type:"task"}})),y=(null!==(t=d.inputs)&&void 0!==t?t:[]).map((function(e){var t={x:0,y:0};if(void 0!==e.annotations)try{var n=e.annotations["editor.position"],r=JSON.parse(n);t={x:r.x,y:r.y}}catch(o){}return{id:e.name,data:{label:e.name},position:t,type:"input"}})),k=(null!==(n=d.outputs)&&void 0!==n?n:[]).map((function(e){var t={x:0,y:0};if(void 0!==e.annotations)try{var n=e.annotations["editor.position"],r=JSON.parse(n);t={x:r.x,y:r.y}}catch(o){}return{id:e.name,data:{label:e.name},position:t,type:"output"}})),_=Object.entries(O.tasks).flatMap((function(e){var t,n=Object(c.a)(e,2),r=n[0],o=n[1];return Object.entries(null!==(t=o.arguments)&&void 0!==t?t:{}).flatMap((function(e){var t=Object(c.a)(e,2),n=t[0],o=t[1];if("string"===typeof o)return[];if("taskOutput"in o){var a=o.taskOutput;return[{id:"".concat(a.taskId,"_").concat(a.outputName,"-").concat(r,"_").concat(n),source:a.taskId,sourceHandle:"output_".concat(a.outputName),target:r,targetHandle:"input_".concat(n),arrowHeadType:s.a.ArrowClosed}]}if("graphInput"in o){var i=o.graphInput;return[{id:"Input_".concat(i.inputName,"-").concat(r,"_").concat(n),source:i.inputName,sourceHandle:null,target:r,targetHandle:"input_".concat(n),arrowHeadType:s.a.ArrowClosed}]}return console.error("Impossible task input argument kind: ",o),[]}))})),C=Object.entries(null!==(o=O.outputValues)&&void 0!==o?o:{}).map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1].taskOutput;return{id:"".concat(r.taskId,"_").concat(r.outputName,"-Output_").concat(n),source:r.taskId,sourceHandle:"output_".concat(r.outputName),target:n,targetHandle:null,arrowHeadType:s.a.ArrowClosed}})),I=x.concat(y).concat(k).concat(_).concat(C),A=function(e){d=e,f(e)},N=function(e){O=e,A(Object(l.a)(Object(l.a)({},d),{},{implementation:{graph:O}}))},T=function(e,t){var n=Object(l.a)(Object(l.a)({},O),{},{tasks:Object(l.a)({},O.tasks)});n.tasks[e]=Object(l.a)(Object(l.a)({},O.tasks[e]),{},{arguments:t}),N(n)},E=function(e,t,n){var r=O.tasks[e].arguments,o=Object(l.a)({},r);void 0===n?delete o[t]:o[t]=n,T(e,o)},R=function(e,t){return E(e,t,void 0)},D=function(e,t){var n=Object(l.a)({},O.outputValues);void 0===t?delete n[e]:n[e]=t,O=Object(l.a)(Object(l.a)({},O),{},{outputValues:n}),N(O)},P=function(e){return D(e)},U=function(e){var t,n;if(null!==e.source&&null!==e.target){var r=null===(t=e.targetHandle)||void 0===t?void 0:t.replace(/^input_/,""),o=null===(n=e.sourceHandle)||void 0===n?void 0:n.replace(/^output_/,"");if(void 0!==o){var a={taskOutput:{taskId:e.source,outputName:o}};void 0!==r?E(e.target,r,a):D(e.target,a)}else{var i={graphInput:{inputName:e.source}};void 0!==r?E(e.target,r,i):console.error("addConnection: Cannot directly connect graph input to graph output: ",e)}}else console.error("addConnection called with missing source or target: ",e)},L=function(e){var t,n=null===(t=e.targetHandle)||void 0===t?void 0:t.replace(/^input_/,"");void 0!==n?R(e.target,n):P(e.target)},G=function(e){if("input"===e.type)!function(e){for(var t,n=0,r=Object.entries(O.tasks);n<r.length;n++)for(var o=Object(c.a)(r[n],2),a=o[0],i=o[1],s=0,u=Object.entries(null!==(p=i.arguments)&&void 0!==p?p:{});s<u.length;s++){var p,f=Object(c.a)(u[s],2),m=f[0],b=f[1];"string"!==typeof b&&"graphInput"in b&&b.graphInput.inputName===m&&R(a,m)}var v=(null!==(t=d.inputs)&&void 0!==t?t:[]).filter((function(t){return t.name!==e}));d=Object(l.a)(Object(l.a)({},d),{},{inputs:v}),A(d)}(e.id);else if("output"===e.type){!function(e){var t;P(e);var n=(null!==(t=d.outputs)&&void 0!==t?t:[]).filter((function(t){return t.name!==e}));d=Object(l.a)(Object(l.a)({},d),{},{outputs:n}),A(d)}(e.id)}else if("task"===e.type){!function(e){for(var t,n=0,r=Object.entries(O.tasks);n<r.length;n++)for(var o=Object(c.a)(r[n],2),a=o[0],i=o[1],s=0,u=Object.entries(null!==(p=i.arguments)&&void 0!==p?p:{});s<u.length;s++){var p,d=Object(c.a)(u[s],2),f=d[0],m=d[1];"string"!==typeof m&&"taskOutput"in m&&m.taskOutput.taskId===a&&R(a,f)}var b=Object.fromEntries(Object.entries(null!==(t=O.outputValues)&&void 0!==t?t:{}).filter((function(t){var n=Object(c.a)(t,2);return n[0],n[1].taskOutput.taskId!==e})));O=Object(l.a)(Object(l.a)({},O),{},{outputValues:b});var v=Object(l.a)(Object(l.a)({},O),{},{tasks:Object(l.a)({},O.tasks)});delete v.tasks[e],N(v)}(e.id)}else console.log("removeNode: Unexpected note type: ",e)},J=function(e,t){for(var n=e,r=1;t.has(n);)n=e+" "+(++r).toString();return n};return Object(b.jsx)(s.h,Object(l.a)(Object(l.a)({},m),{},{elements:I,nodeTypes:S,onConnect:function(e){U(e)},onDragOver:function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"},onDrop:function(e){if(e.preventDefault(),j){var t=e.dataTransfer.getData("application/reactflow");if(""===t)return;var n=JSON.parse(t),r=Object.keys(n)[0],o=n[r],a=0,i=0,c=e.dataTransfer.getData("DragStart.offset");if(""!==c){var s,u,p=JSON.parse(c);a=null!==(s=.68*p.offsetX)&&void 0!==s?s:0,i=null!==(u=.64*p.offsetY)&&void 0!==u?u:0}var f=j.project({x:e.clientX-a,y:e.clientY-i}),m={x:f.x,y:f.y},b={"editor.position":JSON.stringify(m)};if("task"===r){var v,h,g=o,x=Object(l.a)(Object(l.a)({},g.annotations),b);g.annotations=x;var y=Object(l.a)(Object(l.a)({},g),{},{annotations:x}),k=function(){return J(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Task",new Set(Object.keys(O.tasks)))}(null!==(v=null===(h=g.componentRef.spec)||void 0===h?void 0:h.name)&&void 0!==v?v:"Task");(O=Object(l.a)(Object(l.a)({},O),{},{tasks:Object(l.a)({},O.tasks)})).tasks[k]=y,N(O)}else if("input"===r){var w,S={name:function(){var e;return J(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Input",new Set(null===(e=d.inputs)||void 0===e?void 0:e.map((function(e){return e.name}))))}(),annotations:b},_=(null!==(w=d.inputs)&&void 0!==w?w:[]).concat([S]);d=Object(l.a)(Object(l.a)({},d),{},{inputs:_}),A(d)}else if("output"===r){var C,I={name:function(){var e;return J(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Output",new Set(null===(e=d.outputs)||void 0===e?void 0:e.map((function(e){return e.name}))))}(),annotations:b},T=(null!==(C=d.outputs)&&void 0!==C?C:[]).concat([I]);d=Object(l.a)(Object(l.a)({},d),{},{outputs:T}),A(d)}}},onEdgeUpdate:function(e,t){L(e),U(t)},onElementsRemove:function(e){var t,n=Object(u.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;Object(s.i)(r)&&L(r)}}catch(c){n.e(c)}finally{n.f()}var o,a=Object(u.a)(e);try{for(a.s();!(o=a.n()).done;){var i=o.value;Object(s.j)(i)&&G(i)}}catch(c){a.e(c)}finally{a.f()}},onLoad:function(e){return g(e)},children:a}))},C=n(22),I=n(23),A=n(28),N=n(10),T=n.n(N),E=n(9),R=n.n(E),D="https://api.github.com/search",P="raw.githubusercontent.com/.../component.yaml",U="components",L="hash_to_data",G="hash_to_component_name",J="url_to_hash",V="hash_to_url",W="url_version",B="bad_hashes",M=function(){var e=Object(m.a)(f.a.mark((function e(t,n){var r,o,a,i,c=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],e.next=3,caches.open(n);case 3:return o=e.sent,e.next=6,o.match(t);case 6:if(void 0===(a=e.sent)){e.next=10;break}return r&&o.add(t),e.abrupt("return",a);case 10:return e.next=12,o.add(t);case 12:return e.next=14,o.match(t);case 14:if(void 0!==(i=e.sent)){e.next=17;break}return e.abrupt("return",Promise.reject("Added object to cache, but counld not find it"));case 17:return e.abrupt("return",i);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r,o,a,i,c,s,u,p=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:1,r=p.length>2&&void 0!==p[2]?p[2]:"indexed",o=p.length>3&&void 0!==p[3]?p[3]:"desc",a=encodeURIComponent(t),i=encodeURIComponent(r),c=encodeURIComponent(o),s="https://api.github.com/search/code?q=".concat(a,"&sort=").concat(i,"&order=").concat(c,"&per_page=100&page=").concat(n),e.next=9,M(s,D,!0);case 9:return u=e.sent,e.abrupt("return",u.json());case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(e){return e.replace("https://github.com/","https://raw.githubusercontent.com/").replace("/blob/","/")};function H(){return q.apply(this,arguments)}function q(){return(q=Object(A.a)(f.a.mark((function e(){var t,n,r,o,a,i,c,s,p,l=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=l.length>0&&void 0!==l[0]?l[0]:["kubeflow","Ark-kun"],n=[],r="filename:component.yaml "+t.map((function(e){return"user:"+e})).join(" "),o=1;case 4:if(!(o<100)){e.next=33;break}return e.next=7,Object(I.a)(F(r,o));case 7:if(a=e.sent,0!==(i=a.items).length){e.next=11;break}return e.abrupt("break",33);case 11:c=Object(u.a)(i),e.prev=12,c.s();case 14:if((s=c.n()).done){e.next=20;break}return p=s.value,e.next=18,{url:X(p.html_url),hash:p.sha};case 18:e.next=14;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(12),c.e(e.t0);case 25:return e.prev=25,c.f(),e.finish(25);case 28:return e.next=30,Object(I.a)(new Promise((function(e){return setTimeout(e,6e3*1.1)})));case 30:o++,e.next=4;break;case 33:return e.abrupt("return",n);case 34:case"end":return e.stop()}}),e,null,[[12,22,25,28]])})))).apply(this,arguments)}var Y=function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r,o,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t,P);case 2:return n=e.sent,e.next=5,n.blob();case 5:return r=e.sent,e.next=8,r.text();case 8:return o=e.sent,a=T.a.load(o),e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(m.a)(f.a.mark((function e(){var t,n,r,o,a,i,c,s,u,p,l,d,m,b,v,h,j,g,O,x,y,k,w,S,_,I=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=I.length>0&&void 0!==I[0]?I[0]:["kubeflow","Ark-kun"],console.debug("Starting cacheAllComponents"),n=H(t),r=R.a.createInstance({name:U,storeName:J}),o=R.a.createInstance({name:U,storeName:V}),a=R.a.createInstance({name:U,storeName:L}),i=R.a.createInstance({name:U,storeName:G}),c=R.a.createInstance({name:U,storeName:W}),s=R.a.createInstance({name:U,storeName:B}),u=!0,p=!1,e.prev=11,d=Object(C.a)(n);case 13:return e.next=15,d.next();case 15:return m=e.sent,u=m.done,e.next=19,m.value;case 19:if(b=e.sent,u){e.next=90;break}return h=(v=b).hash.toLowerCase(),j=v.url,e.next=26,s.getItem(h);case 26:if(null===(g=e.sent)){e.next=30;break}return console.debug("Skipping url ".concat(j," with hash ").concat(h,' due to error: "').concat(g,'"')),e.abrupt("continue",87);case 30:if(e.prev=30,(O=X(j)).endsWith("component.yaml")){e.next=35;break}return console.debug("Skipping url ".concat(O,' since it does not end with "component.yaml"')),e.abrupt("continue",87);case 35:return e.next=37,r.getItem(O);case 37:return null!==(x=e.sent)&&x!==h&&console.error("Component cache is broken. Stored hash for ".concat(O,": ").concat(x," != ").concat(h,".")),e.next=41,c.getItem(O);case 41:if(y=e.sent,!(null!==x&&null!==y&&Number.parseInt(y)>=1)){e.next=44;break}return e.abrupt("continue",87);case 44:return console.debug("Processing new component candidate: ".concat(O,".")),e.next=47,M(O,P);case 47:return k=e.sent,w=void 0,S=void 0,e.prev=50,e.next=53,k.blob();case 53:return _=e.sent,e.next=56,_.text();case 56:S=e.sent,w=T.a.load(S),e.next=64;break;case 60:return e.prev=60,e.t0=e.catch(50),s.setItem(h,e.t0.name+": "+e.t0.message),e.abrupt("continue",87);case 64:if(void 0!==w.implementation){e.next=67;break}return s.setItem(h,'Component lacks the "impelmentation" section.'),e.abrupt("continue",87);case 67:return e.next=69,a.setItem(h,S);case 69:return e.next=71,o.getItem(h);case 71:if(null!==e.sent){e.next=75;break}return e.next=75,o.setItem(h,O);case 75:if(!w.name){e.next=78;break}return e.next=78,i.setItem(h,w.name);case 78:return e.next=80,r.setItem(O,h);case 80:return e.next=82,c.setItem(O,1);case 82:e.next=87;break;case 84:e.prev=84,e.t1=e.catch(30),console.error("Error when processing component candidate ".concat(j," Error: ").concat(e.t1,"."));case 87:u=!0,e.next=13;break;case 90:e.next=96;break;case 92:e.prev=92,e.t2=e.catch(11),p=!0,l=e.t2;case 96:if(e.prev=96,e.prev=97,u||null==d.return){e.next=101;break}return e.next=101,d.return();case 101:if(e.prev=101,!p){e.next=104;break}throw l;case 104:return e.finish(101);case 105:return e.finish(96);case 106:console.debug("Finished cacheAllComponents");case 107:case"end":return e.stop()}}),e,null,[[11,92,96,106],[30,84],[50,60],[97,,101,105]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(m.a)(f.a.mark((function e(){var t,n,r,o,a,i,c=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:["kubeflow","Ark-kun"],n=R.a.createInstance({name:U,storeName:V}),r=R.a.createInstance({name:U,storeName:L}),o=new Map,a=K(t),e.next=7,r.length();case 7:if(e.t0=e.sent,0!==e.t0){e.next=11;break}return e.next=11,a;case 11:return e.next=13,r.iterate((function(e,t,n){try{var r=T.a.load(e);o.set(t,{spec:r})}catch(a){console.error("Error when parsing cached component. Hash: ".concat(t,". Error: ").concat(a,". Component text: ").concat(e))}}));case 13:return e.next=15,n.iterate((function(e,t,n){var r=o.get(t);void 0===r?console.error("Component db corrupted: Component with url ".concat(e," and hash ").concat(t," has no content in the DB.")):r.url=e}));case 15:return i=[],o.forEach((function(e,t){void 0===e.url?console.error("Component db corrupted: Component with hash ".concat(t," has content, but no URL in the DB.")):i.push(e)})),e.abrupt("return",i);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r,o=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:["kubeflow","Ark-kun"],e.next=3,z(n);case 3:return r=e.sent,e.abrupt("return",r.filter((function(e){var n,r,o;return null!==(n=null===(r=e.spec)||void 0===r||null===(o=r.name)||void 0===o?void 0:o.toLowerCase().includes(t.toLowerCase()))&&void 0!==n&&n})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(e){var t=e.componentUrl,n=Object(r.useState)(void 0),o=Object(c.a)(n,2),a=o[0],i=o[1];return Object(r.useEffect)((function(){Y(t).then(i)}),[t]),void 0===a?Object(b.jsx)("span",{children:"Loading..."}):Object(b.jsx)("div",{className:"react-flow__node react-flow__node-task",draggable:!0,onDragStart:function(e){return function(e,t){e.dataTransfer.setData("application/reactflow",JSON.stringify(t)),e.dataTransfer.setData("DragStart.offset",JSON.stringify({offsetX:e.nativeEvent.offsetX,offsetY:e.nativeEvent.offsetY})),e.dataTransfer.effectAllowed="move"}(e,{task:{componentRef:{url:t,spec:a}}})},children:a.name})},Z=function(e){var t=e.componentGroups;return Object(b.jsx)(b.Fragment,{children:Array.from(t).map((function(e,t){var n=e.category,r=e.componentUrls;return Object(b.jsxs)("details",{open:0===t,style:{border:"1px solid #aaa",borderRadius:"4px"},children:[Object(b.jsx)("summary",{style:{borderWidth:"1px",padding:"8px"},children:Object(b.jsx)("strong",{children:n})}),r.map((function(e){return Object(b.jsx)(Q,{componentUrl:e},e)}))]},n)}))})},ee=function(e){var t=e.componentGroups;return Object(b.jsxs)("details",{open:!0,children:[Object(b.jsx)("summary",{style:{border:"1px solid #aaa",padding:"4px",borderRadius:"4px"},children:Object(b.jsx)("strong",{children:"Component library"})}),Object(b.jsx)("div",{style:{paddingLeft:"10px"},children:Object(b.jsx)(Z,{componentGroups:t})})]})},te=["kubeflow","Ark-kun"],ne=function(e){var t=Object(r.useState)(void 0),n=Object(c.a)(t,2),o=n[0],a=n[1],i=Object(r.useState)(!0),s=Object(c.a)(i,2),u=s[0],p=s[1],l=Object(r.useState)(!1),d=Object(c.a)(l,2),v=d[0],h=d[1],j=Object(r.useState)(""),g=Object(c.a)(j,2),O=g[0],x=g[1],y=Object(r.useState)([]),k=Object(c.a)(y,2),w=k[0],S=k[1];function _(){return(_=Object(m.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$(t,te).then((function(e){h(!0),S(e)}),(function(e){h(!0),a(e.message)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=Object(b.jsx)("span",{});if(u)C=Object(b.jsx)("div",{children:"Enter search query"});else if(void 0!==o)C=Object(b.jsxs)("div",{children:["Error: ",o]});else if(u||v){if(void 0!==w){var I=w.map((function(e){var t;return Object(b.jsx)("div",{title:e.url,className:"react-flow__node react-flow__node-multihandle",draggable:!0,onDragStart:function(t){return function(e,t){e.dataTransfer.setData("application/reactflow",JSON.stringify(t)),e.dataTransfer.effectAllowed="move"}(t,{task:{componentRef:e}})},children:null===(t=e.spec)||void 0===t?void 0:t.name},e.url)}));C=Object(b.jsx)(b.Fragment,{children:I})}}else C=Object(b.jsx)("div",{children:"Searching..."});return Object(b.jsxs)("div",{className:"nodeList",children:[Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==O&&(p(!1),function(e){_.apply(this,arguments)}(O))},children:[Object(b.jsx)("input",{type:"search",placeholder:"XGBoost",onChange:function(e){x(e.target.value)}}),Object(b.jsx)("input",{type:"submit"})]}),Object(b.jsx)("div",{children:C})]})},re=function(e){var t=e.componentSpec,n=Object(s.k)((function(e){return e.nodes})),r="";try{var o=function(e,t){var n,r,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e=Object(l.a)({},e);var i=function(e){return JSON.stringify({x:e.__rf.position.x,y:e.__rf.position.y,width:e.__rf.width,height:e.__rf.height})},s=function(e,t){var n=e.__rf.position.x-t.__rf.position.x,r=e.__rf.position.y-t.__rf.position.y;return 0!==n?n:r},u=function(e,t){var n=e.__rf.position.x-t.__rf.position.x,r=e.__rf.position.y-t.__rf.position.y;return 0!==r?r:n},d=t.filter((function(e){return"input"===e.type})).sort(s),f=t.filter((function(e){return"output"===e.type})).sort(s),m=t.filter(g).sort(u),b=new Map(d.map((function(e){return[e.id,i(e)]}))),v=new Map(d.map((function(e,t){return[e.id,t]}))),h=function(e,t){var n,r;return(null!==(n=v.get(e.name))&&void 0!==n?n:1/0)-(null!==(r=v.get(t.name))&&void 0!==r?r:1/0)},j=new Map(f.map((function(e){return[e.id,i(e)]}))),O=new Map(f.map((function(e,t){return[e.id,t]}))),x=function(e,t){var n,r;return(null!==(n=O.get(e.name))&&void 0!==n?n:1/0)-(null!==(r=O.get(t.name))&&void 0!==r?r:1/0)},y=new Map(m.map((function(e){return[e.id,i(e)]}))),w=new Map(m.map((function(e,t){return[e.id,t]}))),S=function(e,t){var n,r;return(null!==(n=w.get(e[0]))&&void 0!==n?n:1/0)-(null!==(r=w.get(t[0]))&&void 0!==r?r:1/0)};if(e.inputs=null===(n=e.inputs)||void 0===n?void 0:n.map((function(e){var t=Object(l.a)({},e.annotations);a?t["editor.position"]=b.get(e.name):delete t["editor.position"];var n=Object(l.a)(Object(l.a)({},e),{},{annotations:t});return 0===Object.keys(t).length&&delete n.annotations,n})).sort(h),e.outputs=null===(r=e.outputs)||void 0===r?void 0:r.map((function(e){var t=Object(l.a)({},e.annotations);a?t["editor.position"]=j.get(e.name):delete t["editor.position"];var n=Object(l.a)(Object(l.a)({},e),{},{annotations:t});return void 0!==t&&0!==Object.keys(t).length||delete n.annotations,n})).sort(x),!("graph"in e.implementation))return e;var _=Object(l.a)({},e.implementation.graph),C=Object.fromEntries(Object.entries(_.tasks||{}).map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1],i=Object(l.a)({},r.annotations);a?i["editor.position"]=y.get(n):delete i["editor.position"];var s=Object(l.a)(Object(l.a)({},r),{},{annotations:i});return void 0!==i&&0!==Object.keys(i).length||delete s.annotations,o||void 0===s.componentRef.spec||void 0===s.componentRef.url||(s.componentRef=Object(l.a)({},s.componentRef),delete s.componentRef.spec),[n,s]})).sort(S));return void 0!==C&&(_.tasks=C),e=function(e){var t=e.name,n=e.description,r=e.metadata,o=e.inputs,a=e.outputs,i=e.implementation,c=Object(p.a)(e,k);return Object(l.a)(Object(l.a)(Object(l.a)(Object(l.a)(Object(l.a)(Object(l.a)({},t&&{name:t}),n&&{description:n}),r&&{metadata:r}),o&&{inputs:o}),a&&{outputs:a}),{},{implementation:i},c)}(e=Object(l.a)(Object(l.a)({},e),{},{implementation:Object(l.a)(Object(l.a)({},e.implementation),{},{graph:_})}))}(t,n,!1,!0);r=T.a.dump(o,{lineWidth:1e4})}catch(u){r=String(u)}var a=new Blob([r],{type:"text/yaml"}),i=Object(b.jsx)("a",{href:URL.createObjectURL(a),download:"component.yaml",children:"component.yaml"});return Object(b.jsxs)("details",{children:[Object(b.jsxs)("summary",{children:["Graph ",i]}),Object(b.jsx)("pre",{style:{overflow:"auto"},children:r})]})},oe=function(e){return e.toLowerCase().replace(/\W/,"-")};var ae=function(e){if("string"===typeof e){if(["integer"].includes(e.toLowerCase()))return"INT";if(["float","double"].includes(e.toLowerCase()))return"DOUBLE"}return"STRING"},ie=function(e){return{type:ae(e)}},ce=function(e,t){var n,r,o;if(!("container"in e.implementation))throw Error("Nested graph components are not supported yet");var a=e.implementation.container,i=function(e,t){var n,r;if(!("container"in e.implementation))throw Error("resolveCommandLine only supports container components");var o=e.implementation.container,a=new Set,i=new Set,c=function e(n){if("string"==typeof n)return[n];if("inputValue"in n){var r=n.inputValue;return a.add(r),["{{$.inputs.parameters['".concat(r,"']}}")]}if("inputPath"in n){var o=n.inputPath;return i.add(o),["{{$.inputs.artifacts['".concat(o,"'].path}}")]}if("outputPath"in n){var c=n.outputPath;return["{{$.outputs.artifacts['".concat(c,"'].path}}")]}if("if"in n){var s=[n.if.cond,n.if.then,n.if.else],u=s[0],p=s[1],l=s[2],d=!1;if("string"===typeof u)d="true"===u.toLowerCase();else if("boolean"===typeof u)d=u;else if("isPresent"in u)d=u.isPresent in t;else{if(!("inputValue"in u))throw Error("Unexpected contition kind: "+u);var f=u.inputValue;if(f in t){var m=t[f];if("string"!==typeof m)throw Error("Using runtime conditions in component command line placeholders is not supported yet.");d="true"===m.toLowerCase()}else d=!1}var b=d?p:l;return void 0===b?[]:b.flatMap(e)}if("concat"in n)return n.concat.flatMap(e);throw Error("Unknown kind of command-line argument: ".concat(n))};return{command:null===(n=o.command)||void 0===n?void 0:n.flatMap(c),args:null===(r=o.args)||void 0===r?void 0:r.flatMap(c),inputsConsumedAsValue:a,inputsConsumedAsPath:i}}(e,t),c={container:{image:a.image,command:i.command,args:i.args}},s=new Map((null!==(n=e.inputs)&&void 0!==n?n:[]).map((function(e){return[e.name,e]}))),u={inputDefinitions:{parameters:Object.fromEntries(Array.from(i.inputsConsumedAsValue.values()).map((function(e){var t;return[e,ie(null===(t=s.get(e))||void 0===t?void 0:t.type)]}))),artifacts:Object.fromEntries(Array.from(i.inputsConsumedAsPath.values()).map((function(e){var t;return[e,(null===(t=s.get(e))||void 0===t||t.type,{artifactType:{schemaTitle:"system.Artifact"}})]})))},outputDefinitions:{parameters:{},artifacts:Object.fromEntries((null!==(r=e.outputs)&&void 0!==r?r:[]).map((function(e){return[e.name,(e.type,{artifactType:{schemaTitle:"system.Artifact"}})]})))},executorLabel:"<set later>"},p=Object.fromEntries(Array.from(i.inputsConsumedAsValue.values()).map((function(e){return[e,function(e){var n=t[e];if(void 0===n){var r=s.get(e);if(void 0===r)throw Error("Cannot happen: vertexTaskParameterArguments - inputMap.get(".concat(e,") === undefined"));if(void 0!==r.default)n=r.default;else{if(!0!==r.optional)throw Error('Argument was not provided for required input "'.concat(e,'"'));console.error('Input "'.concat(e,"\" is optional, but command-line still uses it when when it's not present.")),n=""}}if("string"===typeof n)return{runtimeValue:{constantValue:{stringValue:n}}};if("graphInput"in n)return{componentInputParameter:n.graphInput.inputName};if("taskOutput"in n)return{taskOutputParameter:{producerTask:n.taskOutput.taskId,outputParameterKey:n.taskOutput.outputName}};throw Error('Unknown kind of task argument: "'.concat(n,'"'))}(e)]}))),l=Object.fromEntries(Array.from(i.inputsConsumedAsPath.values()).map((function(e){return[e,function(e){var n=t[e];if(void 0===n){var r=s.get(e);if(void 0===r)throw Error("Cannot happen: vertexTaskParameterArguments - inputMap.get(".concat(e,") === undefined"));if(void 0!==r.default)n=r.default;else{if(!0!==r.optional)throw Error('Argument was not provided for required input "'.concat(e,'"'));console.error('Input "'.concat(e,"\" is optional, but command-line still uses it when when it's not present.")),n=""}}if("string"===typeof n)throw Error("Constant arguments for artifact inputs are not supported yet.");if("graphInput"in n)return{componentInputArtifact:n.graphInput.inputName};if("taskOutput"in n)return{taskOutputArtifact:{producerTask:n.taskOutput.taskId,outputArtifactKey:n.taskOutput.outputName}};throw Error('Unknown kind of task argument: "'.concat(n,'"'))}(e)]})));return{vertexTaskSpec:{taskInfo:{name:null!==(o=e.name)&&void 0!==o?o:"Component"},inputs:{parameters:p,artifacts:l},cachingOptions:{enableCache:!0},componentRef:{name:"<set later>"}},vertexComponentSpec:u,vertexExecutorSpec:c}},se=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pipeline";if(!("graph"in e.implementation))throw Error("Only graph components are supported for now");for(var r={parameters:Object.fromEntries((null!==(t=e.inputs)&&void 0!==t?t:[]).map((function(e){return[e.name,ie(e.type)]})))},o=e.implementation.graph,a={},i={},s={},u=0,p=Object.entries(o.tasks);u<p.length;u++){var l,d=Object(c.a)(p[u],2),f=d[0],m=d[1];if(void 0===m.componentRef.spec)throw Error('Task "'.concat(f,'" does not have taskSpec.componentRef.spec.'));var b=ce(m.componentRef.spec,null!==(l=m.arguments)&&void 0!==l?l:{}),v=b.vertexTaskSpec,h=b.vertexComponentSpec,j=b.vertexExecutorSpec,g=f+"_executor",O=f+"_component",x=f;a[g]=j,h.executorLabel=g,i[O]=h,v.componentRef.name=O,s[x]=v}var y={pipelineInfo:{name:oe(n)},sdkVersion:"Cloud-Pipelines",schemaVersion:"2.0.0",deploymentSpec:{executors:a},components:i,root:{inputDefinitions:r,dag:{tasks:s}}};return y},ue="GoogleCloudSubmitter/gcsOutputDirectory",pe="GoogleCloudSubmitter/projectId",le="GoogleCloudSubmitter/region",de="GoogleCloudSubmitter/projectIds",fe="640001104961-2m8hs192tmd9f9nssbr5thr5o3uhmita.apps.googleusercontent.com",me="AIzaSyCDPTffgYGXoit-jKsj1_1WWbSxvU7aEdQ",be=["us-central1","europe-west4","asia-east1"],ve=function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r,o,a=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],r=a.length>2&&void 0!==a[2]?a[2]:me,o=a.length>3&&void 0!==a[3]?a[3]:fe,e.abrupt("return",new Promise((function(e,a){gapi.client.setApiKey(r),gapi.auth.authorize({client_id:o,scope:t,immediate:n},(function(t){void 0===t?(console.error("authorizeGoogleCloudClient failed"),a("gapi.auth.authorize result is undefined")):t.error?(console.error("authorizeGoogleCloudClient failed",t.error),a(t.error)):e(t)}))})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=function(){var e=Object(m.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve(t,!0);case 3:e.next=14;break;case 5:return e.prev=5,e.t0=e.catch(0),e.prev=7,e.next=10,ve(t,!1);case 10:e.next=14;break;case 12:e.prev=12,e.t1=e.catch(7);case 14:case"end":return e.stop()}}),e,null,[[0,5],[7,12]])})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(m.a)(f.a.mark((function e(){var t,n=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]&&n[0],e.next=3,he(["https://www.googleapis.com/auth/cloud-platform"]);case 3:return e.next=5,gapi.client.request({path:"https://cloudresourcemanager.googleapis.com/v1/projects/"});case 5:return t=e.sent,e.abrupt("return",t.result);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r,o,a=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"us-central1",r=a.length>2?a[2]:void 0,e.next=4,he(["https://www.googleapis.com/auth/cloud-platform"]);case 4:return e.next=6,gapi.client.request({path:"https://".concat(n,"-aiplatform.googleapis.com/v1beta1/projects/").concat(t,"/locations/").concat(n,"/pipelineJobs"),method:"POST",body:JSON.stringify(r)});case 6:return o=e.sent,e.abrupt("return",o.result);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(e){var t=e.componentSpec,n=Object(r.useState)((function(){var e,t;return JSON.parse(null!==(e=null===(t=window.localStorage)||void 0===t?void 0:t.getItem(de))&&void 0!==e?e:"[]")})),o=Object(c.a)(n,2),a=o[0],i=o[1],s=Object(r.useState)((function(){var e,t;return null!==(e=null===(t=window.localStorage)||void 0===t?void 0:t.getItem(pe))&&void 0!==e?e:""})),u=Object(c.a)(s,2),p=u[0],l=u[1],d=Object(r.useState)((function(){var e,t;return null!==(e=null===(t=window.localStorage)||void 0===t?void 0:t.getItem(le))&&void 0!==e?e:"us-central1"})),v=Object(c.a)(d,2),h=v[0],j=v[1],g=Object(r.useState)(""),O=Object(c.a)(g,2),x=O[0],y=O[1],k=Object(r.useState)((function(){var e,t;return null!==(e=null===(t=window.localStorage)||void 0===t?void 0:t.getItem(ue))&&void 0!==e?e:""})),w=Object(c.a)(k,2),S=w[0],_=w[1],C=Object(r.useState)(""),I=Object(c.a)(C,2),A=I[0],N=I[1],T=void 0,E=void 0;if(void 0!==t)try{E=function(e,t,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pipeline",a={};if(void 0!==n)for(var i=0,s=Array.from(n.entries());i<s.length;i++){var u=Object(c.a)(s[i],2),p=u[0],l=u[1];a[p]={stringValue:l}}var d=se(e,o);return{displayName:null!==(r=e.name)&&void 0!==r?r:"Pipeline",runtimeConfig:{parameters:a,gcsOutputDirectory:t},pipelineSpec:d}}(t,S),T=JSON.stringify(E,void 0,2)}catch(P){console.error(P)}var R=T&&URL.createObjectURL(new Blob([T],{type:"application/json"})),D=""!==p&&""!==h&&void 0!==E;return Object(b.jsxs)("form",{onSubmit:function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r,o,a,i,c,s,u,l,d;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),void 0!==E){e.next=3;break}return e.abrupt("return");case 3:N(""),e.prev=4;try{null===(n=window.localStorage)||void 0===n||n.setItem(ue,S),null===(r=window.localStorage)||void 0===r||r.setItem(pe,p),null===(o=window.localStorage)||void 0===o||o.setItem(le,h)}catch(P){console.error("GoogleCloudSubmitter: Error writing properties to the localStorage",P)}return e.next=8,ge(p,h,E);case 8:a=e.sent,i=a.name,c=i.split("/").slice(-1)[0],s="https://console.cloud.google.com/vertex-ai/locations/".concat(h,"/pipelines/runs/").concat(c,"?project=").concat(p),N(s),y(""),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),console.error(e.t0),y(null!==(u=null===e.t0||void 0===e.t0||null===(l=e.t0.result)||void 0===l||null===(d=l.error)||void 0===d?void 0:d.message)&&void 0!==u?u:"Error");case 20:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}(),children:[Object(b.jsxs)("div",{style:{whiteSpace:"nowrap"},children:[Object(b.jsx)("label",{htmlFor:"project",children:"Project: "}),Object(b.jsx)("input",{id:"project",required:!0,type:"text",list:"projects",placeholder:"<my-project-id>",value:p,onChange:function(e){return l(e.target.value)}}),Object(b.jsx)("datalist",{id:"projects",children:a.map((function(e){return Object(b.jsx)("option",{value:e},e)}))}),Object(b.jsx)("button",{type:"button",onClick:function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r,o,a,c,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,je();case 3:n=e.sent,r=n.projects.map((function(e){return e.projectId})),i(r),y("");try{null===(o=window.localStorage)||void 0===o||o.setItem(de,JSON.stringify(r))}catch(P){console.error("GoogleCloudSubmitter: Error writing properties to the localStorage",P)}e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),y(null!==(a=null===e.t0||void 0===e.t0||null===(c=e.t0.result)||void 0===c||null===(s=c.error)||void 0===s?void 0:s.message)&&void 0!==a?a:"Error");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),children:"\u27f3"})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"region",children:"Region: "}),Object(b.jsx)("input",{id:"region",required:!0,type:"text",list:"regions",value:h,onChange:function(e){return j(e.target.value)}}),Object(b.jsx)("datalist",{id:"regions",children:be.map((function(e){return Object(b.jsx)("option",{value:e},e)}))})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"region",children:"GCS dir: "}),Object(b.jsx)("input",{id:"gcsOutputDirectory",required:!0,type:"text",value:S,onChange:function(e){return _(e.target.value)}})]}),Object(b.jsx)("input",{type:"submit",disabled:!D,value:"Submit pipeline job"}),""!==A&&Object(b.jsx)("div",{children:Object(b.jsx)("a",{href:A,target:"_blank",rel:"noreferrer",children:"Job"})}),void 0!==R&&Object(b.jsxs)("div",{children:["Download ",Object(b.jsx)("a",{href:R,download:"vertex_pipeline_job.json",children:"vertex_pipeline_job.json"})]}),""!==x&&Object(b.jsxs)("div",{children:["Error: ",x]})]})},xe=function(e){return{"editor.position":JSON.stringify({x:e.__rf.position.x,y:e.__rf.position.y,width:e.__rf.width,height:e.__rf.height})}},ye=function(e,t){return e.__rf.position.x-t.__rf.position.x},ke=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Component",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=e.filter((function(e){return"input"===e.type})).sort(ye),s=e.filter((function(e){return"output"===e.type})).sort(ye),p=e.filter(g),l=c.map((function(e){var t={name:e.id};return a&&(t.annotations=xe(e)),t})),d=s.map((function(e){var t={name:e.id};return a&&(t.annotations=t.annotations=xe(e)),t})),f=p.reduce((function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.taskSpec;return void 0!==r&&(r=Object.assign({},r),i||(r.componentRef=Object.assign({},r.componentRef),delete r.componentRef.spec),a&&(r.annotations=xe(t)),e[t.id]=r),e}),{}),m={},b=Object(u.a)(t);try{for(b.s();!(n=b.n()).done;){var v,h,j=n.value,O=j.source,x=null===(v=j.sourceHandle)||void 0===v?void 0:v.replace(/^output_/,""),y=j.target,k=null===(h=j.targetHandle)||void 0===h?void 0:h.replace(/^input_/,"");if(x&&void 0===f[O])console.error("Task node is connected to unknown node type:",j);else{var w=x?{taskOutput:{taskId:O,outputName:x}}:{graphInput:{inputName:O}};if(k){var S=f[y];if(void 0===S){console.error("Task node is connected to unknown node type:",j);continue}void 0===S.arguments&&(S.arguments={}),S.arguments[k]=w}else{var _=w;_?m[y]=_:console.error("Graph outputs can only come from task outputs.")}}}}catch(I){b.e(I)}finally{b.f()}var C={name:r,inputs:l,outputs:d,metadata:{annotations:o},implementation:{graph:{tasks:f,outputValues:m}}};return 0===l.length&&delete C.inputs,0===d.length&&delete C.outputs,0===Object.keys(o).length&&delete C.metadata,0===Object.keys(m).length&&delete C.implementation.graph.outputValues,C},we=function(e){var t,n=e.pipelineName,r=Object(s.k)((function(e){return e.nodes})),o=Object(s.k)((function(e){return e.edges}));n=null!==(t=n)&&void 0!==t?t:"Pipeline";var a="";try{var i=ke(r,o,n,void 0,!1,!0),c=se(i);a=JSON.stringify(c,void 0,2)}catch(l){a=String(l)}var u=new Blob([a],{type:"application/json"}),p=URL.createObjectURL(u);return Object(b.jsxs)("details",{open:!0,children:[Object(b.jsxs)("summary",{children:["Cloud IR ",Object(b.jsx)("a",{href:p,download:"vertex_pipeline_spec.json",children:"vertex_pipeline_spec.json"})]}),Object(b.jsx)("pre",{style:{overflow:"auto"},children:a})]})},Se="https://raw.githubusercontent.com/Ark-kun/pipelines/77df9c97191a181fcd3cded83f147799d46eca20/components/XGBoost/_samples/sample_pipeline.pipeline.component.yaml",_e=function(){var e=Object(m.a)(f.a.mark((function e(t,n){var r,o,a,i,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=new Map),!("graph"in t.implementation)){e.next=19;break}r=0,o=Object.values(t.implementation.graph.tasks);case 3:if(!(r<o.length)){e.next=19;break}if(a=o[r],i=a.componentRef.url,void 0!==a.componentRef.spec||void 0===i){e.next=16;break}if(void 0!==(c=n.get(i))){e.next=13;break}return e.next=11,Y(i);case 11:c=e.sent,n.set(i,c);case 13:return a.componentRef.spec=c,e.next=16,_e(c,n);case 16:r++,e.next=3;break;case 19:return e.abrupt("return",t);case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r,o=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(o.length>1&&void 0!==o[1])||o[1],e.next=3,Y(t);case 3:if(r=e.sent,!n){e.next=8;break}return e.next=7,_e(r);case 7:r=e.sent;case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=function(e){var t,n=e.pipelineName,r=(e.downloadFileName,e.linkText,Object(s.k)((function(e){return e.nodes}))),o=Object(s.k)((function(e){return e.edges}));n=null!==(t=n)&&void 0!==t?t:"Pipeline";var a="";try{var i=ke(r,o,n);a=T.a.dump(i,{lineWidth:1e4})}catch(u){a=String(u)}var c=new Blob([a],{type:"text/yaml"});return Object(b.jsx)("a",{href:URL.createObjectURL(c),download:"component.yaml",children:"component.yaml"})},Ae=function(e,t){e.dataTransfer.setData("application/reactflow",JSON.stringify(t)),e.dataTransfer.setData("DragStart.offset",JSON.stringify({offsetX:e.nativeEvent.offsetX,offsetY:e.nativeEvent.offsetY})),e.dataTransfer.effectAllowed="move"},Ne=[{category:"Quick start",componentUrls:["https://raw.githubusercontent.com/Ark-kun/pipelines/2463ecda532517462590d75e6e14a8af6b55869a/components/datasets/Chicago_Taxi_Trips/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipelines/567c04c51ff00a1ee525b3458425b17adbe3df61/components/XGBoost/Train/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipelines/567c04c51ff00a1ee525b3458425b17adbe3df61/components/XGBoost/Predict/component.yaml"]},{category:"Datasets",componentUrls:["https://raw.githubusercontent.com/Ark-kun/pipelines/2463ecda532517462590d75e6e14a8af6b55869a/components/datasets/Chicago_Taxi_Trips/component.yaml"]},{category:"Data manipulation",componentUrls:["https://raw.githubusercontent.com/Ark-kun/pipelines/6162d55998b176b50267d351241100bb0ee715bc/components/pandas/Transform_DataFrame/in_CSV_format/component.yaml"]},{category:"Upload/Download",componentUrls:["https://raw.githubusercontent.com/Ark-kun/pipelines/54ac9a6a7173aecbbb30a043b2077e790cac6953/components/web/Download/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipelines/2dac60c400ad8767b452649d08f328dfaf230f96/components/google-cloud/storage/download/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipelines/2dac60c400ad8767b452649d08f328dfaf230f96/components/google-cloud/storage/upload_to_unique_uri/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipelines/2dac60c400ad8767b452649d08f328dfaf230f96/components/google-cloud/storage/upload_to_explicit_uri/component.yaml"]},{category:"XGBoost",componentUrls:["https://raw.githubusercontent.com/Ark-kun/pipelines/567c04c51ff00a1ee525b3458425b17adbe3df61/components/XGBoost/Train/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipelines/567c04c51ff00a1ee525b3458425b17adbe3df61/components/XGBoost/Predict/component.yaml"]},{category:"PyTorch",componentUrls:["https://raw.githubusercontent.com/Ark-kun/pipelines/4e1facea1a270535b515a9e8cc59422d1ad76a9e/components/PyTorch/Create_fully_connected_network/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipelines/603342c4b88fe2d69ff07682f702cd3601e883bb/components/PyTorch/Train_PyTorch_model/from_CSV/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipelines/e011e4affa85542ef2b24d63fdac27f8d939bbee/components/PyTorch/Convert_to_OnnxModel_from_PyTorchScriptModule/component.yaml"]},{category:"TFX",componentUrls:["https://raw.githubusercontent.com/kubeflow/pipelines/9b0d47a226c61f96e1ebe7a8ba427df38f8734e1/components/deprecated/tfx/ExampleGen/CsvExampleGen/component.yaml","https://raw.githubusercontent.com/kubeflow/pipelines/9b0d47a226c61f96e1ebe7a8ba427df38f8734e1/components/deprecated/tfx/StatisticsGen/component.yaml","https://raw.githubusercontent.com/kubeflow/pipelines/9b0d47a226c61f96e1ebe7a8ba427df38f8734e1/components/deprecated/tfx/SchemaGen/component.yaml","https://raw.githubusercontent.com/kubeflow/pipelines/9b0d47a226c61f96e1ebe7a8ba427df38f8734e1/components/deprecated/tfx/ExampleValidator/component.yaml","https://raw.githubusercontent.com/kubeflow/pipelines/9b0d47a226c61f96e1ebe7a8ba427df38f8734e1/components/deprecated/tfx/Transform/component.yaml","https://raw.githubusercontent.com/kubeflow/pipelines/9b0d47a226c61f96e1ebe7a8ba427df38f8734e1/components/deprecated/tfx/Trainer/component.yaml","https://raw.githubusercontent.com/kubeflow/pipelines/9b0d47a226c61f96e1ebe7a8ba427df38f8734e1/components/deprecated/tfx/Evaluator/component.yaml"]}],Te=function(e){var t=e.componentSpec,n=e.setComponentSpec;return Object(b.jsxs)("aside",{className:"nodeList",children:[Object(b.jsxs)("details",{style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px"},children:[Object(b.jsx)("summary",{style:{borderWidth:"1px",padding:"4px",fontWeight:"bold"},children:"Save/Load pipeline"}),Object(b.jsx)("button",{type:"button",onClick:function(e){Ce("https://raw.githubusercontent.com/Ark-kun/pipelines/2765b13699ac28de523f499eeaa9eb2ed9b8798a/components/deprecated/tfx/_samples/TFX.pipeline.component.yaml").then(n)},children:"Load TFX pipeline"}),Object(b.jsx)("button",{type:"button",onClick:function(e){Ce(Se).then(n)},children:"Load XGBoost pipeline"}),Object(b.jsx)("button",{type:"button",onClick:function(e){Ce("https://raw.githubusercontent.com/Ark-kun/pipelines/322c0c75f32d87acfd5da9c390dee0b5799bfdaf/components/PyTorch/_samples/Train_fully-connected_network.pipeline.component.yaml").then(n)},children:"Load PyTorch pipeline"}),Object(b.jsxs)("div",{children:["Save as ",Object(b.jsx)(Ie,{})]})]}),Object(b.jsxs)("details",{style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px"},children:[Object(b.jsx)("summary",{style:{borderWidth:"1px",padding:"4px",fontWeight:"bold"},children:"Submit to Google Cloud"}),Object(b.jsx)(Oe,{componentSpec:t})]}),Object(b.jsx)("h3",{children:"Drag components to the canvas:"}),Object(b.jsxs)("details",{style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px"},children:[Object(b.jsx)("summary",{children:Object(b.jsx)("strong",{children:"Special"})}),Object(b.jsx)("div",{className:"react-flow__node react-flow__node-input",onDragStart:function(e){return Ae(e,{input:{label:"Input"}})},draggable:!0,children:"Input"}),Object(b.jsx)("div",{className:"react-flow__node react-flow__node-output",onDragStart:function(e){return Ae(e,{output:{label:"Output"}})},draggable:!0,children:"Output"})]}),Object(b.jsx)(ee,{componentGroups:Ne}),Object(b.jsxs)("details",{open:!0,style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px"},children:[Object(b.jsx)("summary",{style:{borderWidth:"1px",padding:"4px",fontWeight:"bold"},children:"Component search"}),Object(b.jsx)(ne,{})]}),Object(b.jsxs)("details",{children:[Object(b.jsx)("summary",{children:"Debug"}),t&&Object(b.jsx)(re,{componentSpec:t}),Object(b.jsx)(we,{})]})]})},Ee=(n(62),function(){var e=Object(r.useState)(),t=Object(c.a)(e,2),n=t[0],o=t[1];return void 0===n&&Ce(Se).then(o),void 0===n?Object(b.jsx)(b.Fragment,{}):Object(b.jsx)("div",{className:"dndflow",children:Object(b.jsxs)(s.g,{children:[Object(b.jsx)("div",{className:"reactflow-wrapper",children:Object(b.jsxs)(_,{componentSpec:n,setComponentSpec:o,deleteKeyCode:"Delete",multiSelectionKeyCode:"Control",snapToGrid:!0,snapGrid:[10,10],children:[Object(b.jsx)(s.e,{}),Object(b.jsx)(s.c,{}),Object(b.jsx)(s.b,{gap:10})]})}),Object(b.jsx)(Te,{componentSpec:n,setComponentSpec:o})]})})});var Re=function(){return Object(b.jsx)("div",{className:"App",style:{width:"100%",height:"100%"},children:Object(b.jsx)(Ee,{})})},De=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Pe(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,64)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),o(e),a(e),i(e)}))};i.a.render(Object(b.jsx)(o.a.StrictMode,{children:Object(b.jsx)(Re,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/pipeline-editor",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/pipeline-editor","/service-worker.js");De?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Pe(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Pe(t,e)}))}}(),Ue()}},[[63,1,2]]]);
//# sourceMappingURL=main.e20a88ef.chunk.js.map