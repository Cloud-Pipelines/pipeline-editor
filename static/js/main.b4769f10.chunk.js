/*! For license information please see main.b4769f10.chunk.js.LICENSE.txt */
(this["webpackJsonppipeline-editor"]=this["webpackJsonppipeline-editor"]||[]).push([[0],{107:function(e,t,n){},108:function(e,t,n){},118:function(e,t,n){"use strict";n.r(t),n.d(t,"DATA_PASSING_PIPELINE_URL",(function(){return g})),n.d(t,"GOOGLE_CLOUD_OPTIMIZER_PIPELINE_URL",(function(){return O}));var r=n(3),a=n.n(r),o=n(8),i=n(4),c=n(123),s=n(125),u=n(79),l=n(75),p=n(77),d=n(121),f=n(78),m=n(41),b=n(0),v=n(12),h=n(13),j=n(1),g="https://raw.githubusercontent.com/Ark-kun/pipelines/b45c82e42588ee0a86b8875d1908d972275bfd2f/samples/test/data_passing.pipeline.component.yaml",O="https://raw.githubusercontent.com/Ark-kun/pipeline_components/84e782224ff79a0690e84e7d66c93cec5089e041/components/google-cloud/Optimizer/_samples/Optimization.pipeline.component.yaml";t.default=function(e){e.componentSpec;var t=e.setComponentSpec,n=e.downloadData,r=void 0===n?h.b:n,x=Object(b.useState)(""),w=Object(i.a)(x,2),y=w[0],k=w[1],S=Object(b.useState)(!1),C=Object(i.a)(S,2),_=C[0],I=C[1];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{type:"button",onClick:function(e){Object(v.f)(g,r).then((function(e){return null===t||void 0===t?void 0:t(e.spec)}))},children:"Load Data Passing pipeline"}),Object(j.jsx)("button",{type:"button",onClick:function(){var e=Object(o.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(v.f)(O,r).then((function(e){return null===t||void 0===t?void 0:t(e.spec)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Load Google Cloud Optimizer pipeline"}),Object(j.jsx)("button",{onClick:function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://IP/api/v1/pods/",{headers:new Headers({Authorization:"Bearer ","Content-Type":"application/json; charset=utf-8"})});case 2:return n=e.sent,e.next=5,n.text();case 5:r=e.sent,k(r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"List K8s cluster objects"}),Object(j.jsx)("span",{children:y}),Object(j.jsx)(c.a,{children:Object(j.jsx)(s.a,{children:"Summary"})}),Object(j.jsx)("button",{onClick:function(e){I(!0)},children:"Show dialog"}),Object(j.jsxs)(u.a,{open:_,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(j.jsx)(l.a,{id:"alert-dialog-title",children:"Do something?"}),Object(j.jsx)(p.a,{children:Object(j.jsx)(d.a,{id:"alert-dialog-description",children:"foo bar"})}),Object(j.jsxs)(f.a,{children:[Object(j.jsx)(m.a,{color:"primary",onClick:function(e){return I(!1)},children:"Disagree"}),Object(j.jsx)(m.a,{color:"primary",onClick:function(e){return I(!1)},autoFocus:!0,children:"Agree"})]})]})]})}},119:function(e,t,n){},12:function(e,t,n){"use strict";n.d(t,"i",(function(){return x})),n.d(t,"j",(function(){return w})),n.d(t,"k",(function(){return y})),n.d(t,"f",(function(){return k})),n.d(t,"e",(function(){return S})),n.d(t,"b",(function(){return T})),n.d(t,"a",(function(){return R})),n.d(t,"l",(function(){return N})),n.d(t,"g",(function(){return D})),n.d(t,"h",(function(){return L})),n.d(t,"d",(function(){return U})),n.d(t,"c",(function(){return P}));var r=n(21),a=(n(4),n(6)),o=n(3),i=n.n(o),c=n(8),s=n(25),u=n(11),l=n.n(u),p=n(13),d=n(20),f="components",m="digest_to_component_data",b="digest_to_component_spec",v="url_to_digest",h="digest_to_canonical_url",j="file_store_",g=function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,a,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?(new TextEncoder).encode(t):t,e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,a=Array.from(new Uint8Array(r)),o=a.map((function(e){return e.toString(16).padStart(2,"0")})).join(""),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.a.createInstance({name:f,storeName:b}),a=l.a.createInstance({name:f,storeName:"digest_to_component_name"}),e.next=4,r.setItem(t,n);case 4:if(void 0===n.name){e.next=7;break}return e.next=7,a.setItem(t,n.name);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,a,o,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="string"===typeof t?t:(new TextDecoder).decode(t),r="string"===typeof t?(new TextEncoder).encode(t):t,"object"===typeof(a=s.a.load(n))&&null!==a){e.next=5;break}throw Error("componentText is not a YAML-encoded object: ".concat(a));case 5:if(Object(d.c)(a)){e.next=7;break}throw Error("componentText does not encode a valid pipeline component: ".concat(a));case 7:return o=a,e.next=10,g(r);case 10:return c=e.sent,u={spec:o,digest:c,text:n},e.abrupt("return",u);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,a=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:p.b,e.next=3,n(t,x);case 3:return(r=e.sent).url=t,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,a,o,c,s,u,l,d,f=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f.length>1&&void 0!==f[1]?f[1]:p.b,void 0===(r=f.length>2?f[2]:void 0)&&(r=new Map),!("graph"in t.implementation)){e.next=35;break}a=0,o=Object.values(t.implementation.graph.tasks);case 5:if(!(a<o.length)){e.next=35;break}if(c=o[a],s=c.componentRef.url,void 0!==(u=c.componentRef.spec)){e.next=32;break}if(void 0===c.componentRef.text){e.next=17;break}return e.next=13,w(c.componentRef.text,n);case 13:l=e.sent,u=l.spec,e.next=25;break;case 17:if(void 0===s){e.next=25;break}if(void 0!==(u=r.get(s))){e.next=25;break}return e.next=22,w(s,n);case 22:d=e.sent,u=d.spec,r.set(s,u);case 25:if(void 0!==u){e.next=29;break}console.error("Could not get component spec for task: ",c.componentRef),e.next=32;break;case 29:return c.componentRef.spec=u,e.next=32,y(c.componentRef.spec,n,r);case 32:a++,e.next=5;break;case 35:return e.abrupt("return",t);case 36:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,o,c,s=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:p.b,e.next=3,w(t,n);case 3:return r=e.sent,e.next=6,y(r.spec,n);case 6:return o=e.sent,c=Object(a.a)(Object(a.a)({},r),{},{spec:o}),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,o,c,s,u,l,d=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.length>1&&void 0!==d[1]?d[1]:p.b,r=!(d.length>2&&void 0!==d[2])||d[2],void 0!==t.spec){e.next=20;break}if(void 0===t.text){e.next=10;break}return e.next=6,x(t.text);case 6:c=e.sent,o=Object(a.a)(Object(a.a)({},t),{},{spec:c.spec,digest:c.digest,text:c.text}),e.next=18;break;case 10:if(void 0===t.url){e.next=17;break}return e.next=13,w(t.url,n);case 13:s=e.sent,o=Object(a.a)(Object(a.a)({},t),{},{spec:s.spec,digest:s.digest,text:s.text}),e.next=18;break;case 17:throw Error("The component reference cannot be materialized since it has no information: ".concat(t));case 18:e.next=26;break;case 20:return console.warn("Regenerating component text from spec. Avoid this."),u=P(t.spec),e.next=24,g(u);case 24:l=e.sent,o=Object(a.a)(Object(a.a)({},t),{},{spec:t.spec,digest:l,text:u});case 26:return r&&y(o.spec,n),e.abrupt("return",o);case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?(new TextEncoder).encode(t):t,e.next=3,x(t);case 3:return r=e.sent,a=l.a.createInstance({name:f,storeName:m}),e.next=7,a.setItem(r.digest,n);case 7:return e.next=9,O(r.digest,r.spec);case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,a,o,c,s,u,p,d,j,g,O,x,w,y=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=y.length>1&&void 0!==y[1]&&y[1],r=l.a.createInstance({name:f,storeName:v}),a=l.a.createInstance({name:f,storeName:b}),o=l.a.createInstance({name:f,storeName:m}),e.next=6,r.getItem(t);case 6:if(null===(c=e.sent)){e.next=20;break}return e.next=10,a.getItem(c);case 10:return s=e.sent,e.next=13,o.getItem(c);case 13:if(u=e.sent,null===s||null===u){e.next=19;break}return p={url:t,digest:c,spec:s,text:(new TextDecoder).decode(u)},e.abrupt("return",p);case 19:console.error("Component db is corrupted: Component with url ".concat(t," was added before with digest ").concat(c," but now has no content in the DB."));case 20:return e.next=22,fetch(t);case 22:return d=e.sent,e.next=25,d.arrayBuffer();case 25:return j=e.sent,e.next=28,C(j);case 28:if((g=e.sent).url=t,void 0!==(O=g.digest)){e.next=34;break}return console.error("Cannot happen: storeComponentText has returned componentReference with digest === undefined."),e.abrupt("return",g);case 34:return null!==c&&O!==c&&console.error("Component db is corrupted: Component with url ".concat(t," previously had digest ").concat(c," but now has digest ").concat(O,".")),x=l.a.createInstance({name:f,storeName:h}),e.next=38,x.getItem(O);case 38:if(null!==(w=e.sent)){e.next=44;break}return e.next=42,x.setItem(O,t);case 42:e.next=49;break;case 44:if(t===w){e.next=49;break}if(console.debug('The component with digest "'.concat(O,'" is being loaded from "').concat(t,'", but was previously loaded from "').concat(w,'".')+(n?" Changing the canonical url.":"")),!n){e.next=49;break}return e.next=49,x.setItem(O,t);case 49:return e.next=51,r.setItem(t,O);case 51:return e.abrupt("return",g);case 52:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(e,t){for(var n=e,r=1;t.has(n);)n=e+" "+(++r).toString();return n},E=function(){var e=Object(c.a)(i.a.mark((function e(t,n,r){var o,c,s,u,p,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t);case 2:return o=j+t,c=l.a.createInstance({name:f,storeName:o}),e.next=6,c.getItem(n);case 6:return s=e.sent,u=new Date,p=(new TextEncoder).encode(r.text),d=null===s?{componentRef:r,name:n,creationTime:u,modificationTime:u,data:p}:Object(a.a)(Object(a.a)({},s),{},{name:n,modificationTime:u,data:p,componentRef:r}),e.next=12,c.setItem(n,d);case 12:return e.abrupt("return",d);case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),A=function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a,o,c,s,u=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:"Component",e.next=3,M(t);case 3:return a=j+t,o=l.a.createInstance({name:f,storeName:a}),e.t0=Set,e.next=8,o.keys();case 8:return e.t1=e.sent,c=new e.t0(e.t1),s=I(r,c),e.abrupt("return",E(t,s,n));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a,o,c=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>2&&void 0!==c[2]?c[2]:"Component",e.next=3,_(n);case 3:return o=e.sent,e.abrupt("return",A(t,o,null!==(r=o.spec.name)&&void 0!==r?r:a));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),R=function(){var e=Object(c.a)(i.a.mark((function e(t,n,r){var a,o,c,s=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.length>3&&void 0!==s[3]?s[3]:"Component",e.next=3,C(n);case 3:return c=e.sent,e.abrupt("return",A(t,c,null!==(a=null!==r&&void 0!==r?r:c.spec.name)&&void 0!==a?a:o));case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),N=function(){var e=Object(c.a)(i.a.mark((function e(t,n,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(r);case 2:return a=e.sent,e.abrupt("return",E(t,n,a));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),D=function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t);case 2:return n=j+t,r=l.a.createInstance({name:f,storeName:n}),a=new Map,e.next=7,r.iterate((function(e,t,n){a.set(t,e)}));case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t);case 2:return r=j+t,a=l.a.createInstance({name:f,storeName:r}),e.abrupt("return",a.getItem(n));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),U=function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t);case 2:return r=j+t,a=l.a.createInstance({name:f,storeName:r}),e.abrupt("return",a.removeItem(n));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(e){return s.a.dump(e,{lineWidth:1e4})},M=function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a,o,c,s,u,p,d,b,v,h,O,x,w,y,k,S,C,_,E,A,T,R,N,D,L,U,M,F,W,G,B,V,H,J;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="component_list_format_version_"+t,o=l.a.createInstance({name:f,storeName:"component_store_settings"}),c=j+t,s=l.a.createInstance({name:f,storeName:c}),e.next=6,o.getItem(a);case 6:if(e.t1=n=e.sent,e.t0=null!==e.t1,!e.t0){e.next=10;break}e.t0=void 0!==n;case 10:if(!e.t0){e.next=14;break}e.t2=n,e.next=15;break;case 14:e.t2=1;case 15:if(u=e.t2,[1,2,3,4].includes(u)){e.next=18;break}throw Error('upgradeComponentListDb: Unknown component list version "'.concat(u,'" for the list ').concat(t));case 18:if(1!==u){e.next=60;break}return console.log("componentStore: Upgrading the component list DB ".concat(t)),d=l.a.createInstance({name:f,storeName:"component_ref_lists"}),e.next=23,d.getItem(t);case 23:if(e.t4=p=e.sent,e.t3=null!==e.t4,!e.t3){e.next=27;break}e.t3=void 0!==p;case 27:if(!e.t3){e.next=31;break}e.t5=p,e.next=32;break;case 31:e.t5=[];case 32:b=e.t5,v=new Set,h="user_pipelines"===t?"Pipeline":"Component",O=Object(r.a)(b),e.prev=36,O.s();case 38:if((x=O.n()).done){e.next=48;break}return y=x.value,k=null!==(w=y.spec.name)&&void 0!==w?w:h,S=I(k,v),C={componentRef:y},e.next=45,s.setItem(S,C);case 45:v.add(S);case 46:e.next=38;break;case 48:e.next=53;break;case 50:e.prev=50,e.t6=e.catch(36),O.e(e.t6);case 53:return e.prev=53,O.f(),e.finish(53);case 56:return e.next=58,o.setItem(a,2);case 58:u=2,console.log("componentStore: Upgraded the component list DB ".concat(t," to version ").concat(u));case 60:if(2!==u){e.next=107;break}return _=l.a.createInstance({name:f,storeName:m}),e.next=64,s.keys();case 64:E=e.sent,A=Object(r.a)(E),e.prev=66,A.s();case 68:if((T=A.n()).done){e.next=95;break}return R=T.value,e.next=72,s.getItem(R);case 72:if(null!==(N=e.sent)){e.next=75;break}throw Error('File "'.concat(R,'" has disappeared during upgrade'));case 75:return D=N.componentRef,e.next=78,_.getItem(N.componentRef.digest);case 78:if(null!==(L=e.sent)){e.next=89;break}return console.error('Db is corrupted: Could not find data for file "'.concat(R,'" with digest ').concat(N.componentRef.digest,".")),U=P(N.componentRef.spec),L=(new TextEncoder).encode(U),e.next=85,g(L);case 85:throw M=e.sent,D.digest=M,console.warn('The component "'.concat(R,'" was re-serialized. Old digest: ').concat(N.componentRef.digest,". New digest ").concat(M,".")),Error('Db is corrupted: Could not find data for file "'.concat(R,'" with digest ').concat(N.componentRef.digest,"."));case 89:return F=new Date,W={name:R,creationTime:F,modificationTime:F,data:L,componentRef:D},e.next=93,s.setItem(R,W);case 93:e.next=68;break;case 95:e.next=100;break;case 97:e.prev=97,e.t7=e.catch(66),A.e(e.t7);case 100:return e.prev=100,A.f(),e.finish(100);case 103:return u=3,e.next=106,o.setItem(a,u);case 106:console.log("componentStore: Upgraded the component list DB ".concat(t," to version ").concat(u));case 107:if(3!==u){e.next=138;break}return e.next=110,s.keys();case 110:G=e.sent,B=Object(r.a)(G),e.prev=112,B.s();case 114:if((V=B.n()).done){e.next=126;break}return H=V.value,e.next=118,s.getItem(H);case 118:if(null!==(J=e.sent)){e.next=121;break}throw Error('File "'.concat(H,'" has disappeared during upgrade'));case 121:return J.componentRef.text||(J.componentRef.text=(new TextDecoder).decode(J.data)),e.next=124,s.setItem(H,J);case 124:e.next=114;break;case 126:e.next=131;break;case 128:e.prev=128,e.t8=e.catch(112),B.e(e.t8);case 131:return e.prev=131,B.f(),e.finish(131);case 134:return u=4,e.next=137,o.setItem(a,u);case 137:console.log("componentStore: Upgraded the component list DB ".concat(t," to version ").concat(u));case 138:case"end":return e.stop()}}),e,null,[[36,50,53,56],[66,97,100,103],[112,128,131,134]])})));return function(t){return e.apply(this,arguments)}}()},120:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(18),i=n.n(o),c=(n(107),n(108),n(3)),s=n.n(c),u=n(8),l=n(4),p=n(17),d=n(13),f=n(24),m=n(84),b=n(62),v=n(12),h=n(25),j="autosaved.component.yaml",g=function(){try{var e=window.sessionStorage.getItem(j);if(null!==e){var t=h.a.load(e);if(null!==t&&"object"===typeof t)return t}}catch(n){console.error(n)}},O=function(e){var t=e.componentSpec,n=Object(p.k)((function(e){return e.nodes}));return void 0!==n&&n.length>0&&function(e,t){try{void 0!==t&&(0===t.length&&console.warn("saveComponentSpec: nodes.length === 0"),e=Object(f.b)(e,t,!0,!0));var n=Object(v.c)(e);window.sessionStorage.setItem(j,n)}catch(a){var r;!0!==(null===a||void 0===a||null===(r=a.message)||void 0===r?void 0:r.startsWith("The nodes array does not"))&&console.error(a)}}(t,n),null},x=(n(119),n(1)),w=function(){var e=Object(r.useState)(),t=Object(l.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(Object(b.a)()),i=Object(l.a)(o,1)[0],c=d.b;return Object(r.useEffect)((function(){Object(u.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(t=g())){e.next=4;break}return a(t),e.abrupt("return");case 4:return n=i.defaultPipelineUrl,e.prev=5,e.next=8,Object(v.f)(n,c);case 8:r=e.sent,a(r.spec),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(5),console.error("Failed to load the default pipeline from ".concat(n)),console.error(e.t0),a(f.a);case 17:case"end":return e.stop()}}),e,null,[[5,12]])})))()}),[i.defaultPipelineUrl,c]),void 0===n?Object(x.jsx)(x.Fragment,{}):Object(x.jsx)("div",{className:"dndflow",children:Object(x.jsxs)(p.g,{children:[Object(x.jsx)("div",{className:"reactflow-wrapper",children:Object(x.jsxs)(f.c,{componentSpec:n,setComponentSpec:a,snapToGrid:!0,snapGrid:[10,10],children:[Object(x.jsx)(p.e,{}),Object(x.jsx)(p.c,{}),Object(x.jsx)(p.b,{gap:10})]})}),Object(x.jsx)(m.a,{componentSpec:n,setComponentSpec:a,appSettings:i,downloadData:c}),Object(x.jsx)(O,{componentSpec:n})]})})},y=n(159);var k=function(){return Object(x.jsx)("footer",{className:"footer",style:{width:"100%",height:"30px",padding:"4px",textAlign:"center",backgroundColor:"ghostwhite"},children:Object(x.jsxs)("div",{style:{display:"inline-block"},children:[Object(x.jsx)(y.a,{href:"https://cloud-pipelines.net/",underline:"hover",target:"_blank",rel:"noopener",style:{margin:"6px"},children:"About"}),Object(x.jsx)(y.a,{href:"https://github.com/Cloud-Pipelines/pipeline-editor/issues",underline:"hover",target:"_blank",rel:"noopener",style:{margin:"6px"},children:"Give feedback"}),Object(x.jsx)(y.a,{href:"https://cloud-pipelines.net/privacy_policy",underline:"hover",target:"_blank",rel:"noopener",style:{margin:"6px"},children:"Privacy policy"})]})})};var S=function(){return Object(x.jsxs)("div",{className:"App",style:{width:"100%",height:"calc(100% - 30px)"},children:[Object(x.jsx)(w,{}),Object(x.jsx)(k,{})]})},C=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function _(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,162)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),o(e),i(e)}))};i.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(S,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/pipeline-editor",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/pipeline-editor","/service-worker.js");C?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):_(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):_(t,e)}))}}(),I()},13:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return b}));var r=n(3),a=n.n(r),o=n(8),i=n(25),c=function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,o,i,c,s,u,l,p,d=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>2&&void 0!==d[2]?d[2]:"cache",o=d.length>3&&void 0!==d[3]&&d[3],e.next=4,caches.open(r);case 4:return i=e.sent,e.next=7,i.match(t);case 7:if(c=e.sent,s=!1,void 0!==c&&!o){e.next=24;break}return e.prev=10,e.next=13,fetch(t);case 13:if((u=e.sent).ok){e.next=16;break}throw new Error("Network response was not OK: ".concat(u.status,": ").concat(u.statusText));case 16:c=u,s=!0,e.next=24;break;case 20:if(e.prev=20,e.t0=e.catch(10),void 0!==c){e.next=24;break}throw e.t0;case 24:return l=c.clone(),e.t1=n,e.next=28,c.arrayBuffer();case 28:if(e.t2=e.sent,p=(0,e.t1)(e.t2),!s){e.next=33;break}return e.next=33,i.put(t,l);case 33:return e.abrupt("return",p);case 34:case"end":return e.stop()}}),e,null,[[10,20]])})));return function(t,n){return e.apply(this,arguments)}}();function s(e,t){return u.apply(this,arguments)}function u(){return(u=Object(o.a)(a.a.mark((function e(t,n){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Network response was not OK: ".concat(r.status,": ").concat(r.statusText));case 5:return e.t0=n,e.next=8,r.arrayBuffer();case 8:return e.t1=e.sent,o=(0,e.t0)(e.t1),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var l=[/^https:\/\/raw.githubusercontent.com\/[-A-Za-z_]+\/[-A-Za-z_]+\/[0-9a-fA-f]{40}\/.*/,/^https:\/\/gitlab.com\/([-A-Za-z_]+\/){2,}-\/raw\/[0-9a-fA-f]{40}\/.*/];function p(e,t){return d.apply(this,arguments)}function d(){return(d=Object(o.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.some((function(e){return t.match(e)})),e.abrupt("return",c(t,n,"cache",!r));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return(new TextDecoder).decode(e)}function m(e){var t=JSON.parse(f(e));if("object"===typeof t&&void 0!==t&&null!==t)return t;throw Error('Expected a JSON-encoded object, but got "'.concat(typeof t,'"'))}function b(e){var t=i.a.load(f(e));if("object"===typeof t&&void 0!==t&&null!==t)return t;throw Error('Expected a YAML-encoded object, but got "'.concat(typeof t,'"'))}},20:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var r=function(e){return"object"===typeof e&&"implementation"in e},a=function(e){return"container"in e},o=function(e){return"graph"in e}},24:function(e,t,n){"use strict";n.d(t,"a",(function(){return C})),n.d(t,"b",(function(){return N}));var r=n(21),a=n(5),o=n(19),i=n(4),c=n(6),s=n(0),u=n(17),l=n(20),p=(n(26),n(3)),d=n.n(p),f=n(8),m=n(53),b=n(1),v=function(e){var t=e.taskSpec,n=e.closeEditor,r=e.setArguments,a=Object(s.useState)(Object(c.a)({},t.arguments)),o=Object(i.a)(a,2),u=o[0],l=o[1],p=t.componentRef.spec;return void 0===p?(console.error("ArgumentsEditor called with missing taskSpec.componentRef.spec",t),Object(b.jsx)(b.Fragment,{})):Object(b.jsxs)("form",{onSubmit:function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),style:{position:"fixed",background:"white",border:"1px solid black",borderRadius:"4px",padding:"15px"},children:[Object(b.jsxs)("legend",{children:["Input arguments for ",p.name]}),Object(b.jsx)(m.a,{componentSpec:p,componentArguments:u,setComponentArguments:l}),Object(b.jsx)("button",{type:"button",onClick:n,children:"Close"}),Object(b.jsx)("button",{type:"button",onClick:function(e){null===r||void 0===r||r(u),null===n||void 0===n||n()},children:"Apply"})]})},h=u.f.Top,j=u.f.Bottom,g=function(e){return"task"===e.type&&void 0!==e.data&&"taskSpec"in e.data};function O(e,t,n,r,a){for(var o=[],c=e.length,s=0;s<c;s++){var l,p,d=e[s],f=r+d.name,m=String(100*((s+1)/(c+1)))+"%",v=n===u.f.Top||n===u.f.Bottom?{left:m}:{top:m},h=null!==(l=null===(p=d.type)||void 0===p?void 0:p.toString())&&void 0!==l?l:"Any",j=["handle_".concat(r).concat(h).replace(/ /g,"_")];(null!==a&&void 0!==a?a:[]).includes(d.name)&&j.push("missing-argument"),j=j.map((function(e){return e.replace(/ /g,"_")}));var g=x(n,c),O=Object(i.a)(g,2),w=O[0],y=O[1],k=d.name+" : "+h+"\n"+(d.description||"");o.push(Object(b.jsx)(u.d,{type:t,position:n,id:f,style:v,isConnectable:!0,title:k,className:j.join(" "),children:Object(b.jsx)("div",{className:w,style:y,children:d.name})},f))}return o}function x(e,t){var n=180,r="label";return e===u.f.Top||e===u.f.Bottom?(t>1&&(n=180/(t+1)),n<35&&(n=50,r+=" label-angled")):n=60,[r,{maxWidth:"".concat(n,"px")}]}var w=function(e){var t,n,r,a,o=e.data,c=Object(s.useState)(!1),u=Object(i.a)(c,2),l=u[0],p=u[1],d=o.taskSpec,f=d.componentRef.spec;if(void 0===f)return Object(b.jsx)(b.Fragment,{});var m=null!==(t=f.name)&&void 0!==t?t:"<component>",g="Task ID: "+o.taskId;f.name&&(g+="\nComponent: "+f.name),d.componentRef.url&&(g+="\nUrl: "+d.componentRef.url),d.componentRef.digest&&(g+="\nDigest: "+d.componentRef.digest),f.description&&(g+="\nDescription: "+f.description);var x=(null!==(n=f.inputs)&&void 0!==n?n:[]).filter((function(e){var t;return!0!==e.optional&&void 0===e.default&&!(e.name in(null!==(t=d.arguments)&&void 0!==t?t:{}))})).map((function(e){return e.name})),w=function(e,t){return O(e,"target",h,"input_",t)}(null!==(r=f.inputs)&&void 0!==r?r:[],x),y=O(null!==(a=f.outputs)&&void 0!==a?a:[],"source",j,"output_"),k=w.concat(y);return Object(b.jsxs)("div",{onDoubleClick:function(){p(!l)},title:g,children:[m,k,l&&Object(b.jsx)(v,{taskSpec:d,closeEditor:function(){p(!1)},setArguments:o.setArguments})]})},y=["name","description","metadata","inputs","outputs","implementation"],k=["children","componentSpec","setComponentSpec"],S="https://cloud-pipelines.net/pipeline-editor/",C={implementation:{graph:{tasks:{}}}},_=function(e){return"task_"+e},I=function(e){return"input_"+e},E=function(e){return"output_"+e},A=function(e){return e.replace(/^task_/,"")},T=function(e){return e.replace(/^input_/,"")},R=function(e){return e.replace(/^output_/,"")},N=function(e,t){var n,r,s,u=arguments.length>2&&void 0!==arguments[2]&&arguments[2],p=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e=Object(c.a)({},e);var d=function(e){return JSON.stringify({x:e.__rf.position.x,y:e.__rf.position.y,width:e.__rf.width,height:e.__rf.height})},f=function(e,t){var n=e.__rf.position.x-t.__rf.position.x,r=e.__rf.position.y-t.__rf.position.y;return 0!==n?n:r},m=function(e,t){var n=e.__rf.position.x-t.__rf.position.x,r=e.__rf.position.y-t.__rf.position.y;return 0!==r?r:n},b=t.filter((function(e){return"input"===e.type})).sort(f),v=t.filter((function(e){return"output"===e.type})).sort(f),h=t.filter(g).sort(m),j=new Map(b.map((function(e){return[T(e.id),d(e)]}))),O=new Map(b.map((function(e,t){return[T(e.id),t]}))),x=function(e,t){var n,r;return(null!==(n=O.get(e.name))&&void 0!==n?n:1/0)-(null!==(r=O.get(t.name))&&void 0!==r?r:1/0)},w=new Map(v.map((function(e){return[R(e.id),d(e)]}))),k=new Map(v.map((function(e,t){return[R(e.id),t]}))),C=function(e,t){var n,r;return(null!==(n=k.get(e.name))&&void 0!==n?n:1/0)-(null!==(r=k.get(t.name))&&void 0!==r?r:1/0)},_=new Map(h.map((function(e){return[A(e.id),d(e)]}))),I=new Map(h.map((function(e,t){return[A(e.id),t]}))),E=function(e,t){var n,r;return(null!==(n=I.get(e[0]))&&void 0!==n?n:1/0)-(null!==(r=I.get(t[0]))&&void 0!==r?r:1/0)};if(e.inputs=null===(n=e.inputs)||void 0===n?void 0:n.map((function(e){if(!j.has(e.name)||!O.has(e.name))throw Error("The nodes array does not have input node ".concat(e.name));var t=Object(c.a)({},e.annotations);p?t["editor.position"]=j.get(e.name):delete t["editor.position"];var n=Object(c.a)(Object(c.a)({},e),{},{annotations:t});return 0===Object.keys(t).length&&delete n.annotations,n})).sort(x),e.outputs=null===(r=e.outputs)||void 0===r?void 0:r.map((function(e){if(!w.has(e.name)||!k.has(e.name))throw Error("The nodes array does not have output node ".concat(e.name));var t=Object(c.a)({},e.annotations);p?t["editor.position"]=w.get(e.name):delete t["editor.position"];var n=Object(c.a)(Object(c.a)({},e),{},{annotations:t});return void 0!==t&&0!==Object.keys(t).length||delete n.annotations,n})).sort(C),!Object(l.b)(e.implementation))return e;var N=Object(c.a)({},e.implementation.graph),D=Object.fromEntries(Object.entries(N.tasks||{}).map((function(e){var t=Object(i.a)(e,2),n=t[0],r=t[1];if(!_.has(n)||!I.has(n))throw Error("The nodes array does not have task node ".concat(n));var a=Object(c.a)({},r.annotations);p?a["editor.position"]=_.get(n):delete a["editor.position"];var o=Object(c.a)(Object(c.a)({},r),{},{annotations:a});return void 0!==a&&0!==Object.keys(a).length||delete o.annotations,u||void 0===o.componentRef.spec||void 0===o.componentRef.url||(o.componentRef=Object(c.a)({},o.componentRef),delete o.componentRef.spec),delete o.componentRef.text,[n,o]})).sort(E));void 0!==D&&(N.tasks=D),e=Object(c.a)(Object(c.a)({},e),{},{implementation:Object(c.a)(Object(c.a)({},e.implementation),{},{graph:N})});var L=function(e){var t=e.name,n=e.description,r=e.metadata,o=e.inputs,i=e.outputs,s=e.implementation,u=Object(a.a)(e,y);return Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)({},t&&{name:t}),n&&{description:n}),r&&{metadata:r}),o&&{inputs:o}),i&&{outputs:i}),{},{implementation:s},u)};return e=L(e=Object(c.a)(Object(c.a)({},e),{},{metadata:Object(c.a)(Object(c.a)({},e.metadata),{},{annotations:Object(c.a)(Object(c.a)({},null===(s=e.metadata)||void 0===s?void 0:s.annotations),{},Object(o.a)({},"sdk",S))})}))},D=function(e,t){for(var n=e,r=1;t.has(n);)n=e+" "+(++r).toString();return n},L={task:Object(s.memo)(w)},U=(t.c=function(e){var t,n,o,l,p,d=e.children,f=e.componentSpec,m=void 0===f?{implementation:{graph:{tasks:{}}}}:f,v=e.setComponentSpec,h=Object(a.a)(e,k),j=Object(s.useState)(),g=Object(i.a)(j,2),O=g[0],x=g[1];if(!("graph"in m.implementation))return Object(b.jsx)(b.Fragment,{});var w=m.implementation.graph,y=Object.entries(w.tasks).map((function(e){var t=Object(i.a)(e,2),n=t[0],r=t[1],a={x:0,y:0};if(void 0!==r.annotations)try{var o=r.annotations["editor.position"],c=JSON.parse(o);a={x:c.x,y:c.y}}catch(s){}return{id:_(n),data:{taskSpec:r,taskId:n,setArguments:function(e){return G(n,e)}},position:a,type:"task"}})),S=(null!==(t=m.inputs)&&void 0!==t?t:[]).map((function(e){var t={x:0,y:0};if(void 0!==e.annotations)try{var n=e.annotations["editor.position"],r=JSON.parse(n);t={x:r.x,y:r.y}}catch(a){}return{id:I(e.name),data:{label:e.name},position:t,type:"input"}})),C=(null!==(n=m.outputs)&&void 0!==n?n:[]).map((function(e){var t={x:0,y:0};if(void 0!==e.annotations)try{var n=e.annotations["editor.position"],r=JSON.parse(n);t={x:r.x,y:r.y}}catch(a){}return{id:E(e.name),data:{label:e.name},position:t,type:"output"}})),N=Object.entries(w.tasks).flatMap((function(e){var t,n=Object(i.a)(e,2),r=n[0],a=n[1];return Object.entries(null!==(t=a.arguments)&&void 0!==t?t:{}).flatMap((function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1];if("string"===typeof a)return[];if("taskOutput"in a){var o=a.taskOutput;return[{id:"".concat(o.taskId,"_").concat(o.outputName,"-").concat(r,"_").concat(n),source:_(o.taskId),sourceHandle:"output_".concat(o.outputName),target:_(r),targetHandle:"input_".concat(n),arrowHeadType:u.a.ArrowClosed}]}if("graphInput"in a){var c=a.graphInput;return[{id:"Input_".concat(c.inputName,"-").concat(r,"_").concat(n),source:I(c.inputName),sourceHandle:null,target:_(r),targetHandle:"input_".concat(n),arrowHeadType:u.a.ArrowClosed}]}return console.error("Impossible task input argument kind: ",a),[]}))})),P=Object.entries(null!==(o=w.outputValues)&&void 0!==o?o:{}).map((function(e){var t=Object(i.a)(e,2),n=t[0],r=t[1].taskOutput;return{id:"".concat(r.taskId,"_").concat(r.outputName,"-Output_").concat(n),source:_(r.taskId),sourceHandle:"output_".concat(r.outputName),target:E(n),targetHandle:null,arrowHeadType:u.a.ArrowClosed}})),M=y.concat(S).concat(C).concat(N).concat(P),F=function(e){m=e,v(e)},W=function(e){w=e,F(Object(c.a)(Object(c.a)({},m),{},{implementation:{graph:w}}))},G=function(e,t){var n=Object(c.a)(Object(c.a)({},w),{},{tasks:Object(c.a)({},w.tasks)});n.tasks[e]=Object(c.a)(Object(c.a)({},w.tasks[e]),{},{arguments:t}),W(n)},B=function(e,t,n){var r=w.tasks[e].arguments,a=Object(c.a)({},r);void 0===n?delete a[t]:a[t]=n,G(e,a)},V=function(e,t){return B(e,t,void 0)},H=function(e,t){var n=Object(c.a)({},w.outputValues);void 0===t?delete n[e]:n[e]=t,w=Object(c.a)(Object(c.a)({},w),{},{outputValues:n}),W(w)},J=function(e){return H(e)},K=function(e){var t,n;if(null!==e.source&&null!==e.target){var r=null===(t=e.targetHandle)||void 0===t?void 0:t.replace(/^input_/,""),a=null===(n=e.sourceHandle)||void 0===n?void 0:n.replace(/^output_/,"");if(void 0!==a){var o={taskOutput:{taskId:A(e.source),outputName:a}};void 0!==r?B(A(e.target),r,o):H(R(e.target),o)}else{var i={graphInput:{inputName:T(e.source)}};void 0!==r?B(A(e.target),r,i):console.error("addConnection: Cannot directly connect graph input to graph output: ",e)}}else console.error("addConnection called with missing source or target: ",e)},z=function(e){var t,n=null===(t=e.targetHandle)||void 0===t?void 0:t.replace(/^input_/,"");void 0!==n?V(A(e.target),n):J(R(e.target))},q=function(e){if("input"===e.type)!function(e){for(var t,n=0,r=Object.entries(w.tasks);n<r.length;n++)for(var a=Object(i.a)(r[n],2),o=a[0],s=a[1],u=0,l=Object.entries(null!==(p=s.arguments)&&void 0!==p?p:{});u<l.length;u++){var p,d=Object(i.a)(l[u],2),f=d[0],b=d[1];"string"!==typeof b&&"graphInput"in b&&b.graphInput.inputName===e&&V(o,f)}var v=(null!==(t=m.inputs)&&void 0!==t?t:[]).filter((function(t){return t.name!==e}));m=Object(c.a)(Object(c.a)({},m),{},{inputs:v}),F(m)}(T(e.id));else if("output"===e.type){!function(e){var t;J(e);var n=(null!==(t=m.outputs)&&void 0!==t?t:[]).filter((function(t){return t.name!==e}));m=Object(c.a)(Object(c.a)({},m),{},{outputs:n}),F(m)}(R(e.id))}else if("task"===e.type){!function(e){for(var t,n=0,r=Object.entries(w.tasks);n<r.length;n++)for(var a=Object(i.a)(r[n],2),o=a[0],s=a[1],u=0,l=Object.entries(null!==(p=s.arguments)&&void 0!==p?p:{});u<l.length;u++){var p,d=Object(i.a)(l[u],2),f=d[0],m=d[1];"string"!==typeof m&&"taskOutput"in m&&m.taskOutput.taskId===e&&V(o,f)}var b=Object.fromEntries(Object.entries(null!==(t=w.outputValues)&&void 0!==t?t:{}).filter((function(t){var n=Object(i.a)(t,2);return n[0],n[1].taskOutput.taskId!==e})));w=Object(c.a)(Object(c.a)({},w),{},{outputValues:b});var v=Object(c.a)(Object(c.a)({},w),{},{tasks:Object(c.a)({},w.tasks)});delete v.tasks[e],W(v)}(A(e.id))}else console.log("removeNode: Unexpected note type: ",e)};return Object(b.jsx)(u.h,Object(c.a)(Object(c.a)({},h),{},{elements:M,nodeTypes:L,onConnect:function(e){K(e)},onDragOver:function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"},onDrop:function(e){if(e.preventDefault(),O){var t=e.dataTransfer.getData("application/reactflow");if(""===t)return;var n=JSON.parse(t),r=Object.keys(n)[0],a=n[r],o=0,i=0,s=e.dataTransfer.getData("DragStart.offset");if(""!==s){var u,l,p=JSON.parse(s);o=null!==(u=p.offsetX)&&void 0!==u?u:0,i=null!==(l=p.offsetY)&&void 0!==l?l:0}var d=O.project({x:e.clientX-o,y:e.clientY-i}),f={x:d.x,y:d.y},b={"editor.position":JSON.stringify(f)};if("task"===r){var v,h,j=a,g=Object(c.a)(Object(c.a)({},j.annotations),b);j.annotations=g;var x=Object(c.a)(Object(c.a)({},j),{},{annotations:g}),y=function(e){return D(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Task",new Set(Object.keys(e.tasks)))}(w,null!==(v=null===(h=j.componentRef.spec)||void 0===h?void 0:h.name)&&void 0!==v?v:"Task");(w=Object(c.a)(Object(c.a)({},w),{},{tasks:Object(c.a)({},w.tasks)})).tasks[y]=x,W(w)}else if("input"===r){var k,S={name:function(e){var t;return D(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Input",new Set(null===(t=e.inputs)||void 0===t?void 0:t.map((function(e){return e.name}))))}(m),annotations:b},C=(null!==(k=m.inputs)&&void 0!==k?k:[]).concat([S]);m=Object(c.a)(Object(c.a)({},m),{},{inputs:C}),F(m)}else if("output"===r){var _,I={name:function(e){var t;return D(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Output",new Set(null===(t=e.outputs)||void 0===t?void 0:t.map((function(e){return e.name}))))}(m),annotations:b},E=(null!==(_=m.outputs)&&void 0!==_?_:[]).concat([I]);m=Object(c.a)(Object(c.a)({},m),{},{outputs:E}),F(m)}}},onEdgeUpdate:function(e,t){z(e),K(t)},onElementsRemove:function(e){var t,n=Object(r.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;Object(u.i)(a)&&z(a)}}catch(s){n.e(s)}finally{n.f()}var o,i=Object(r.a)(e);try{for(i.s();!(o=i.n()).done;){var c=o.value;Object(u.j)(c)&&q(c)}}catch(s){i.e(s)}finally{i.f()}},onLoad:function(e){return x(e)},deleteKeyCode:null!==(l=h.deleteKeyCode)&&void 0!==l?l:U()?"Backspace":"Delete",multiSelectionKeyCode:null!==(p=h.multiSelectionKeyCode)&&void 0!==p?p:U()?"Command":"Control",children:d}))},function(){return window.navigator.platform.startsWith("Mac")||window.navigator.platform.startsWith("iPhone")||window.navigator.platform.startsWith("iPad")||window.navigator.platform.startsWith("iPod")})},26:function(e,t,n){"use strict";function r(e){if(void 0===e)throw TypeError("Object is undefined");return e}function a(e){return void 0!==e}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}))},43:function(e,t,n){"use strict";var r=n(6),a=n(5),o=n(1),i=["componentReference"];t.a=function(e){var t,n,c,s,u,l=e.componentReference,p=Object(a.a)(e,i),d=(null===(t=l.spec)||void 0===t?void 0:t.name)||"";(l.url&&(d+="\nUrl: "+l.url),l.digest&&(d+="\nDigest: "+l.digest),null===(n=l.spec)||void 0===n?void 0:n.description)&&(d+="\nDescription: "+(null===(u=l.spec)||void 0===u?void 0:u.description));return Object(o.jsx)("div",Object(r.a)(Object(r.a)({className:"react-flow__node react-flow__node-task sidebar-node",draggable:!0,onDragStart:function(e){return function(e,t){e.dataTransfer.setData("application/reactflow",JSON.stringify(t)),e.dataTransfer.setData("DragStart.offset",JSON.stringify({offsetX:e.nativeEvent.offsetX,offsetY:e.nativeEvent.offsetY})),e.dataTransfer.effectAllowed="move"}(e,{task:{componentRef:l}})},title:d},p),{},{children:null!==(c=null===(s=l.spec)||void 0===s?void 0:s.name)&&void 0!==c?c:"Component"}))}},53:function(e,t,n){"use strict";var r=n(6),a=n(1);t.a=function(e){var t,n=e.componentSpec,o=e.componentArguments,i=e.setComponentArguments,c=e.shrinkToWidth,s=void 0!==c&&c;return Object(a.jsx)("div",{className:"highlight-invalid-inputs",style:{display:"table",borderSpacing:"5px",tableLayout:s?"fixed":"auto",width:"100%"},children:(null!==(t=n.inputs)&&void 0!==t?t:[]).map((function(e){var t,n=e.name,c=void 0,s=void 0,u=o[n];void 0===u?c=e.default:"string"===typeof u?c=u:s="taskOutput"in u?"<from task ".concat(u.taskOutput.taskId," / ").concat(u.taskOutput.outputName,">"):"graphInput"in u?"<from graph input ".concat(u.graphInput.inputName,">"):"<reference>";var l,p=!(n in o)&&!0!==e.optional&&void 0===e.default,d=(void 0===(l=e.type)?"Any":"string"===typeof l?l:JSON.stringify(l))+(!0===e.optional?"?":""),f="".concat(n," (").concat(d,")\n").concat(e.description||"");return Object(a.jsxs)("div",{style:{display:"table-row"},children:[Object(a.jsx)("label",{title:f,style:{textAlign:"right",display:"table-cell",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:Object(a.jsxs)("span",{children:[n," (",Object(a.jsx)("span",{style:{textOverflow:"ellipsis",overflow:"hidden",maxWidth:"90px",display:"inline-block",verticalAlign:"bottom"},title:d,children:d}),")"]})}),Object(a.jsx)("input",{style:{display:"table-cell",borderWidth:"1px",minWidth:"50px",maxWidth:"100%"},placeholder:s,required:p,value:null!==(t=c)&&void 0!==t?t:"",pattern:void e.type,onChange:function(e){o[n]=e.target.value,i(Object(r.a)({},o))}}),Object(a.jsx)("div",{style:{display:"table-cell",width:"30px"},children:Object(a.jsx)("button",{type:"button",title:"Reset to default",onClick:function(e){delete o[n],i(Object(r.a)({},o))},disabled:!(n in o),children:"\u2327"})})]},n)}))})}},62:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return m}));var r=n(74),a=n(73),o=n(40),i=n(30),c=["https://raw.githubusercontent.com/Ark-kun/pipeline_components/pipeline_component_feed/pipeline_component_feed.yaml"],s=["repo:Ark-kun/pipeline_components path:components"],u=function(){function e(t,n){Object(o.a)(this,e),this._defaultValue=void 0,this._storageKey=void 0,this._defaultValue=n,this._storageKey=t}return Object(i.a)(e,[{key:"value",get:function(){try{var e=window.localStorage.getItem(this._storageKey);if(null!==e)return this.deserialize(e)}catch(t){console.error("window.localStorage.getItem was unavailable or threw an exception. This should not happen."),console.error(t)}return this._defaultValue},set:function(e){var t=this.serialize(e);t===this.serialize(this._defaultValue)?window.localStorage.removeItem(this._storageKey):window.localStorage.setItem(this._storageKey,t)}},{key:"resetToDefault",value:function(){return window.localStorage.removeItem(this._storageKey),this._defaultValue}},{key:"isOverridden",value:function(){return null!==window.localStorage.getItem(this._storageKey)}}]),e}(),l=function(e){Object(r.a)(n,e);var t=Object(a.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"serialize",value:function(e){return e}},{key:"deserialize",value:function(e){return e}}]),n}(u),p=function(e){Object(r.a)(n,e);var t=Object(a.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"serialize",value:function(e){return JSON.stringify(e)}},{key:"deserialize",value:function(e){return JSON.parse(e)}}]),n}(u),d=function e(){Object(o.a)(this,e),this.componentLibraryUrl=new l("ComponentLibrary/component_library_url","/pipeline-editor/component_library.yaml"),this.pipelineLibraryUrl=new l("PipelineLibrary/pipeline_library_url","/pipeline-editor/pipeline_library.yaml"),this.defaultPipelineUrl=new l("App/default_pipeline_url","https://raw.githubusercontent.com/Ark-kun/pipelines/2edfd25b5ee3a4aa149c24a225a50041fbd3662d/components/XGBoost/_samples/sample_pipeline.pipeline.component.yaml"),this.componentFeedUrls=new p("ComponentSearch/component_feed_urls",c),this.gitHubSearchLocations=new p("ComponentSearch/github_search_locations",s),this.googleCloudOAuthClientId=new l("GoogleCloud/google_cloud_oauth_client_id","640001104961-2m8hs192tmd9f9nssbr5thr5o3uhmita.apps.googleusercontent.com")},f=function(){return new d},m=function(){var e=f();return{componentLibraryUrl:e.componentLibraryUrl.value,pipelineLibraryUrl:e.pipelineLibraryUrl.value,defaultPipelineUrl:e.defaultPipelineUrl.value,componentFeedUrls:e.componentFeedUrls.value,gitHubSearchLocations:e.gitHubSearchLocations.value,googleCloudOAuthClientId:e.googleCloudOAuthClientId.value}}},65:function(e,t,n){"use strict";n.d(t,"b",(function(){return I})),n.d(t,"a",(function(){return E}));var r,a,o=n(6),i=n(19),c=n(4),s=n(20);!function(e){e.PRIMITIVE_TYPE_UNSPECIFIED="PRIMITIVE_TYPE_UNSPECIFIED",e.INT="INT",e.DOUBLE="DOUBLE",e.STRING="STRING"}(r||(r={})),function(e){e.TRIGGER_STRATEGY_UNSPECIFIED="TRIGGER_STRATEGY_UNSPECIFIED",e.ALL_UPSTREAM_TASKS_SUCCEEDED="ALL_UPSTREAM_TASKS_SUCCEEDED",e.ALL_UPSTREAM_TASKS_COMPLETED="ALL_UPSTREAM_TASKS_COMPLETED"}(a||(a={}));var u=function(e){return e.toLowerCase().replace(/\W/,"-")},l=function(e){if("string"===typeof e){if(["integer"].includes(e.toLowerCase()))return r.INT;if(["float","double"].includes(e.toLowerCase()))return r.DOUBLE}return r.STRING},p=function(e){return{type:l(e)}},d=function(e,t){switch(t){case r.STRING:return{stringValue:e};case r.INT:return{intValue:parseInt(e)};case r.DOUBLE:return{doubleValue:parseFloat(e)};default:throw Error("Unknown primitive type ".concat(t))}},f="_make_artifact",m="_make_artifact",b="parameter",v="artifact",h=function(e){return{componentRef:{name:f},taskInfo:{name:"Make artifact"},inputs:{parameters:Object(i.a)({},b,e)},cachingOptions:{enableCache:!0}}},j={executorLabel:m,inputDefinitions:{parameters:Object(i.a)({},b,{type:r.STRING})},outputDefinitions:{artifacts:Object(i.a)({},v,{artifactType:{schemaTitle:"system.Artifact"}})}},g={container:{image:"alpine",command:["sh","-ec",'mkdir -p "$(dirname "$1")"; printf "%s" "$0" > "$1"',"{{$.inputs.parameters['".concat(b,"']}}"),"{{$.outputs.artifacts['".concat(v,"'].path}}")]}};function O(e,t){if(void 0===e)if(void 0!==t.default)e=t.default;else{if(!0!==t.optional)throw Error('Argument was not provided for required input "'.concat(t.name,'"'));console.error('Input "'.concat(t.name,"\" is optional, but command-line still uses it when when it's not present.")),e=""}if("string"===typeof e)return{runtimeValue:{constantValue:d(e,l(t.type))}};if("graphInput"in e)return{componentInputParameter:e.graphInput.inputName};if("taskOutput"in e)return{taskOutputParameter:{producerTask:e.taskOutput.taskId,outputParameterKey:e.taskOutput.outputName}};throw Error('Unknown kind of task argument: "'.concat(e,'"'))}function x(e,t,n,r){if(void 0===e)if(void 0!==t.default)e=t.default;else{if(!0!==t.optional)throw Error('Argument was not provided for required input "'.concat(t.name,'"'));console.error('Input "'.concat(t.name,"\" is optional, but command-line still uses it when when it's not present.")),e=""}var a;if("string"===typeof e)return a=r({runtimeValue:{constantValue:{stringValue:e}}},"Make artifact");if("graphInput"in e){if(n)a=r({componentInputParameter:e.graphInput.inputName},"Make artifact for "+e.graphInput.inputName);else a={componentInputArtifact:e.graphInput.inputName};return a}if("taskOutput"in e)return a={taskOutputArtifact:{producerTask:e.taskOutput.taskId,outputArtifactKey:e.taskOutput.outputName}};throw Error('Unknown kind of task argument: "'.concat(e,'"'))}var w=function(e){if(void 0===e)throw TypeError("Object is undefined");return e};function y(e,t,n,r){var a,o,i;if(!Object(s.a)(e.implementation))throw Error("Only container components are supported by this function");var u=e.implementation.container,l=function(e,t,n){var r,a;if(!Object(s.a)(e.implementation))throw Error("resolveCommandLine only supports container components");var o=e.implementation.container,i=new Set,u=new Set,l=function e(r){if("string"==typeof r)return[r];if("inputValue"in r){var a=r.inputValue;return n.has(a)?(i.add(a),["{{$.inputs.parameters['".concat(a,"']}}")]):(u.add(a),["{{$.inputs.artifacts['".concat(a,"'].value}}")])}if("inputPath"in r){var o=r.inputPath;return u.add(o),["{{$.inputs.artifacts['".concat(o,"'].path}}")]}if("outputPath"in r){var c=r.outputPath;return["{{$.outputs.artifacts['".concat(c,"'].path}}")]}if("if"in r){var s=[r.if.cond,r.if.then,r.if.else],l=s[0],p=s[1],d=s[2],f=!1;if("string"===typeof l)f="true"===l.toLowerCase();else if("boolean"===typeof l)f=l;else if("isPresent"in l)f=l.isPresent in t;else{if(!("inputValue"in l))throw Error("Unexpected condition kind: "+l);var m=l.inputValue;if(m in t){var b=t[m];if("string"!==typeof b)throw Error("Using runtime conditions in component command line placeholders is not supported yet.");f="true"===b.toLowerCase()}else f=!1}var v=f?p:d;return void 0===v?[]:v.flatMap(e)}if("concat"in r)return[r.concat.flatMap(e).join("")];throw Error("Unknown kind of command-line argument: ".concat(r))},p=o.env&&Object.fromEntries(Object.entries(o.env).map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1],a=l(r);if(1!==a.length)throw Error("Environment variable value must resolve to a single value, but got ".concat(a));return[n,a[0]]})));return{command:null===(r=o.command)||void 0===r?void 0:r.flatMap(l),args:null===(a=o.args)||void 0===a?void 0:a.flatMap(l),env:p,inputsConsumedAsParameter:i,inputsConsumedAsArtifact:u}}(e,t,n),d=r({container:{image:u.image,command:l.command,args:l.args,env:l.env&&Object.entries(l.env).map((function(e){var t=Object(c.a)(e,2);return{name:t[0],value:t[1]}}))}},null!==(a=e.name)&&void 0!==a?a:"Component"),f=new Map((null!==(o=e.inputs)&&void 0!==o?o:[]).map((function(e){return[e.name,e]})));return{inputDefinitions:{parameters:Object.fromEntries(Array.from(l.inputsConsumedAsParameter.values()).map((function(e){var t;return[e,p(null===(t=f.get(e))||void 0===t?void 0:t.type)]}))),artifacts:Object.fromEntries(Array.from(l.inputsConsumedAsArtifact.values()).map((function(e){var t;return[e,(null===(t=f.get(e))||void 0===t||t.type,{artifactType:{schemaTitle:"system.Artifact"}})]})))},outputDefinitions:{parameters:{},artifacts:Object.fromEntries((null!==(i=e.outputs)&&void 0!==i?i:[]).map((function(e){return[e.name,(e.type,{artifactType:{schemaTitle:"system.Artifact"}})]})))},executorLabel:d}}function k(e,t,n,r,a){var i,u,l;if(!Object(s.b)(e.implementation))throw Error("Only graph components are supported by this function");for(var d=e.implementation.graph,b=new Set,O=new Set,x={},w=new Map,y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Task",n=JSON.stringify(e),r=w.get(n);if(void 0!==r)return r;var a=new Set(Object.keys(x)),o=_(t,a);return w.set(n,o),x[o]=e,o},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Make artifact",n=r(g,m),i=Object(o.a)(Object(o.a)({},j),{},{executorLabel:n}),c=a(i,f),s=h(e);s.componentRef.name=c;var u=y(s,t),l={taskOutputArtifact:{producerTask:u,outputArtifactKey:v}};return l},S=0,I=Object.entries(d.tasks);S<I.length;S++){var E=Object(c.a)(I[S],2),A=E[0],T=E[1];if(void 0===T.componentRef.spec)throw Error('Task "'.concat(A,'" does not have taskSpec.componentRef.spec.'));try{var R,N=C(T.componentRef.spec,null!==(R=T.arguments)&&void 0!==R?R:{},n,r,a,k);if(A in x)throw Error('Task ID "'.concat(A,'" is not unique. This cannot happen (unless user task ID clashes with special task ID).'));x[A]=N;for(var D=0,L=Object.values(null!==(U=null===(P=N.inputs)||void 0===P?void 0:P.parameters)&&void 0!==U?U:{});D<L.length;D++){var U,P,M=L[D];void 0!==M.componentInputParameter&&b.add(M.componentInputParameter)}for(var F=0,W=Object.values(null!==(G=null===(B=N.inputs)||void 0===B?void 0:B.artifacts)&&void 0!==G?G:{});F<W.length;F++){var G,B,V=W[F];"componentInputArtifact"in V&&O.add(V.componentInputArtifact)}}catch(Y){throw Y instanceof Error&&(Y.message="Error compiling task ".concat(A,": ")+Y.message),Y}}var H=Array.from(b).filter((function(e){return O.has(e)}));if(H.length>0)throw Error('Compiler error: When compiling component "'.concat(e.name,'" some inputs are used both as parameter and artifact: "').concat(H,'". Please file a bug report.'));var J=Array.from(n).filter((function(e){return O.has(e)}));if(J.length>0)throw Error('Compiler error: When compiling component "'.concat(e.name,'" some parameter arguments are consumed as artifact: "').concat(J,'". Please file a bug report.'));var K,z,q=(K=null!==(i=d.outputValues)&&void 0!==i?i:{},z=function(e){return{artifactSelectors:[{producerSubtask:e.taskOutput.taskId,outputArtifactKey:e.taskOutput.outputName}]}},Object.fromEntries(Object.entries(K).map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];return[n,z(r)]})))),$=new Map((null!==(u=e.inputs)&&void 0!==u?u:[]).map((function(e){return[e.name,e]})));return{inputDefinitions:{parameters:Object.fromEntries(Array.from(b.values()).map((function(e){var t;return[e,p(null===(t=$.get(e))||void 0===t?void 0:t.type)]}))),artifacts:Object.fromEntries(Array.from(O.values()).map((function(e){var t;return[e,(null===(t=$.get(e))||void 0===t||t.type,{artifactType:{schemaTitle:"system.Artifact"}})]})))},outputDefinitions:{artifacts:Object.fromEntries((null!==(l=e.outputs)&&void 0!==l?l:[]).map((function(e){return[e.name,(e.type,{artifactType:{schemaTitle:"system.Artifact"}})]})))},dag:{tasks:x,outputs:{artifacts:q}}}}function S(e,t,n,r,a){if(Object(s.a)(e.implementation))return y(e,t,n,r);if(Object(s.b)(e.implementation))return k(e,0,n,r,a);throw Error("Unsupported component implementation kind: ".concat(e.implementation))}var C=function(e,t,n,r,a,o){var i,c,s,u,l,p,d,f,m=new Set((null!==(i=e.inputs)&&void 0!==i?i:[]).map((function(e){return e.name})).filter((function(e){var r=t[e];return void 0===r||("string"===typeof r||!(!("graphInput"in r)||!n.has(r.graphInput.inputName)))}))),b=new Map((null!==(c=e.inputs)&&void 0!==c?c:[]).map((function(e){return[e.name,e]}))),v=S(e,t,m,r,a),h=a(v,null!==(s=e.name)&&void 0!==s?s:"Component"),j=Object.fromEntries(Object.keys(null!==(u=null===(l=v.inputDefinitions)||void 0===l?void 0:l.parameters)&&void 0!==u?u:{}).map((function(e){return[e,O(t[e],w(b.get(e)))]}))),g=Object.fromEntries(Object.keys(null!==(p=null===(d=v.inputDefinitions)||void 0===d?void 0:d.artifacts)&&void 0!==p?p:{}).map((function(e){return[e,x(t[e],w(b.get(e)),m.has(e),o)]})));return{taskInfo:{name:null!==(f=e.name)&&void 0!==f?f:"Component"},inputs:{parameters:j,artifacts:g},cachingOptions:{enableCache:!0},componentRef:{name:h}}},_=function(e,t){for(var n=e,r=1;t.has(n);)n=e+" "+(++r).toString();return n},I=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pipeline",a={},o=new Map,i={},c=new Map,s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Executor",n=JSON.stringify(e),r=o.get(n);if(void 0!==r)return r;var i=new Set(Object.keys(a)),c=_(t,i);return o.set(n,c),a[c]=e,c},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Component",n=JSON.stringify(e),r=c.get(n);if(void 0!==r)return r;var a=new Set(Object.keys(i)),o=_(t,a);return c.set(n,o),i[o]=e,o},p=new Set((null!==(t=e.inputs)&&void 0!==t?t:[]).map((function(e){return e.name}))),d=Object.fromEntries((null!==(n=e.inputs)&&void 0!==n?n:[]).map((function(e){var t={graphInput:{inputName:e.name}};return[e.name,t]}))),f=S(e,d,p,s,l),m={pipelineInfo:{name:u(r)},sdkVersion:"Cloud-Pipelines",schemaVersion:"2.0.0",deploymentSpec:{executors:a},components:i,root:f};return m},E=function(e,t,n){var r,a,o,i,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pipeline",u=I(e,s),l=null!==(r=(null!==(a=u.root.inputDefinitions)&&void 0!==a?a:{}).parameters)&&void 0!==r?r:{};n=n||new Map;for(var p=(null!==(o=e.inputs)&&void 0!==o?o:[]).filter((function(e){return void 0!==e.default})).map((function(e){return[e.name,String(e.default)]})),f=new Map(p.concat(Array.from(n.entries()))),m={},b=0,v=Array.from(f.entries());b<v.length;b++){var h=Object(c.a)(v[b],2),j=h[0],g=h[1];j in l?m[j]=d(g,l[j].type):console.error('A pipeline argument was provided for the input "'.concat(j,'" that does not exist in the pipeline spec.'))}var O={displayName:null!==(i=e.name)&&void 0!==i?i:"Pipeline",runtimeConfig:{parameters:m,gcsOutputDirectory:t},pipelineSpec:u};return O}},84:function(e,t,n){"use strict";(function(e){var r=n(4),a=n(0),o=n(85),i=n(95),c=n(86),s=n(87),u=n(88),l=n(94),p=n(93),d=n(91),f=n(13),m=n(1),b=function(e,t){e.dataTransfer.setData("application/reactflow",JSON.stringify(t)),e.dataTransfer.setData("DragStart.offset",JSON.stringify({offsetX:e.nativeEvent.offsetX,offsetY:e.nativeEvent.offsetY})),e.dataTransfer.effectAllowed="move"};t.a=function(t){var v,h,j=t.componentSpec,g=t.setComponentSpec,O=t.appSettings,x=t.downloadData,w=void 0===x?f.b:x,y=Object(a.useState)(!1),k=Object(r.a)(y,2),S=k[0],C=k[1],_=function(){return null};if("development"===(null===(v=e)||void 0===v||null===(h=Object({NODE_ENV:"production",PUBLIC_URL:"/pipeline-editor",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}))||void 0===h?void 0:h.NODE_ENV))try{var I=n(118).default;_=function(){return I({componentSpec:j,setComponentSpec:g,downloadData:w})}}catch(E){}return Object(m.jsxs)("aside",{className:"nodeList",children:[Object(m.jsxs)("details",{style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px"},children:[Object(m.jsx)("summary",{style:{borderWidth:"1px",padding:"4px",fontWeight:"bold"},children:"Save/Load pipeline"}),Object(m.jsx)(l.a,{componentSpec:j,setComponentSpec:g,samplePipelineLibraryUrl:O.pipelineLibraryUrl,downloadData:w})]}),Object(m.jsxs)("details",{style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px"},children:[Object(m.jsx)("summary",{style:{borderWidth:"1px",padding:"4px",fontWeight:"bold"},children:"Run pipeline"}),Object(m.jsx)(p.a,{componentSpec:j,googleCloudOAuthClientId:O.googleCloudOAuthClientId})]}),Object(m.jsx)("h3",{children:"Drag components to the canvas:"}),Object(m.jsxs)("details",{style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px"},children:[Object(m.jsx)("summary",{children:Object(m.jsx)("strong",{children:"Special"})}),Object(m.jsx)("div",{className:"react-flow__node react-flow__node-input sidebar-node",onDragStart:function(e){return b(e,{input:{label:"Input"}})},draggable:!0,children:"Input"}),Object(m.jsx)("div",{className:"react-flow__node react-flow__node-output sidebar-node",onDragStart:function(e){return b(e,{output:{label:"Output"}})},draggable:!0,children:"Output"})]}),Object(m.jsxs)("details",{open:!0,children:[Object(m.jsx)("summary",{style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px"},children:Object(m.jsx)("strong",{children:"Component library"})}),Object(m.jsx)("div",{style:{paddingLeft:"10px"},children:Object(m.jsx)(o.a,{url:O.componentLibraryUrl,downloadData:w})})]}),Object(m.jsxs)("details",{style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px"},children:[Object(m.jsx)("summary",{style:{borderWidth:"1px",padding:"4px",fontWeight:"bold"},children:"User components"}),Object(m.jsx)(u.a,{})]}),Object(m.jsxs)("details",{open:!0,style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px"},children:[Object(m.jsx)("summary",{style:{borderWidth:"1px",padding:"4px",fontWeight:"bold"},children:"Component search"}),Object(m.jsx)(i.a,{componentFeedUrls:O.componentFeedUrls,gitHubSearchLocations:O.gitHubSearchLocations,downloadData:w})]}),S&&Object(m.jsx)(d.a,{isOpen:S,handleClose:function(){C(!1)}}),Object(m.jsxs)("details",{children:[Object(m.jsx)("summary",{children:"Debug and developer tools"}),Object(m.jsx)("button",{onClick:function(e){C(!0)},children:"Settings"}),j&&Object(m.jsx)(c.a,{componentSpec:j}),j&&Object(m.jsx)(s.a,{componentSpec:j}),Object(m.jsx)(_,{})]})]})}}).call(this,n(111))},85:function(e,t,n){"use strict";var r=n(3),a=n.n(r),o=n(8),i=n(4),c=n(0),s=n(13),u=n(12),l=n(43),p=n(1),d=function(e){var t=e.componentRef,n=e.downloadData,r=void 0===n?s.b:n,a=Object(c.useState)(void 0),o=Object(i.a)(a,2),d=o[0],f=o[1];return Object(c.useEffect)((function(){Object(u.e)(t,r).then(f)}),[t,r]),void 0===d?Object(p.jsx)("div",{children:"Loading..."}):Object(p.jsx)(l.a,{componentReference:d})},f=function(e){var t=e.folder,n=e.isOpen,r=void 0!==n&&n,a=e.downloadData,o=void 0===a?s.b:a;return Object(p.jsxs)(p.Fragment,{children:[t.folders&&Array.from(t.folders).map((function(e,t){return Object(p.jsx)(m,{folder:e,isOpen:r&&0===t,downloadData:o},e.name)})),t.components&&Array.from(t.components).map((function(e){return Object(p.jsx)(d,{componentRef:e,downloadData:o},e.digest||e.url||e.text)}))]})},m=function(e){var t=e.folder,n=e.isOpen,r=void 0!==n&&n,a=e.downloadData,o=void 0===a?s.b:a;return Object(p.jsxs)("details",{open:r,style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px",paddingLeft:"10px"},children:[Object(p.jsx)("summary",{style:{borderWidth:"1px",padding:"4px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},title:t.name,children:Object(p.jsx)("strong",{children:t.name})}),Object(p.jsx)(f,{folder:t,isOpen:r,downloadData:o})]},t.name)},b=function(e){var t=e.componentLibraryStruct,n=e.downloadData,r=void 0===n?s.b:n;return Object(p.jsx)(p.Fragment,{children:Array.from(t.folders).map((function(e,t){return Object(p.jsx)(m,{folder:e,isOpen:0===t,downloadData:r},e.name)}))})},v=function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(s.d)(t),"folders"in n){e.next=3;break}throw Error("Invalid Component library data structure: ".concat(n));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:s.b,e.next=3,n(t,v);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.a=function(e){var t=e.url,n=e.downloadData,r=void 0===n?s.b:n,u=Object(c.useState)(),l=Object(i.a)(u,2),d=l[0],f=l[1];return Object(c.useEffect)((function(){void 0===d&&Object(o.a)(a.a.mark((function e(){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h(t,r);case 3:n=e.sent,f(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[d,t,r]),void 0===d?Object(p.jsx)(p.Fragment,{children:'"The library is not loaded"'}):Object(p.jsx)(b,{componentLibraryStruct:d,downloadData:r})}},86:function(e,t,n){"use strict";var r=n(4),a=n(17),o=n(24),i=n(12),c=n(0),s=n(1);t.a=function(e){var t=e.componentSpec,n=Object(a.k)((function(e){return e.nodes})),u=Object(c.useState)(!1),l=Object(r.a)(u,1)[0],p="";try{var d=Object(o.b)(t,n,l,!0);p=Object(i.c)(d)}catch(b){p=String(b)}var f=new Blob([p],{type:"text/yaml"}),m=Object(s.jsx)("a",{href:URL.createObjectURL(f),download:"component.yaml",children:"component.yaml"});return Object(s.jsxs)("details",{children:[Object(s.jsxs)("summary",{children:["Graph ",m]}),Object(s.jsx)("pre",{style:{overflow:"auto"},children:p})]})}},87:function(e,t,n){"use strict";var r=n(17),a=n(24),o=n(65),i=n(1);t.a=function(e){var t=e.componentSpec,n=Object(r.k)((function(e){return e.nodes})),c="";try{t=Object(a.b)(t,n,!0,!0);var s=Object(o.b)(t);c=JSON.stringify(s,void 0,2)}catch(p){c=String(p)}var u=new Blob([c],{type:"application/json"}),l=URL.createObjectURL(u);return Object(i.jsxs)("details",{children:[Object(i.jsxs)("summary",{children:["Cloud IR ",Object(i.jsx)("a",{href:l,download:"vertex_pipeline_spec.json",children:"vertex_pipeline_spec.json"})]}),Object(i.jsx)("pre",{style:{overflow:"auto"},children:c})]})}},88:function(e,t,n){"use strict";var r=n(6),a=n(3),o=n.n(a),i=n(8),c=n(4),s=n(72),u=n(124),l=n(79),p=n(75),d=n(77),f=n(42),m=n(78),b=n(41),v=n(0),h=n(92),j=n(12),g=n(43),O=n(1),x="user_components";t.a=function(){var e=Object(v.useState)(""),t=Object(c.a)(e,2),n=t[0],a=t[1],l=Object(v.useState)(new Map),p=Object(c.a)(l,2),d=p[0],f=p[1],m=Object(v.useState)(),b=Object(c.a)(m,2),y=b[0],k=b[1],S=Object(v.useState)(),C=Object(c.a)(S,2),_=C[0],I=C[1],E=Object(v.useState)(!1),A=Object(c.a)(E,2),T=A[0],R=A[1],N=Object(v.useCallback)((function(){Object(j.g)(x).then(f)}),[f]);Object(v.useEffect)(N,[N]);var D=Object(v.useCallback)((function(e){e.forEach((function(e){var t=new FileReader;t.onabort=function(){return console.log("file reading was aborted")},t.onerror=function(){return console.log("file reading has failed")},t.onload=Object(i.a)(o.a.mark((function e(){var n,r,i,c,s,u,l,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=t.result)&&void 0!==n){e.next=4;break}return console.error("Dropped file reader result was ".concat(n)),e.abrupt("return");case 4:return e.prev=4,e.next=7,Object(j.a)(x,n);case 7:c=e.sent,s=c.componentRef,console.debug("storeComponentText succeeded",s),null===(r=(i=window).gtag)||void 0===r||r.call(i,"event","UserComponents_component_import",{result:"succeeded"}),a(""),N(),e.next=21;break;case 15:e.prev=15,e.t0=e.catch(4),p="object"===typeof e.t0&&e.t0?e.t0.toString():String(e.t0),a("Error parsing the dropped file as component: ".concat(p,".")),console.error("Error parsing the dropped file as component",e.t0),null===(u=(l=window).gtag)||void 0===u||u.call(l,"event","UserComponents_component_import",{result:"failed"});case 21:case"end":return e.stop()}}),e,null,[[4,15]])}))),t.readAsArrayBuffer(e)}))}),[N]),L=Object(v.useCallback)(function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,i,c,s,u,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(j.b)(x,t);case 3:i=e.sent,c=i.componentRef,console.debug("addComponentToListByUrl succeeded",c),null===(n=(r=window).gtag)||void 0===n||n.call(r,"event","UserComponents_component_import_from_url_succeeded"),a(""),N(),R(!1),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(0),l="object"===typeof e.t0&&e.t0?e.t0.toString():String(e.t0),a("Error parsing the file as component: ".concat(l,".")),console.error("Error importing component from the URL",e.t0),null===(s=(u=window).gtag)||void 0===s||s.call(u,"event","UserComponents_component_import_from_url_failed");case 18:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),[N]),U=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=5;break}return k(void 0),e.next=4,Object(j.d)(x,y);case 4:N();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=Object(h.a)({onDrop:D,accept:".yaml"}),M=P.getRootProps,F=P.getInputProps,W=P.isDragActive;return Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{onClick:function(e){return R(!0)},style:{marginBottom:"4px"},children:"Import from URL"}),Object(O.jsxs)("div",Object(r.a)(Object(r.a)({},M()),{},{children:[Object(O.jsx)("input",Object(r.a)({},F())),Object(O.jsxs)("div",{style:{border:"1px solid black",padding:"4px",minHeight:"3em"},children:[W?"Drop the files here ...":n||"Drag and drop component.yaml files or click to select files",Array.from(d.entries()).map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];return Object(O.jsx)(g.a,{componentReference:r.componentRef,onContextMenu:function(e){e.preventDefault(),I(e.currentTarget),k(n)}},n)}))]})]})),Object(O.jsx)(s.a,{open:void 0!==y,anchorEl:_,onClose:function(){k(void 0)},children:Object(O.jsx)(u.a,{dense:!0,onClick:U,children:"Delete"})}),Object(O.jsx)(w,{isOpen:T,onCancel:function(){return R(!1)},initialValue:"https://raw.githubusercontent.com/.../component.yaml",onImport:L})]})};var w=function(e){var t=e.isOpen,n=e.onImport,r=e.onCancel,a=e.initialValue,o=Object(v.useRef)();return Object(O.jsxs)(l.a,{open:t,fullWidth:!0,children:[Object(O.jsx)(p.a,{children:"Import component"}),Object(O.jsxs)("form",{onSubmit:function(e){o.current&&n(o.current.value),e.preventDefault()},children:[Object(O.jsx)(d.a,{children:Object(O.jsx)(f.a,{id:"name",type:"text",placeholder:a,label:"Component URL",inputRef:o,required:!0,autoFocus:!0,fullWidth:!0})}),Object(O.jsxs)(m.a,{children:[Object(O.jsx)(b.a,{onClick:r,children:"Cancel"}),Object(O.jsx)(b.a,{color:"primary",type:"submit",autoFocus:!0,children:"Import"})]})]})]})}},91:function(e,t,n){"use strict";var r=n(4),a=n(79),o=n(75),i=n(77),c=n(42),s=n(78),u=n(41),l=n(0),p=n(62),d=n(1);t.a=function(e){var t=e.isOpen,n=e.handleClose,f=Object(p.b)(),m=Object(l.useState)(f.componentLibraryUrl.value),b=Object(r.a)(m,2),v=b[0],h=b[1],j=Object(l.useState)(f.pipelineLibraryUrl.value),g=Object(r.a)(j,2),O=g[0],x=g[1],w=Object(l.useState)(f.defaultPipelineUrl.value),y=Object(r.a)(w,2),k=y[0],S=y[1],C=Object(l.useState)(f.componentFeedUrls.value),_=Object(r.a)(C,2),I=_[0],E=_[1],A=Object(l.useState)(f.gitHubSearchLocations.value),T=Object(r.a)(A,2),R=T[0],N=T[1],D=Object(l.useState)(f.googleCloudOAuthClientId.value),L=Object(r.a)(D,2),U=L[0],P=L[1];return Object(d.jsxs)(a.a,{open:t,onClose:n,children:[Object(d.jsx)(o.a,{children:"Settings"}),Object(d.jsxs)(i.a,{children:[Object(d.jsx)(c.a,{id:"component_library_url",label:"Component library URL",variant:"outlined",margin:"normal",fullWidth:!0,value:v,onChange:function(e){return h(e.target.value)}}),Object(d.jsx)(c.a,{id:"pipeline_library_url",label:"Pipeline library URL",variant:"outlined",margin:"normal",fullWidth:!0,value:O,onChange:function(e){return x(e.target.value)}}),Object(d.jsx)(c.a,{id:"default_pipeline_url",label:"Default pipeline URL",variant:"outlined",margin:"normal",fullWidth:!0,value:k,onChange:function(e){return S(e.target.value)}}),Object(d.jsx)(c.a,{id:"component_search_feed_urls",label:"Component search feed URLs",variant:"outlined",margin:"normal",fullWidth:!0,multiline:!0,value:I.join("\n"),onChange:function(e){return E(e.target.value.split("\n"))}}),Object(d.jsx)(c.a,{id:"component_search_locations_github",label:"Component search locations - GitHub",variant:"outlined",margin:"normal",fullWidth:!0,multiline:!0,value:R.join("\n"),onChange:function(e){return N(e.target.value.split("\n"))}}),Object(d.jsx)(c.a,{id:"google_cloud_client_id",label:"Google Cloud OAuth client ID",variant:"outlined",margin:"normal",fullWidth:!0,value:U,onChange:function(e){return P(e.target.value)}})]}),Object(d.jsxs)(s.a,{children:[Object(d.jsx)(u.a,{onClick:n,color:"default",children:"Cancel"}),Object(d.jsx)(u.a,{onClick:function(){f.componentLibraryUrl.value=v,f.pipelineLibraryUrl.value=O,f.defaultPipelineUrl.value=k,f.componentFeedUrls.value=I,f.gitHubSearchLocations.value=R,f.googleCloudOAuthClientId.value=U,n()},color:"primary",children:"Save"}),Object(d.jsx)(u.a,{onClick:function(){h(f.componentLibraryUrl.resetToDefault()),x(f.pipelineLibraryUrl.resetToDefault()),S(f.defaultPipelineUrl.resetToDefault()),E(f.componentFeedUrls.resetToDefault()),N(f.gitHubSearchLocations.resetToDefault()),P(f.googleCloudOAuthClientId.resetToDefault())},color:"secondary",children:"Reset"})]})]})}},93:function(e,t,n){"use strict";var r=n(4),a=n(0),o=n(53),i=n(3),c=n.n(i),s=n(8),u=n(65),l=n(1),p="GoogleCloudSubmitter/gcsOutputDirectory",d="GoogleCloudSubmitter/projectId",f="GoogleCloudSubmitter/region",m="GoogleCloudSubmitter/projectIds",b=["us-central1","us-east1","us-west1","europe-west1","europe-west2","europe-west4","asia-east1","asia-southeast1","northamerica-northeast1"],v=function(){var e=Object(s.a)(c.a.mark((function e(t,n){var r,a=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.abrupt("return",new Promise((function(e,a){gapi.auth.authorize({client_id:t,scope:n,immediate:r},(function(t){if(void 0===t)console.error("authorizeGoogleCloudClient failed"),a("gapi.auth.authorize result is undefined");else if(t.error)console.error("authorizeGoogleCloudClient failed",t.error),a(t.error);else{var r=t.scope,o=null===r||void 0===r?void 0:r.split(" ");if(void 0!==o&&n.every((function(e){return o.includes(e)})))e(t);else{var i="Authorization call succeeded, but the returned scopes are ".concat(r);console.error(i),a(i)}}}))})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=Object(s.a)(c.a.mark((function e(t,n){var r,a,o,i,s,u,l,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v(t,n,!0);case 3:return o=e.sent,null===(r=(a=window).gtag)||void 0===r||r.call(a,"event","GoogleCloud_auth",{result:"succeeded",immediate:"true"}),e.abrupt("return",o);case 8:return e.prev=8,e.t0=e.catch(0),e.prev=10,e.next=13,v(t,n,!1);case 13:return u=e.sent,null===(i=(s=window).gtag)||void 0===i||i.call(s,"event","GoogleCloud_auth",{result:"succeeded",immediate:"false"}),e.abrupt("return",u);case 18:e.prev=18,e.t1=e.catch(10),null===(l=(p=window).gtag)||void 0===l||l.call(p,"event","GoogleCloud_auth",{result:"failed",immediate:"false"});case 21:case"end":return e.stop()}}),e,null,[[0,8],[10,18]])})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t,["https://www.googleapis.com/auth/cloud-platform"]);case 2:return e.next=4,gapi.client.request({path:"https://cloudresourcemanager.googleapis.com/v1/projects/"});case 4:return n=e.sent,e.abrupt("return",n.result);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a,o,i,s,u,l=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:"us-central1",o=l.length>2?l[2]:void 0,i=l.length>3?l[3]:void 0,s=l.length>4?l[4]:void 0,e.next=6,h(i,["https://www.googleapis.com/auth/cloud-platform"]);case 6:return e.next=8,gapi.client.request({path:"https://".concat(a,"-aiplatform.googleapis.com/v1beta1/projects/").concat(t,"/locations/").concat(a,"/pipelineJobs?pipelineJobId=").concat(s),method:"POST",body:JSON.stringify(o)});case 8:return u=e.sent,null===(n=(r=window).gtag)||void 0===n||n.call(r,"event","GoogleCloud_submit_pipeline_job",{result:"succeeded"}),e.abrupt("return",u.result);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(e){var t=e.componentSpec,n=e.pipelineArguments,o=e.googleCloudOAuthClientId,i=Object(a.useState)((function(){var e,t;return JSON.parse(null!==(e=null===(t=window.localStorage)||void 0===t?void 0:t.getItem(m))&&void 0!==e?e:"[]")})),v=Object(r.a)(i,2),h=v[0],O=v[1],x=Object(a.useState)((function(){var e,t;return null!==(e=null===(t=window.localStorage)||void 0===t?void 0:t.getItem(d))&&void 0!==e?e:""})),w=Object(r.a)(x,2),y=w[0],k=w[1],S=Object(a.useState)((function(){var e,t;return null!==(e=null===(t=window.localStorage)||void 0===t?void 0:t.getItem(f))&&void 0!==e?e:"us-central1"})),C=Object(r.a)(S,2),_=C[0],I=C[1],E=Object(a.useState)(""),A=Object(r.a)(E,2),T=A[0],R=A[1],N=Object(a.useState)((function(){var e,t;return null!==(e=null===(t=window.localStorage)||void 0===t?void 0:t.getItem(p))&&void 0!==e?e:""})),D=Object(r.a)(N,2),L=D[0],U=D[1],P=Object(a.useState)(void 0),M=Object(r.a)(P,2),F=M[0],W=M[1],G=Object(a.useState)(void 0),B=Object(r.a)(G,2),V=B[0],H=B[1],J=Object(a.useState)(void 0),K=Object(r.a)(J,2),z=K[0],q=K[1],$=Object(a.useState)(void 0),Y=Object(r.a)($,2),Z=Y[0],X=Y[1];Object(a.useEffect)((function(){if(void 0!==t)try{var e=Object(u.a)(t,L,n);H(void 0),e.labels={sdk:"cloud-pipelines-editor","cloud-pipelines-editor-version":"0-0-1"},q(e);var r=JSON.stringify(e,void 0,2),a=URL.createObjectURL(new Blob([r],{type:"application/json"}));X(a)}catch(i){var o="object"===typeof i&&i instanceof Error?i.toString():String(i);H(o),q(void 0),X(void 0)}}),[t,n,L]);var Q=""!==y&&""!==_&&void 0!==z;return Object(l.jsxs)("form",{onSubmit:function(){var e=Object(s.a)(c.a.mark((function e(n){var r,a,i,s,u,l,m,b,v,h,j,O,x,w,k;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),void 0!==z){e.next=3;break}return e.abrupt("return");case 3:W(void 0),e.prev=4;try{null===(a=window.localStorage)||void 0===a||a.setItem(p,L),null===(i=window.localStorage)||void 0===i||i.setItem(d,y),null===(s=window.localStorage)||void 0===s||s.setItem(f,_)}catch(c){console.error("GoogleCloudSubmitter: Error writing properties to the localStorage",c)}return u=((null!==(r=null===t||void 0===t?void 0:t.name)&&void 0!==r?r:"Pipeline")+" "+(new Date).toISOString().replace("T"," ").replace("Z","")).substring(0,127),l=u.toLowerCase().replace(/[^-a-z0-9]/g,"-").replace(/^-+/,""),z.displayName=u,e.next=11,g(y,_,z,o,l);case 11:m=e.sent,b=m.name,v=b.split("/").slice(-1)[0],h="https://console.cloud.google.com/vertex-ai/locations/".concat(_,"/pipelines/runs/").concat(v,"?project=").concat(y),W(h),R(""),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(4),console.error(e.t0),R(null!==(j=null===e.t0||void 0===e.t0||null===(O=e.t0.result)||void 0===O||null===(x=O.error)||void 0===x?void 0:x.message)&&void 0!==j?j:"Error"),null===(w=(k=window).gtag)||void 0===w||w.call(k,"event","GoogleCloud_submit_pipeline_job",{result:"failed"});case 24:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(t){return e.apply(this,arguments)}}(),children:[Object(l.jsxs)("div",{style:{whiteSpace:"nowrap",margin:"5px"},children:[Object(l.jsx)("label",{htmlFor:"project",children:"Project: "}),Object(l.jsx)("input",{id:"project",required:!0,type:"text",list:"projects",placeholder:"<my-project-id>",value:y,onChange:function(e){return k(e.target.value)}}),Object(l.jsx)("datalist",{id:"projects",children:h.map((function(e){return Object(l.jsx)("option",{value:e},e)}))}),Object(l.jsx)("button",{type:"button",onClick:function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a,i,s,u,l,p,d,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j(o);case 3:a=e.sent,i=a.projects.map((function(e){return e.projectId})),O(i),R("");try{null===(s=window.localStorage)||void 0===s||s.setItem(m,JSON.stringify(i))}catch(t){console.error("GoogleCloudSubmitter: Error writing properties to the localStorage",t)}null===(n=(r=window).gtag)||void 0===n||n.call(r,"event","GoogleCloud_list_projects",{result:"succeeded"}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),R(null!==(u=null===e.t0||void 0===e.t0||null===(l=e.t0.result)||void 0===l||null===(p=l.error)||void 0===p?void 0:p.message)&&void 0!==u?u:"Error"),null===(d=(f=window).gtag)||void 0===d||d.call(f,"event","GoogleCloud_list_projects",{result:"failed"});case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),children:"\u27f3"})]}),Object(l.jsxs)("div",{style:{whiteSpace:"nowrap",margin:"5px"},children:[Object(l.jsx)("label",{htmlFor:"region",children:"Region: "}),Object(l.jsx)("input",{id:"region",required:!0,type:"text",list:"regions",value:_,onChange:function(e){return I(e.target.value)}}),Object(l.jsx)("datalist",{id:"regions",children:b.map((function(e){return Object(l.jsx)("option",{value:e},e)}))})]}),Object(l.jsxs)("div",{style:{whiteSpace:"nowrap",margin:"5px"},children:[Object(l.jsx)("label",{htmlFor:"region",children:"GCS dir: "}),Object(l.jsx)("input",{id:"gcsOutputDirectory",required:!0,type:"text",value:L,onChange:function(e){return U(e.target.value)}})]}),Object(l.jsxs)("div",{style:{whiteSpace:"nowrap",margin:"5px"},children:[Object(l.jsx)("input",{type:"submit",disabled:!Q,value:"Submit pipeline job"}),F&&Object(l.jsx)("a",{href:F,target:"_blank",rel:"noreferrer",style:{margin:"5px"},children:"Job"})]}),void 0!==Z&&Object(l.jsxs)("div",{style:{margin:"5px"},children:["Or download the"," ",Object(l.jsx)("a",{href:Z,download:"vertex_pipeline_job.json",children:"pipeline_job.json"})," ","file, then go to"," ",Object(l.jsx)("a",{href:"https://console.cloud.google.com/vertex-ai/pipelines",children:"Vertex Pipelines"})," ","and"," ",Object(l.jsx)("a",{href:"https://cloud.google.com/vertex-ai/docs/pipelines/run-pipeline#console",children:"create a new run"}),"."]}),V&&Object(l.jsx)("div",{children:V}),T&&Object(l.jsxs)("div",{children:["Error: ",T]})]})},x=n(25),w=n(6),y=n(20),k=n(26),S="data",C=function(e){return e.replaceAll(/[^-a-zA-Z0-9_]/g,"-")},_=function(e){var t=e.replaceAll(/[^-a-zA-Z0-9]/g,"-");return 0===t.length||t[0].match(/[^a-zA-Z0-9]/g)?"id"+t:t},I="Convert artifact to parameter",E="artifact",A="parameter",T=function(e){var t,n,r=null===(t=e.from)||void 0===t||null===(n=t.match(/{{tasks.([^.]+)./))||void 0===n?void 0:n[1];return{name:"<to be set later>",template:I,arguments:{artifacts:[Object(w.a)(Object(w.a)({},e),{},{name:E})]},dependencies:void 0===r?void 0:[r]}},R={name:I,inputs:{artifacts:[{name:E,path:"/tmp/inputs/artifact/data"}]},outputs:{parameters:[{name:A,valueFrom:{path:"/tmp/inputs/parameter/data"}}]},container:{name:"main",image:"alpine",command:["sh","-ec",'mkdir -p "$(dirname "$1")"; cp "$0" "$1"',"{{inputs.artifacts.".concat(E,".path}}"),"{{outputs.parameters.".concat(A,".path}}")]}};function N(e,t){var n;if(!Object(y.a)(e.implementation))throw Error("Only container components are supported by this function");var r=e.implementation.container,a=function(e,t){var n,r;if(!Object(y.a)(e.implementation))throw Error("resolveCommandLine only supports container components");var a=e.implementation.container,o=new Set,i=new Set,c=function e(n){if("string"==typeof n)return[n];if("inputValue"in n){var r=n.inputValue,a=C(r);return o.add(r),["{{inputs.parameters.".concat(a,"}}")]}if("inputPath"in n){var c=n.inputPath,s=C(c);return i.add(c),["{{inputs.artifacts.".concat(s,".path}}")]}if("outputPath"in n){var u=n.outputPath,l=C(u);return["{{outputs.artifacts.".concat(l,".path}}")]}if("if"in n){var p=[n.if.cond,n.if.then,n.if.else],d=p[0],f=p[1],m=p[2],b=!1;if("string"===typeof d)b="true"===d.toLowerCase();else if("boolean"===typeof d)b=d;else if("isPresent"in d)b=d.isPresent in t;else{if(!("inputValue"in d))throw Error("Unexpected condition kind: "+d);var v=d.inputValue;if(v in t){var h=t[v];if("string"!==typeof h)throw Error("Using runtime conditions in component command line placeholders is not supported yet.");b="true"===h.toLowerCase()}else b=!1}var j=b?f:m;return void 0===j?[]:j.flatMap(e)}if("concat"in n)return[n.concat.flatMap(e).join("")];throw Error("Unknown kind of command-line argument: ".concat(n))};return{command:null===(n=a.command)||void 0===n?void 0:n.flatMap(c),args:null===(r=a.args)||void 0===r?void 0:r.flatMap(c),inputsConsumedAsParameter:o,inputsConsumedAsArtifact:i}}(e,t);return{name:"<to be set later>",inputs:{parameters:Array.from(a.inputsConsumedAsParameter.values()).map((function(e){return{name:C(e)}})),artifacts:Array.from(a.inputsConsumedAsArtifact.values()).map((function(e){return{name:C(e),path:"/tmp/inputs/"+e.replaceAll(/[/. ]/g,"_")+"/"+S}}))},outputs:{parameters:[],artifacts:(null!==(n=e.outputs)&&void 0!==n?n:[]).map((function(e){return{name:C(e.name),path:"/tmp/outputs/"+e.name.replaceAll(/[/. ]/g,"_")+"/"+S}}))},container:{name:"main",image:r.image,command:a.command,args:a.args}}}function D(e,t,n,a){if(Object(y.a)(e.implementation))return N(e,t);if(Object(y.b)(e.implementation))return function(e,t,n){var a;if(!Object(y.b)(e.implementation))throw Error("Only graph components are supported by this function");for(var o=e.implementation.graph,i={},c=new Map,s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Task",n=Object(w.a)(Object(w.a)({},e),{},{name:""}),r=JSON.stringify(n),a=c.get(r);if(void 0!==a)return a;var o=new Set(Object.keys(i)),s=U(t,o,_);return c.set(r,s),i[s]=e,e.name=s,s},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Make artifact",r=n(R,I),a=T(e);a.template=r;var o=s(a,t);return{name:"<to be set later>",value:"{{tasks.".concat(o,".outputs.parameters.").concat(A,"}}")}},l=0,p=Object.entries(o.tasks);l<p.length;l++){var d=Object(r.a)(p[l],2),f=d[0],m=d[1];if(void 0===m.componentRef.spec)throw Error('Task "'.concat(f,'" does not have taskSpec.componentRef.spec.'));try{var b,v=L(m.componentRef.spec,null!==(b=m.arguments)&&void 0!==b?b:{},t,n,u);if(f in i)throw Error('Task ID "'.concat(f,'" is not unique. This cannot happen (unless user task ID clashes with special task ID).'));var h=_(f);v.name=h,i[h]=v}catch(q){throw q instanceof Error&&(q.message="Error compiling task ".concat(f,": ")+q.message),q}}for(var j=new Set,g=new Set,O=0,x=Object.values(i);O<x.length;O++){for(var k=x[O],S=0,E=Object.values(null!==(N=null===(D=k.arguments)||void 0===D?void 0:D.parameters)&&void 0!==N?N:{});S<E.length;S++){var N,D,P,M,F=null===(P=E[S].value)||void 0===P||null===(M=P.match(/\{\{inputs\.parameters\.([^}]+)}}/))||void 0===M?void 0:M[1];void 0!==F&&j.add(F)}for(var W=0,G=Object.values(null!==(B=null===(V=k.arguments)||void 0===V?void 0:V.artifacts)&&void 0!==B?B:{});W<G.length;W++){var B,V,H,J,K=null===(H=G[W].from)||void 0===H||null===(J=H.match(/\{\{inputs\.artifacts\.([^}]+)}}/))||void 0===J?void 0:J[1];void 0!==K&&g.add(K)}}var z=Object.entries(null!==(a=o.outputValues)&&void 0!==a?a:{}).map((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1],o=C(n),i=C(a.taskOutput.outputName),c=_(a.taskOutput.taskId);return{name:o,from:"{{tasks.".concat(c,".outputs.artifacts.").concat(i,"}}")}}));return{name:"<to be set later>",inputs:{parameters:Array.from(j.values()).map((function(e){return{name:e}})),artifacts:Array.from(g.values()).map((function(e){return{name:e}}))},outputs:{artifacts:z},dag:{tasks:Object.values(i)}}}(e,n,a);throw Error("Unsupported component implementation kind: ".concat(e.implementation))}var L=function(e,t,n,a,o){var i,c,s,u,l,p,d,f=new Set((null!==(i=e.inputs)&&void 0!==i?i:[]).map((function(e){return e.name})).filter((function(e){var r=t[e];return void 0===r||("string"===typeof r||!(!("graphInput"in r)||!n.has(r.graphInput.inputName)))}))),m=new Map((null!==(c=e.inputs)&&void 0!==c?c:[]).map((function(e){return[e.name,e]}))),b=new Map(Array.from(m.keys()).map((function(e){return[e,C(e)]}))),v=new Map(Array.from(b.entries()).map((function(e){var t=Object(r.a)(e,2),n=t[0];return[t[1],n]}))),h=D(e,t,f,a),j=a(h,null!==(s=e.name)&&void 0!==s?s:"Component"),g=(null!==(u=null===(l=h.inputs)||void 0===l?void 0:l.parameters)&&void 0!==u?u:[]).map((function(e){var n=e.name,r=Object(k.a)(v.get(n)),a=Object(k.a)(m.get(r));return Object(w.a)(Object(w.a)({},function(e,t,n,r){if(void 0===e)if(void 0!==t.default)e=t.default;else{if(!0!==t.optional)throw Error('Argument was not provided for required input "'.concat(t.name,'"'));console.error('Input "'.concat(t.name,"\" is optional, but command-line still uses it when when it's not present.")),e=""}var a={name:C(t.name)};if("string"===typeof e)return a.value=e,a;if("graphInput"in e){var o=C(e.graphInput.inputName);if(n){var i=r({name:"<to be set later>",from:"{{inputs.artifacts.".concat(o,"}}")},"Make parameter for "+e.graphInput.inputName);a.value=i.value}else a.value="{{inputs.parameters.".concat(o,"}}");return a}if("taskOutput"in e){var c=C(e.taskOutput.outputName),s=_(e.taskOutput.taskId),u=r({name:"<to be set later>",from:"{{tasks.".concat(s,".outputs.artifacts.").concat(c,"}}")},"Make parameter for ".concat(e.taskOutput.taskId," output ").concat(e.taskOutput.outputName));return a.value=u.value,a}throw Error('Unknown kind of task argument: "'.concat(e,'"'))}(t[r],a,f.has(r),o)),{},{name:n})})),O=(null!==(p=null===(d=h.inputs)||void 0===d?void 0:d.artifacts)&&void 0!==p?p:[]).map((function(e){var n=e.name,r=Object(k.a)(v.get(n)),a=Object(k.a)(m.get(r));return Object(w.a)(Object(w.a)({},function(e,t){if(void 0===e)if(void 0!==t.default)e=t.default;else{if(!0!==t.optional)throw Error('Argument was not provided for required input "'.concat(t.name,'"'));console.error('Input "'.concat(t.name,"\" is optional, but command-line still uses it when when it's not present.")),e=""}var n={name:C(t.name)};if("string"===typeof e)return n.raw={data:e},n;if("graphInput"in e){var r=C(e.graphInput.inputName);return n.from="{{inputs.artifacts.".concat(r,"}}"),n}if("taskOutput"in e){var a=C(e.taskOutput.outputName),o=_(e.taskOutput.taskId);return n.from="{{tasks.".concat(o,".outputs.artifacts.").concat(a,"}}"),n}throw Error('Unknown kind of task argument: "'.concat(e,'"'))}(t[r],a)),{},{name:n})})),x=g.map((function(e){return e.value})).concat(O.map((function(e){return e.from}))).filter(k.b),y=new Set(x.map((function(e){var t;return null===(t=e.match(/{{tasks.([^.]+).outputs./))||void 0===t?void 0:t[1]})).filter(k.b));return{name:"<to be set later>",template:j,arguments:{parameters:g,artifacts:O},dependencies:Array.from(y.values()).sort()}},U=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"-",a=n(e),o=1;t.has(a);){var i=n(e+r+(++o).toString());if(i===a)throw Error("The name sanitizer seems to truncate the name which makes it impossible to make the name unique. ".concat(i));a=i}return a},P=function(e,t){var n,a,o,i,c,s,u,l,p,d=function(e){var t,n,r={},a=new Map,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Component",n=Object(w.a)(Object(w.a)({},e),{},{name:""}),o=JSON.stringify(n),i=a.get(o);if(void 0!==i)return i;var c=new Set(Object.keys(r)),s=U(t,c,_);return a.set(o,s),r[s]=e,e.name=s,s},i=new Set;return{entrypoint:o(D(e,Object.fromEntries((null!==(t=e.inputs)&&void 0!==t?t:[]).map((function(e){var t={graphInput:{inputName:e.name}};return[e.name,t]}))),i,o),null!==(n=e.name)&&void 0!==n?n:"Root"),templates:Object.values(r)}}(e),f=(null!==(n=e.inputs)&&void 0!==n?n:[]).filter((function(e){return void 0!==e.default})).map((function(e){return[e.name,String(e.default)]})),m=new Map(f.concat(Array.from(t.entries()))),b=new Map(null===(a=d.templates)||void 0===a?void 0:a.map((function(e){return[e.name,e]}))),v=Object(k.a)(b.get(Object(k.a)(d.entrypoint))),h=null!==(o=null===v||void 0===v||null===(i=v.inputs)||void 0===i||null===(c=i.parameters)||void 0===c?void 0:c.map((function(e){return e.name})))&&void 0!==o?o:[],j=null!==(s=null===v||void 0===v||null===(u=v.inputs)||void 0===u||null===(l=u.artifacts)||void 0===l?void 0:l.map((function(e){return e.name})))&&void 0!==s?s:[],g=new Map(Array.from(m.entries()).map((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1];return[C(n),a]}))),O={parameters:h.filter((function(e){return g.has(e)})).map((function(e){return{name:e,value:g.get(e)}})),artifacts:j.filter((function(e){return g.has(e)})).map((function(e){return{name:e,raw:{data:Object(k.a)(g.get(e))}}}))};return d.arguments=O,{apiVersion:"argoproj.io/v1alpha1",kind:"Workflow",metadata:{generateName:((null===(p=e.name)||void 0===p?void 0:p.toLowerCase().replace(/[^-a-z0-9.]/g,"-"))||"Pipeline").substring(0,240),annotations:{"cloud-pipelines.net/pipeline-editor":"true"}},spec:d}},M="KubeflowPipelinesSubmitter/endpoint",F="KubeflowPipelinesSubmitter/auth_token",W=function(){var e=Object(s.a)(c.a.mark((function e(t,n,r,a,o){var i,s,u,l,p,d,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l={name:null!==(i=null!==o&&void 0!==o?o:t.name)&&void 0!==i?i:"Pipeline",pipeline_spec:{workflow_manifest:JSON.stringify(t)}},n.includes("://")||(console.warn("Endpoint URL does not specify a protocol. Using HTTPS."),n="https://"+n),n.endsWith("/")||(n+="/"),p=n+"apis/v1beta1/runs",r){e.next=10;break}if(!a){e.next=10;break}return e.next=8,h(a,["https://www.googleapis.com/auth/cloud-platform"]);case 8:d=e.sent,r=null===d||void 0===d?void 0:d.access_token;case 10:return e.next=12,fetch(p,{method:"POST",body:JSON.stringify(l),headers:new Headers({Authorization:"Bearer "+r})});case 12:return f=e.sent,null===(s=(u=window).gtag)||void 0===s||s.call(u,"event","KubeflowPipelinesSubmitter_submit_pipeline_run_succeeded",{}),e.abrupt("return",f.json());case 15:case"end":return e.stop()}}),e)})));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),G=function(e,t){return e.includes("://")||(e="https://"+e),e.endsWith("/")||(e+="/"),e+"#/runs/details/"+t},B=function(e){var t=e.componentSpec,n=e.pipelineArguments,o=e.googleCloudOAuthClientId,i=Object(a.useState)(void 0),u=Object(r.a)(i,2),p=u[0],d=u[1],f=Object(a.useState)(void 0),m=Object(r.a)(f,2),b=m[0],v=m[1],h=Object(a.useState)(void 0),j=Object(r.a)(h,2),g=j[0],O=j[1],w=Object(a.useState)(void 0),y=Object(r.a)(w,2),k=y[0],S=y[1],C=Object(a.useState)((function(){var e,t;return null!==(e=null===(t=window.localStorage)||void 0===t?void 0:t.getItem(M))&&void 0!==e?e:""})),_=Object(r.a)(C,2),I=_[0],E=_[1],A=Object(a.useState)((function(){var e,t;return null!==(e=null===(t=window.localStorage)||void 0===t?void 0:t.getItem(F))&&void 0!==e?e:""})),T=Object(r.a)(A,2),R=T[0],N=T[1],D=Object(a.useState)(void 0),L=Object(r.a)(D,2)[1],U=Object(a.useState)(void 0),B=Object(r.a)(U,2)[1],V=Object(a.useState)(void 0),H=Object(r.a)(V,2),J=H[0],K=H[1];Object(a.useEffect)((function(){if(void 0!==t)try{var e=P(t,null!==n&&void 0!==n?n:new Map);e.metadata.labels={sdk:"cloud-pipelines-editor","cloud-pipelines.net/pipeline-editor":"true","pipelines.kubeflow.org/pipeline-sdk-type":"cloud-pipelines-editor"},d(e);var r=x.a.dump(e,{lineWidth:-1,quotingType:'"'}),a=URL.createObjectURL(new Blob([r],{type:"application/yaml"}));v((function(e){return void 0!==e&&URL.revokeObjectURL(e),a})),O(void 0)}catch(i){var o="object"===typeof i&&i instanceof Error?i.toString():String(i);O(o)}}),[t,n]);var z=I&&p;return Object(l.jsxs)("form",{onSubmit:function(){var e=Object(s.a)(c.a.mark((function e(n){var r,a,i,s,u,l,d,f,m,b,v,h,j,g,O,x;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),I&&p){e.next=3;break}return e.abrupt("return");case 3:K(void 0),e.prev=4;try{null===(s=window.localStorage)||void 0===s||s.setItem(M,I),null===(u=window.localStorage)||void 0===u||u.setItem(F,R)}catch(c){console.error("KubeflowPipelinesSubmitter: Error writing properties to the localStorage",c)}return l=(null!==(r=null===t||void 0===t?void 0:t.name)&&void 0!==r?r:"Pipeline")+" "+(new Date).toISOString().replace("T"," ").replace("Z",""),e.next=9,W(p,I,R,o,l);case 9:d=e.sent,console.debug(d),"string"===typeof(f=null===d||void 0===d||null===(a=d.run)||void 0===a?void 0:a.id)&&(L(f),m=G(I,f),K(m)),"string"===typeof(b=null===d||void 0===d||null===(i=d.pipeline_runtime)||void 0===i?void 0:i.workflow_manifest)&&(h=JSON.parse(b),(j=null===h||void 0===h||null===(v=h.metadata)||void 0===v?void 0:v.name)&&B(j)),S(void 0),e.next=24;break;case 18:e.prev=18,e.t0=e.catch(4),console.error(e.t0),x="object"===typeof e.t0&&e.t0 instanceof Error?e.t0.toString():String(e.t0),S(x),null===(g=(O=window).gtag)||void 0===g||g.call(O,"event","KubeflowPipelinesSubmitter_submit_pipeline_run_failed",{});case 24:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),children:[Object(l.jsxs)("div",{style:{whiteSpace:"nowrap",margin:"5px"},children:[Object(l.jsx)("label",{htmlFor:"Endpoint",children:"Endpoint: "}),Object(l.jsx)("input",{id:"Endpoint",required:!0,type:"text",placeholder:"https://xxx.pipelines.googleusercontent.com/",title:"https://xxx-dot-us-central2.pipelines.googleusercontent.com/",value:I,onChange:function(e){return E(e.target.value)}})]}),Object(l.jsxs)("div",{style:{whiteSpace:"nowrap",margin:"5px"},children:[Object(l.jsx)("label",{htmlFor:"Token",children:"Token: "}),Object(l.jsx)("input",{id:"Token",type:"text",placeholder:"ya29...",title:"Authorization Bearer token",value:R,onChange:function(e){return N(e.target.value)}})]}),Object(l.jsxs)("div",{style:{whiteSpace:"nowrap",margin:"5px"},children:[Object(l.jsx)("input",{type:"submit",disabled:!z,value:"Submit pipeline"}),J&&Object(l.jsx)("a",{href:J,target:"_blank",rel:"noreferrer",style:{margin:"5px"},children:"Run"})]}),b&&Object(l.jsxs)("div",{style:{margin:"5px"},children:["Or download the"," ",Object(l.jsx)("a",{href:b,download:"kubeflow_pipeline.yaml",children:"kubeflow_pipeline.yaml"})]}),g&&Object(l.jsx)("div",{children:g}),k&&Object(l.jsxs)("div",{children:["Error: ",k]})]})};t.a=function(e){var t,n,i=e.componentSpec,c=e.googleCloudOAuthClientId,s=Object(a.useState)({}),u=Object(r.a)(s,2),p=u[0],d=u[1],f=Object(a.useState)(new Map),m=Object(r.a)(f,2),b=m[0],v=m[1];return Object(a.useEffect)((function(){var e=new Map(Object.entries(p).filter((function(e){return"string"===typeof e[1]})));v(e)}),[p]),Object(l.jsxs)(l.Fragment,{children:[void 0===i||0===(null!==(t=null===i||void 0===i||null===(n=i.inputs)||void 0===n?void 0:n.length)&&void 0!==t?t:0)?void 0:Object(l.jsxs)("fieldset",{style:{padding:"2px",marginBottom:"4px"},children:[Object(l.jsx)("legend",{children:"Arguments"}),Object(l.jsx)(o.a,{componentSpec:i,componentArguments:p,setComponentArguments:d,shrinkToWidth:!0})]}),Object(l.jsxs)("details",{style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px"},children:[Object(l.jsx)("summary",{style:{borderWidth:"1px",padding:"4px",fontWeight:"bold"},children:"Submit to Google Cloud"}),Object(l.jsx)(O,{componentSpec:i,pipelineArguments:b,googleCloudOAuthClientId:c})]}),Object(l.jsxs)("details",{style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px"},children:[Object(l.jsx)("summary",{style:{borderWidth:"1px",padding:"4px",fontWeight:"bold"},children:"Submit to Kubeflow Pipelines"}),Object(l.jsx)(B,{componentSpec:i,pipelineArguments:b,googleCloudOAuthClientId:c})]})]})}},94:function(e,t,n){"use strict";var r=n(3),a=n.n(r),o=n(8),i=n(4),c=n(21),s=n(79),u=n(75),l=n(78),p=n(41),d=n(77),f=n(42),m=n(72),b=n(124),v=n(0),h=n(17),j=n(13),g=n(20),O=n(12),x=n(24),w=n(1),y=function(e){var t=e.componentSpec,n=e.downloadFileName,r=void 0===n?"component.yaml":n,a=e.linkText,o=void 0===a?"component.yaml":a,i=e.linkRef,c=e.style,s=Object(h.k)((function(e){return e.nodes}));try{t=Object(x.b)(t,s,!1,!0)}catch(d){var u;if(!0!==(null===d||void 0===d||null===(u=d.message)||void 0===u?void 0:u.startsWith("The nodes array does not")))return console.error(d),Object(w.jsx)(w.Fragment,{children:"err.toString()"})}var l=Object(O.c)(t),p=new Blob([l],{type:"text/yaml"});return Object(w.jsx)("a",{ref:i,href:URL.createObjectURL(p),download:r,style:c,children:o})},k=function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(j.d)(t),"components"in n){e.next=3;break}throw Error("Invalid Component library data structure: ".concat(n));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:j.b,e.next=3,n(t,k);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function C(e){return void 0!==e}var _=function(e){var t=e.pipelineLibraryUrl,n=e.setComponentSpec,r=e.downloadData,c=void 0===r?j.b:r,s=Object(v.useState)([]),u=Object(i.a)(s,2),l=u[0],p=u[1];return Object(v.useEffect)((function(){Object(o.a)(a.a.mark((function e(){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==l.length){e.next=15;break}return e.prev=1,e.next=4,S(t,c);case 4:return n=e.sent,r=n.components.map((function(e){return e.url})).filter(C),e.next=8,Promise.all(r.map((function(e){return Object(O.f)(e,c)})));case 8:o=e.sent,p(o),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})))()}),[t,c,l.length]),Object(w.jsx)("div",{style:{overflow:"auto",whiteSpace:"nowrap"},children:Object(w.jsx)("div",{style:{overflow:"auto",marginLeft:"10px"},children:l.map((function(e){var t;return Object(w.jsxs)("div",{children:["\u22ee ",Object(w.jsx)("button",{className:"link-button",onClick:function(t){null===n||void 0===n||n(e.spec)},children:null!==(t=e.spec.name)&&void 0!==t?t:"<Pipeline>"})]},e.digest)}))})})},I="user_pipelines",E=function(e,t){var n,r=Object(c.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.endsWith(a)&&(e=e.substring(0,e.length-a.length))}}catch(o){r.e(o)}finally{r.f()}return e},A=function(e){var t=e.isOpen,n=e.onPipelineSave,r=e.onCancel,c=e.initialName,s=Object(v.useState)(c),u=Object(i.a)(s,2),l=u[0],p=u[1],d=Object(v.useState)(!1),f=Object(i.a)(d,2),m=f[0],b=f[1],h=function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(t),e.prev=1,e.next=4,n(t,!1);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),b(!0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(R,{isOpen:t,onSave:h,onCancel:r,initialValue:l,inputLabel:"Pipeline name"}),Object(w.jsx)(T,{isOpen:t&&m,title:"Overwrite?",okButtonText:"Overwrite",onOk:function(){l&&(b(!1),n(l,!0))},onCancel:function(){b(!1)}})]})},T=function(e){var t=e.isOpen,n=e.title,r=e.okButtonText,a=void 0===r?"OK":r,o=e.cancelButtonText,i=void 0===o?"Cancel":o,c=e.onOk,d=e.onCancel;return Object(w.jsxs)(s.a,{open:t,"aria-labelledby":"alert-dialog-title",children:[Object(w.jsx)(u.a,{id:"alert-dialog-title",children:n}),Object(w.jsxs)(l.a,{children:[Object(w.jsx)(p.a,{color:"primary",onClick:d,children:i}),Object(w.jsx)(p.a,{color:"secondary",onClick:c,children:a})]})]})},R=function(e){var t=e.isOpen,n=e.onSave,r=e.onCancel,a=e.initialValue,o=e.inputLabel,i=void 0===o?"Pipeline name":o,c=Object(v.useRef)();return Object(w.jsxs)(s.a,{open:t,"aria-labelledby":"alert-dialog-title",children:[Object(w.jsx)(u.a,{id:"alert-dialog-title",children:"Save pipeline"}),Object(w.jsxs)("form",{onSubmit:function(e){c.current&&n(c.current.value),e.preventDefault()},children:[Object(w.jsx)(d.a,{children:Object(w.jsx)(f.a,{id:"name",type:"text",defaultValue:a,label:i,inputRef:c,required:!0,autoFocus:!0,fullWidth:!0,margin:"dense"})}),Object(w.jsxs)(l.a,{children:[Object(w.jsx)(p.a,{onClick:r,children:"Cancel"}),Object(w.jsx)(p.a,{color:"primary",type:"submit",autoFocus:!0,children:"Save"})]})]})]})};t.a=function(e){var t=e.componentSpec,n=e.setComponentSpec,r=e.samplePipelineLibraryUrl,c=e.downloadData,s=void 0===c?j.b:c,u=Object(v.useState)(new Map),l=Object(i.a)(u,2),p=l[0],d=l[1],f=Object(v.useState)(),k=Object(i.a)(f,2),S=k[0],C=k[1],T=Object(v.useState)(!1),R=Object(i.a)(T,2),N=R[0],D=R[1],L=Object(h.k)((function(e){return e.nodes})),U=Object(v.useState)(),P=Object(i.a)(U,2),M=P[0],F=P[1],W=Object(v.useState)(),G=Object(i.a)(W,2),B=G[0],V=G[1],H=Object(v.useCallback)((function(){Object(O.g)(I).then(d)}),[d]);Object(v.useEffect)(H,[H]);var J=Object(v.useCallback)(function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.k)(t.componentRef.spec,s);case 2:null===n||void 0===n||n(t.componentRef.spec),C(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,C,s]),K=Object(v.useCallback)((function(e){e.forEach((function(e){var t=new FileReader;t.onabort=function(){return console.log("file reading was aborted")},t.onerror=function(){return console.log("file reading has failed")},t.onload=Object(o.a)(a.a.mark((function n(){var r,o,i,c,u,l,p,d,f;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==(r=t.result)&&void 0!==r){n.next=4;break}return console.error("Dropped file reader result was ".concat(r)),n.abrupt("return");case 4:return o=E(e.name,[".pipeline.component.yaml",".component.yaml",".pipeline.yaml",".yaml"])||"Pipeline",n.prev=5,n.next=8,Object(O.i)(r);case 8:if(u=n.sent,Object(g.b)(u.spec.implementation)){n.next=12;break}return console.error("Dropped component is not a graph component"),n.abrupt("return");case 12:return n.next=14,Object(O.k)(u.spec,s);case 14:return n.next=16,Object(O.a)(I,r,o);case 16:l=n.sent,p=l.componentRef,console.debug("storeComponentText succeeded",p),null===(i=(c=window).gtag)||void 0===i||i.call(c,"event","PipelineLibrary_pipeline_import",{result:"succeeded"}),H(),n.next=27;break;case 23:n.prev=23,n.t0=n.catch(5),console.error("Error parsing the dropped file as component",n.t0),null===(d=(f=window).gtag)||void 0===d||d.call(f,"event","PipelineLibrary_pipeline_import",{result:"failed"});case 27:case"end":return n.stop()}}),n,null,[[5,23]])}))),t.readAsArrayBuffer(e)}))}),[H,s]),z=Object(v.useCallback)((function(){D(!0)}),[D]),q=Object(v.useCallback)((function(){D(!1)}),[D]),$=Object(v.useCallback)(function(){var e=Object(o.a)(a.a.mark((function e(n){var r,o,i,c=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.length>1&&void 0!==c[1]&&c[1]){e.next=7;break}return e.next=4,Object(O.h)(I,n);case 4:if(null===e.sent){e.next=7;break}throw Error('File "'.concat(n,'" already exists.'));case 7:if(t){e.next=9;break}return e.abrupt("return");case 9:return(r=Object(x.b)(t,L,!1,!0)).name=n,o=Object(O.c)(r),e.next=14,Object(O.l)(I,n,o);case 14:return i=e.sent,e.next=17,J(i);case 17:q(),H();case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,q,L,J,H]),Y=function(){var e=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!M){e.next=5;break}return F(void 0),e.next=4,Object(O.d)(I,M);case 4:H();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!M){e.next=10;break}return F(void 0),e.next=4,Object(O.h)(I,M);case 4:if(t=e.sent){e.next=8;break}return console.error("handleContextMenuOpen: File ".concat(M," does not exist.")),e.abrupt("return");case 8:return e.next=10,J(t);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=Object(v.useCallback)((function(e){C(void 0),null===n||void 0===n||n(e)}),[n]),Q=Object(v.useRef)(null),ee=Object(v.useRef)(null);return Object(w.jsxs)("div",{style:{overflow:"auto",whiteSpace:"nowrap"},children:[Object(w.jsxs)("div",{style:{margin:"5px"},children:[Object(w.jsx)("button",{onClick:function(e){S?$(null===S||void 0===S?void 0:S.name,!0):z()},children:"Save"}),Object(w.jsx)("button",{onClick:z,children:"Save as"}),t&&N&&Object(w.jsx)(A,{initialName:t.name,isOpen:N,onCancel:q,onPipelineSave:$}),Object(w.jsx)("input",{ref:Q,type:"file",accept:".yaml",onChange:function(e){var t;return K(Array.from(null!==(t=e.target.files)&&void 0!==t?t:[]))},style:{display:"none"}}),Object(w.jsx)("button",{onClick:function(e){var t;return null===(t=Q.current)||void 0===t?void 0:t.click()},children:"+ Import"}),Object(w.jsx)("button",{onClick:function(e){var t;null===(t=ee.current)||void 0===t||t.click()},children:"Export"}),t&&Object(w.jsx)(y,{linkRef:ee,componentSpec:t,linkText:"\ud83d\udd17",downloadFileName:(t.name?t.name+".":"")+"pipeline.component.yaml",style:{textDecoration:"none"}})]}),Object(w.jsxs)("div",{style:{overflow:"auto",marginLeft:"10px"},children:[Array.from(p.entries()).map((function(e){var t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(w.jsxs)("div",{children:["\u22ee ",Object(w.jsx)("button",{className:"link-button",onClick:function(e){return J(r)},style:n===(null===S||void 0===S?void 0:S.name)?{fontWeight:"bold"}:void 0,onContextMenu:function(e){e.preventDefault(),V(e.currentTarget),F(n)},children:n})]},n)})),Object(w.jsxs)(m.a,{open:void 0!==M,anchorEl:B,onClose:function(){F(void 0)},children:[Object(w.jsx)(b.a,{dense:!0,onClick:Z,children:"Open"}),Object(w.jsx)(b.a,{dense:!0,onClick:Y,children:"Delete"})]})]}),Object(w.jsxs)("details",{open:!0,style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px"},children:[Object(w.jsx)("summary",{children:Object(w.jsx)("strong",{children:"Sample pipelines"})}),void 0===r?"Sample pipeline library URL is undefined":Object(w.jsx)(_,{setComponentSpec:X,pipelineLibraryUrl:r,downloadData:s})]})]})}},95:function(e,t,n){"use strict";var r=n(3),a=n.n(r),o=n(8),i=n(4),c=n(0),s=n(13),u=n(21),l=n(70),p=n(71),d=n(96),f=n(25),m=n(11),b=n.n(m),v=n(20),h=n(12),j="components",g="hash_to_data",O="hash_to_component_name",x="url_to_hash",w="hash_to_url",y="url_version",k="bad_hashes",S=function(e){return"items"in e&&Array.isArray(e.items)},C=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o,i,c,u,l,p,d,f=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:1,r=f.length>2&&void 0!==f[2]?f[2]:"indexed",o=f.length>3&&void 0!==f[3]?f[3]:"desc",i=f.length>4&&void 0!==f[4]?f[4]:s.a,c=encodeURIComponent(t),u=encodeURIComponent(r),l=encodeURIComponent(o),p="https://api.github.com/search/code?q=".concat(c,"&sort=").concat(u,"&order=").concat(l,"&per_page=100&page=").concat(n),e.next=10,i(p,s.c);case 10:if(d=e.sent,S(d)){e.next=13;break}throw Error("The downloaded data is not a valid GitHub code search results page");case 13:return e.abrupt("return",d);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(e){return e.replace("https://github.com/","https://raw.githubusercontent.com/").replace("/blob/","/")};function I(e){return E.apply(this,arguments)}function E(){return(E=Object(d.a)(a.a.mark((function e(t){var n,r,o,i,c,s,l,d,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=["filename:component.yaml"].concat(t),o=r.join(" "),i=1;case 4:if(!(i<100)){e.next=33;break}return e.next=7,Object(p.a)(C(o,i));case 7:if(c=e.sent,0!==(s=c.items).length){e.next=11;break}return e.abrupt("break",33);case 11:l=Object(u.a)(s),e.prev=12,l.s();case 14:if((d=l.n()).done){e.next=20;break}return f=d.value,e.next=18,{url:_(f.html_url),hash:f.sha};case 18:e.next=14;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(12),l.e(e.t0);case 25:return e.prev=25,l.f(),e.finish(25);case 28:return e.next=30,Object(p.a)(new Promise((function(e){return setTimeout(e,6e3*1.1)})));case 30:i++,e.next=4;break;case 33:return e.abrupt("return",n);case 34:case"end":return e.stop()}}),e,null,[[12,22,25,28]])})))).apply(this,arguments)}var A=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o,i,c,u,p,d,f,m,v,S,C,E,A,T,R,N,D,L,U,P,M,F,W,G=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=G.length>1&&void 0!==G[1]?G[1]:s.b,console.debug("Starting importComponentsFromGitHubSearch"),r=I(t),o=b.a.createInstance({name:j,storeName:x}),i=b.a.createInstance({name:j,storeName:w}),c=b.a.createInstance({name:j,storeName:g}),u=b.a.createInstance({name:j,storeName:O}),p=b.a.createInstance({name:j,storeName:y}),d=b.a.createInstance({name:j,storeName:k}),f=!0,m=!1,e.prev=11,S=Object(l.a)(r);case 13:return e.next=15,S.next();case 15:return C=e.sent,f=C.done,e.next=19,C.value;case 19:if(E=e.sent,f){e.next=83;break}return T=(A=E).hash.toLowerCase(),R=A.url,e.next=26,d.getItem(T);case 26:if(null===(N=e.sent)){e.next=30;break}return console.debug("Skipping url ".concat(R," with hash ").concat(T,' due to error: "').concat(N,'"')),e.abrupt("continue",80);case 30:if(e.prev=30,(D=_(R)).endsWith("component.yaml")){e.next=35;break}return console.debug("Skipping url ".concat(D,' since it does not end with "component.yaml"')),e.abrupt("continue",80);case 35:return e.next=37,o.getItem(D);case 37:return null!==(L=e.sent)&&L!==T&&console.error("Component cache is broken. Stored hash for ".concat(D,": ").concat(L," != ").concat(T,".")),e.next=41,p.getItem(D);case 41:if(U=e.sent,!(null!==L&&null!==U&&Number.parseInt(U)>=1)){e.next=44;break}return e.abrupt("continue",80);case 44:return console.debug("Processing new component candidate: ".concat(D,".")),P=void 0,M=void 0,e.prev=47,e.next=50,Object(h.j)(D,n);case 50:F=e.sent,M=F.text,P=F.spec,e.next=60;break;case 55:return e.prev=55,e.t0=e.catch(47),W="object"===typeof e.t0&&e.t0?e.t0.toString():String(e.t0),d.setItem(T,W),e.abrupt("continue",80);case 60:return e.next=62,c.setItem(T,M);case 62:return e.next=64,i.getItem(T);case 64:if(null!==e.sent){e.next=68;break}return e.next=68,i.setItem(T,D);case 68:if(!P.name){e.next=71;break}return e.next=71,u.setItem(T,P.name);case 71:return e.next=73,o.setItem(D,T);case 73:return e.next=75,p.setItem(D,1);case 75:e.next=80;break;case 77:e.prev=77,e.t1=e.catch(30),console.error("Error when processing component candidate ".concat(R," Error: ").concat(e.t1,"."));case 80:f=!0,e.next=13;break;case 83:e.next=89;break;case 85:e.prev=85,e.t2=e.catch(11),m=!0,v=e.t2;case 89:if(e.prev=89,e.prev=90,f||null==S.return){e.next=94;break}return e.next=94,S.return();case 94:if(e.prev=94,!m){e.next=97;break}throw v;case 97:return e.finish(94);case 98:return e.finish(89);case 99:console.debug("Finished importComponentsFromGitHubSearch");case 100:case"end":return e.stop()}}),e,null,[[11,85,89,99],[30,77],[47,55],[90,,94,98]])})));return function(t){return e.apply(this,arguments)}}(),T=function(e){return"componentRef"in e},R=function(e){return"object"===typeof e&&"components"in e&&function(e){return Array.isArray(e)&&e.every(T)}(e.components)};function N(e){return void 0!==e}var D=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o,i,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:(new TextDecoder).decode(t),r="blob "+n.length.toString()+"\0"+n,o=(new TextEncoder).encode(r),e.next=5,crypto.subtle.digest("SHA-1",o);case 5:return i=e.sent,c=Array.from(new Uint8Array(i)),s=c.map((function(e){return e.toString(16).padStart(2,"0")})).join(""),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,i,c,u,p,d,m,S,C,_,I,E,A,T,L,U,P,M,F,W,G,B,V,H,J,K,z,q=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=q.length>1&&void 0!==q[1]?q[1]:s.b,console.debug("Starting importComponentsFromFeed"),console.debug("Downloading component feed: ".concat(t,".")),e.next=5,n(t,s.d);case 5:if(r=e.sent,R(r)){e.next=8;break}throw new Error('Component feed loaded from "'.concat(t,'" had invalid content inside.'));case 8:return i=r,e.next=11,Promise.all(i.components.map(function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(n=t.componentRef.url)){e.next=4;break}return console.error("Component feed entry has no reference URL."),e.abrupt("return",void 0);case 4:return e.t0=n,e.next=7,D(t.data);case 7:return e.t1=e.sent,e.t2=t.data,e.abrupt("return",{url:e.t0,hash:e.t1,data:e.t2});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:c=e.sent.filter(N),u=b.a.createInstance({name:j,storeName:x}),p=b.a.createInstance({name:j,storeName:w}),d=b.a.createInstance({name:j,storeName:g}),m=b.a.createInstance({name:j,storeName:O}),S=b.a.createInstance({name:j,storeName:y}),C=b.a.createInstance({name:j,storeName:k}),_=!0,I=!1,e.prev=20,A=Object(l.a)(c);case 22:return e.next=24,A.next();case 24:return T=e.sent,_=T.done,e.next=28,T.value;case 28:if(L=e.sent,_){e.next=97;break}return P=(U=L).hash.toLowerCase(),M=U.url,e.next=35,C.getItem(P);case 35:if(null===(F=e.sent)){e.next=39;break}return console.debug("Skipping url ".concat(M," with hash ").concat(P,' due to error: "').concat(F,'"')),e.abrupt("continue",94);case 39:return e.prev=39,W=U.url,e.next=43,u.getItem(W);case 43:return null!==(G=e.sent)&&G!==P&&console.error("Component cache is broken. Stored hash for ".concat(W,": ").concat(G," != ").concat(P,".")),e.next=47,S.getItem(W);case 47:if(B=e.sent,!(null!==G&&null!==B&&Number.parseInt(B)>=1)){e.next=50;break}return e.abrupt("continue",94);case 50:if(console.debug("Processing new component candidate: ".concat(W,".")),void 0!==(V=U.data)){e.next=65;break}return e.prev=53,e.next=56,Object(h.j)(W,n);case 56:H=e.sent,V=H.text,e.next=65;break;case 60:return e.prev=60,e.t0=e.catch(53),J=e.t0 instanceof Error?e.t0.name+": "+e.t0.message:String(e.t0),C.setItem(P,J),e.abrupt("continue",94);case 65:if("object"===typeof(K=f.a.load(V))&&null!==K){e.next=68;break}throw Error("componentText is not a YAML-encoded object: ".concat(K));case 68:if(Object(v.c)(K)){e.next=70;break}throw Error("componentText does not encode a valid pipeline component: ".concat(K));case 70:if(void 0!==(z=K).implementation){e.next=74;break}return C.setItem(P,'Component lacks the "implementation" section.'),e.abrupt("continue",94);case 74:return e.next=76,d.setItem(P,V);case 76:return e.next=78,p.getItem(P);case 78:if(null!==e.sent){e.next=82;break}return e.next=82,p.setItem(P,W);case 82:if(!z.name){e.next=85;break}return e.next=85,m.setItem(P,z.name);case 85:return e.next=87,u.setItem(W,P);case 87:return e.next=89,S.setItem(W,1);case 89:e.next=94;break;case 91:e.prev=91,e.t1=e.catch(39),console.error("Error when processing component candidate ".concat(M," Error: ").concat(e.t1,"."));case 94:_=!0,e.next=22;break;case 97:e.next=103;break;case 99:e.prev=99,e.t2=e.catch(20),I=!0,E=e.t2;case 103:if(e.prev=103,e.prev=104,_||null==A.return){e.next=108;break}return e.next=108,A.return();case 108:if(e.prev=108,!I){e.next=111;break}throw E;case 111:return e.finish(108);case 112:return e.finish(103);case 113:console.debug("Finished importComponentsFromFeed");case 114:case"end":return e.stop()}}),e,null,[[20,99,103,113],[39,91],[53,60],[104,,108,112]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o,i,c=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:s.b,!t.ComponentFeedUrls){e.next=25;break}r=Object(u.a)(t.ComponentFeedUrls),e.prev=3,r.s();case 5:if((o=r.n()).done){e.next=17;break}return i=o.value,e.prev=7,e.next=10,L(i,n);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),console.error('Error importing component feed "'.concat(i,'": ').concat(e.t0));case 15:e.next=5;break;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(3),r.e(e.t1);case 22:return e.prev=22,r.f(),e.finish(22);case 25:if(void 0===t.GitHubSearchLocations){e.next=28;break}return e.next=28,A(t.GitHubSearchLocations,n);case 28:case"end":return e.stop()}}),e,null,[[3,19,22,25],[7,12]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(o.a)(a.a.mark((function e(){var t,n,r,o,i,c=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:s.b,n=b.a.createInstance({name:j,storeName:w}),r=b.a.createInstance({name:j,storeName:g}),o=new Map,e.next=6,r.iterate((function(e,n,r){try{var a=f.a.load(e);Object(h.k)(a,t),o.set(n,{spec:a})}catch(i){console.error("Error when parsing cached component. Hash: ".concat(n,". Error: ").concat(i,". Component text: ").concat(e))}}));case 6:return e.next=8,n.iterate((function(e,t,n){var r=o.get(t);void 0===r?console.error("Component db corrupted: Component with url ".concat(e," and hash ").concat(t," has no content in the DB.")):r.url=e}));case 8:return i=[],o.forEach((function(e,t){void 0===e.url?console.error("Component db corrupted: Component with hash ".concat(t," has content, but no URL in the DB.")):i.push(e)})),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.a.createInstance({name:j,storeName:g}),e.next=3,t.length();case 3:return e.t0=e.sent,e.abrupt("return",0===e.t0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:s.b,e.next=3,P(n);case 3:return r=e.sent,e.abrupt("return",r.filter((function(e){var n,r,a;return null!==(n=null===(r=e.spec)||void 0===r||null===(a=r.name)||void 0===a?void 0:a.toLowerCase().includes(t.toLowerCase()))&&void 0!==n&&n})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=n(43),G=n(1);t.a=function(e){var t=e.componentFeedUrls,n=e.gitHubSearchLocations,r=e.downloadData,u=void 0===r?s.b:r,l=Object(c.useState)(void 0),p=Object(i.a)(l,2),d=p[0],f=p[1],m=Object(c.useState)(!0),b=Object(i.a)(m,2),v=b[0],h=b[1],j=Object(c.useState)(!1),g=Object(i.a)(j,2),O=g[0],x=g[1],w=Object(c.useState)(""),y=Object(i.a)(w,2),k=y[0],S=y[1],C=Object(c.useState)([]),_=Object(i.a)(C,2),I=_[0],E=_[1];function A(){return(A=Object(o.a)(a.a.mark((function e(r){var o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M();case 3:if(e.sent){e.next=11;break}return e.next=6,F(r);case 6:o=e.sent,x(!0),E(o),e.next=12;break;case 11:console.debug("Component DB is empty. Need to populate the DB first.");case 12:return e.next=14,U({ComponentFeedUrls:t,GitHubSearchLocations:n},u);case 14:return x(!0),e.next=17,F(r);case 17:i=e.sent,E(i),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),f(e.t0.message);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})))).apply(this,arguments)}var T=Object(G.jsx)("span",{});if(v)T=Object(G.jsx)("div",{children:"Enter search query"});else if(void 0!==d)T=Object(G.jsxs)("div",{children:["Error: ",d]});else if(v||O){if(void 0!==I){var R=I.map((function(e){var t;return Object(G.jsx)(W.a,{componentReference:e},null!==(t=e.digest)&&void 0!==t?t:e.url)}));T=Object(G.jsx)(G.Fragment,{children:R})}}else T=Object(G.jsx)("div",{children:"Searching..."});return Object(G.jsxs)("div",{className:"nodeList",children:[Object(G.jsxs)("form",{onSubmit:function(e){var t,n;e.preventDefault(),""!==k&&(h(!1),function(e){A.apply(this,arguments)}(k)),null===(t=(n=window).gtag)||void 0===t||t.call(n,"event","ComponentSearch_search",{})},children:[Object(G.jsx)("input",{type:"search",placeholder:"XGBoost",onChange:function(e){S(e.target.value)}}),Object(G.jsx)("input",{type:"submit"})]}),Object(G.jsx)("div",{children:T})]})}}},[[120,1,2]]]);
//# sourceMappingURL=main.b4769f10.chunk.js.map