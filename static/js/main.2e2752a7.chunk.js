(this["webpackJsonppipeline-editor"]=this["webpackJsonppipeline-editor"]||[]).push([[0],{30:function(e,t,n){},31:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(12),c=n.n(o),i=(n(30),n(31),n(6)),s=n(3),u=n(2),l=n.n(u),d=n(5),p=n(8),f=n.n(p);function h(){return(h=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t).then((function(e){return e.text()})).then((function(e){return f.a.load(e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m=n(11),b=function(e){return{"editor.position":JSON.stringify({x:e.__rf.position.x,y:e.__rf.position.y,width:e.__rf.width,height:e.__rf.height})}},v=function(e,t){return e.__rf.position.x-t.__rf.position.x},g=n(1),j=function(e){var t,n=e.pipelineName,r=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Component",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=e.filter((function(e){return"input"===e.type})).sort(v),s=e.filter((function(e){return"output"===e.type})).sort(v),u=e.filter((function(e){return"task"===e.type})).map((function(e){return e})),l=i.map((function(e){var t={name:e.id};return o&&(t.annotations=b(e)),t})),d=s.map((function(e){var t={name:e.id};return o&&(t.annotations=t.annotations=b(e)),t})),p=u.reduce((function(e,t){var n=t.data;return void 0!==n&&(n=Object.assign({},n),c||(n.componentRef=Object.assign({},n.componentRef),delete n.componentRef.spec),o&&(n.annotations=b(t)),e[t.id]=n),e}),{}),f={},h=Object(m.a)(t);try{for(h.s();!(n=h.n()).done;){var g,j,x=n.value,O=x.source,w=null===(g=x.sourceHandle)||void 0===g?void 0:g.replace(/^output_/,""),k=x.target,y=null===(j=x.targetHandle)||void 0===j?void 0:j.replace(/^input_/,""),_=w?{taskOutput:{taskId:O,outputName:w}}:{graphInput:{inputName:O}};if(y){var N=p[k];void 0===N.arguments&&(N.arguments={}),N.arguments[y]=_}else{var S=_;S?f[k]=S:console.error("Graph outputs can only come from task outputs.")}}}catch(I){h.e(I)}finally{h.f()}var C={name:r,inputs:l,outputs:d,metadata:{annotations:a},implementation:{graph:{tasks:p,outputValues:f}}};return 0===l.length&&delete C.inputs,0===d.length&&delete C.outputs,0===Object.keys(a).length&&delete C.metadata,0===Object.keys(f).length&&delete C.implementation.graph.outputValues,C}(Object(s.k)((function(e){return e.nodes})),Object(s.k)((function(e){return e.edges})),n=null!==(t=n)&&void 0!==t?t:"Pipeline"),a=f.a.dump(r,{lineWidth:1e4}),o=new Blob([a],{type:"text/yaml"}),c=Object(g.jsx)("a",{href:URL.createObjectURL(o),download:"component.yaml",children:"component.yaml"});return Object(g.jsxs)("details",{open:!0,children:[Object(g.jsxs)("summary",{children:["Graph component: ",c]}),Object(g.jsx)("pre",{style:{overflow:"auto"},children:a})]})},x=function(e,t){e.dataTransfer.setData("application/reactflow",JSON.stringify(t)),e.dataTransfer.effectAllowed="move"},O=function(){var e=Object(r.useState)(void 0),t=Object(i.a)(e,2),n=t[0],a=t[1],o="https://raw.githubusercontent.com/kubeflow/pipelines/603342c4b88fe2d69ff07682f702cd3601e883bb/components/PyTorch/Train_PyTorch_model/from_CSV/component.yaml";return Object(r.useEffect)((function(){(function(e){return h.apply(this,arguments)})(o).then(a)}),[]),Object(g.jsxs)("aside",{children:[Object(g.jsx)("div",{className:"description",children:"You can drag these nodes to the pane on the right."}),Object(g.jsx)("div",{className:"react-flow__node-input",onDragStart:function(e){return x(e,{input:{label:"Input Node"}})},draggable:!0,children:"Input Node"}),Object(g.jsx)("div",{className:"react-flow__node-default",onDragStart:function(e){return x(e,{default:{label:"Default Node"}})},draggable:!0,children:"Default Node"}),Object(g.jsx)("div",{className:"react-flow__node-output",onDragStart:function(e){return x(e,{output:{label:"Output Node"}})},draggable:!0,children:"Output Node"}),Object(g.jsx)("div",{className:"react-flow__node react-flow__node-multihandle",draggable:!0,onDragStart:function(e){return x(e,{multihandle:{handles:{top:{type:"target",ids:["top_1","top_2","top_3"]},bottom:{type:"source",ids:["bottom_1","bottom_2"]},left:{type:"target",ids:["left_1"]},right:{type:"source",ids:["right_1"]}},label:"Multi-handle node (3-2-1-1)"}})},children:"Multi-port Node 3-2-1-1"}),Object(g.jsx)("div",{className:"react-flow__node react-flow__node-multihandle",draggable:!0,onDragStart:function(e){var t,r,a;if(void 0!==n){var o=(null!==(t=n.inputs)&&void 0!==t?t:[]).map((function(e){return e.name})),c=(null!==(r=n.outputs)&&void 0!==r?r:[]).map((function(e){return e.name})),i=null!==(a=n.name)&&void 0!==a?a:"Component";return x(e,{multihandle:{handles:{top:{type:"target",ids:o},bottom:{type:"source",ids:c}},label:i}})}},children:"PyTorch/Train_PyTorch_model/from_CSV"}),void 0!==n&&Object(g.jsx)("div",{className:"react-flow__node react-flow__node-multihandle",draggable:!0,onDragStart:function(e){return x(e,{task:{componentRef:{url:o,spec:n}}})},children:n.name}),Object(g.jsx)(j,{})]})},w=n(20),k=n(21),y=n(25),_=n(7),N=n.n(_),S="https://api.github.com/search",C="raw.githubusercontent.com/.../component.yaml",I="components",T="hash_to_data",D="hash_to_component_name",E="url_to_hash",A="hash_to_url",R="url_version",L="bad_hashes",P=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var r,a,o,c,i=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]&&i[2],e.next=3,caches.open(n);case 3:return a=e.sent,e.next=6,a.match(t);case 6:if(void 0===(o=e.sent)){e.next=10;break}return r&&a.add(t),e.abrupt("return",o);case 10:return e.next=12,a.add(t);case 12:return e.next=14,a.match(t);case 14:if(void 0!==(c=e.sent)){e.next=17;break}return e.abrupt("return",Promise.reject("Added object to cache, but counld not find it"));case 17:return e.abrupt("return",c);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),U=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r,a,o,c,i,s,u,d=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:1,r=d.length>2&&void 0!==d[2]?d[2]:"indexed",a=d.length>3&&void 0!==d[3]?d[3]:"desc",o=encodeURIComponent(t),c=encodeURIComponent(r),i=encodeURIComponent(a),s="https://api.github.com/search/code?q=".concat(o,"&sort=").concat(c,"&order=").concat(i,"&per_page=100&page=").concat(n),e.next=9,P(s,S,!0);case 9:return u=e.sent,e.abrupt("return",u.json());case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(e){return e.replace("https://github.com/","https://raw.githubusercontent.com/").replace("/blob/","/")};function W(){return F.apply(this,arguments)}function F(){return(F=Object(y.a)(l.a.mark((function e(){var t,n,r,a,o,c,i,s,u,d=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=d.length>0&&void 0!==d[0]?d[0]:["kubeflow","Ark-kun"],n=[],r="filename:component.yaml "+t.map((function(e){return"user:"+e})).join(" "),a=1;case 4:if(!(a<100)){e.next=33;break}return e.next=7,Object(k.a)(U(r,a));case 7:if(o=e.sent,0!==(c=o.items).length){e.next=11;break}return e.abrupt("break",33);case 11:i=Object(m.a)(c),e.prev=12,i.s();case 14:if((s=i.n()).done){e.next=20;break}return u=s.value,e.next=18,{url:B(u.html_url),hash:u.sha};case 18:e.next=14;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(12),i.e(e.t0);case 25:return e.prev=25,i.f(),e.finish(25);case 28:return e.next=30,Object(k.a)(new Promise((function(e){return setTimeout(e,6e3*1.1)})));case 30:a++,e.next=4;break;case 33:return e.abrupt("return",n);case 34:case"end":return e.stop()}}),e,null,[[12,22,25,28]])})))).apply(this,arguments)}var J=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,r,a,o,c,i,s,u,d,p,h,m,b,v,g,j,x,O,k,y,_,S,U,F,J=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=J.length>0&&void 0!==J[0]?J[0]:["kubeflow","Ark-kun"],console.debug("Starting cacheAllComponents"),n=W(t),r=N.a.createInstance({name:I,storeName:E}),a=N.a.createInstance({name:I,storeName:A}),o=N.a.createInstance({name:I,storeName:T}),c=N.a.createInstance({name:I,storeName:D}),i=N.a.createInstance({name:I,storeName:R}),s=N.a.createInstance({name:I,storeName:L}),u=!0,d=!1,e.prev=11,h=Object(w.a)(n);case 13:return e.next=15,h.next();case 15:return m=e.sent,u=m.done,e.next=19,m.value;case 19:if(b=e.sent,u){e.next=90;break}return g=(v=b).hash.toLowerCase(),j=v.url,e.next=26,s.getItem(g);case 26:if(null===(x=e.sent)){e.next=30;break}return console.debug("Skipping url ".concat(j," with hash ").concat(g,' due to error: "').concat(x,'"')),e.abrupt("continue",87);case 30:if(e.prev=30,(O=B(j)).endsWith("component.yaml")){e.next=35;break}return console.debug("Skipping url ".concat(O,' since it does not end with "component.yaml"')),e.abrupt("continue",87);case 35:return e.next=37,r.getItem(O);case 37:return null!==(k=e.sent)&&k!==g&&console.error("Component cache is broken. Stored hash for ".concat(O,": ").concat(k," != ").concat(g,".")),e.next=41,i.getItem(O);case 41:if(y=e.sent,!(null!==k&&null!==y&&Number.parseInt(y)>=1)){e.next=44;break}return e.abrupt("continue",87);case 44:return console.debug("Processing new component candidate: ".concat(O,".")),e.next=47,P(O,C);case 47:return _=e.sent,S=void 0,U=void 0,e.prev=50,e.next=53,_.blob();case 53:return F=e.sent,e.next=56,F.text();case 56:U=e.sent,S=f.a.load(U),e.next=64;break;case 60:return e.prev=60,e.t0=e.catch(50),s.setItem(g,e.t0.name+": "+e.t0.message),e.abrupt("continue",87);case 64:if(void 0!==S.implementation){e.next=67;break}return s.setItem(g,'Component lacks the "impelmentation" section.'),e.abrupt("continue",87);case 67:return e.next=69,o.setItem(g,U);case 69:return e.next=71,a.getItem(g);case 71:if(null!==e.sent){e.next=75;break}return e.next=75,a.setItem(g,O);case 75:if(!S.name){e.next=78;break}return e.next=78,c.setItem(g,S.name);case 78:return e.next=80,r.setItem(O,g);case 80:return e.next=82,i.setItem(O,1);case 82:e.next=87;break;case 84:e.prev=84,e.t1=e.catch(30),console.error("Error when processing component candidate ".concat(j," Error: ").concat(e.t1,"."));case 87:u=!0,e.next=13;break;case 90:e.next=96;break;case 92:e.prev=92,e.t2=e.catch(11),d=!0,p=e.t2;case 96:if(e.prev=96,e.prev=97,u||null==h.return){e.next=101;break}return e.next=101,h.return();case 101:if(e.prev=101,!d){e.next=104;break}throw p;case 104:return e.finish(101);case 105:return e.finish(96);case 106:console.debug("Finished cacheAllComponents");case 107:case"end":return e.stop()}}),e,null,[[11,92,96,106],[30,84],[50,60],[97,,101,105]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,r,a,o,c,i=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:["kubeflow","Ark-kun"],n=N.a.createInstance({name:I,storeName:A}),r=N.a.createInstance({name:I,storeName:T}),a=new Map,o=J(t),e.next=7,r.length();case 7:if(e.t0=e.sent,0!==e.t0){e.next=11;break}return e.next=11,o;case 11:return e.next=13,r.iterate((function(e,t,n){try{var r=f.a.load(e);a.set(t,{spec:r})}catch(o){console.error("Error when parsing cached component. Hash: ".concat(t,". Error: ").concat(o,". Component text: ").concat(e))}}));case 13:return e.next=15,n.iterate((function(e,t,n){var r=a.get(t);void 0===r?console.error("Component db corrupted: Component with url ".concat(e," and hash ").concat(t," has no content in the DB.")):r.url=e}));case 15:return c=[],a.forEach((function(e,t){void 0===e.url?console.error("Component db corrupted: Component with hash ".concat(t," has content, but no URL in the DB.")):c.push(e)})),e.abrupt("return",c);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r,a=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:["kubeflow","Ark-kun"],e.next=3,G(n);case 3:return r=e.sent,e.abrupt("return",r.filter((function(e){var n,r,a;return null!==(n=null===(r=e.spec)||void 0===r||null===(a=r.name)||void 0===a?void 0:a.toLowerCase().includes(t.toLowerCase()))&&void 0!==n&&n})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=["kubeflow","Ark-kun"],H=function(e){var t=Object(r.useState)(void 0),n=Object(i.a)(t,2),a=n[0],o=n[1],c=Object(r.useState)(!0),s=Object(i.a)(c,2),u=s[0],p=s[1],f=Object(r.useState)(!1),h=Object(i.a)(f,2),m=h[0],b=h[1],v=Object(r.useState)(""),j=Object(i.a)(v,2),x=j[0],O=j[1],w=Object(r.useState)([]),k=Object(i.a)(w,2),y=k[0],_=k[1];function N(){return(N=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M(t,V).then((function(e){b(!0),_(e)}),(function(e){b(!0),o(e.message)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=Object(g.jsx)("span",{});if(u)S=Object(g.jsx)("div",{children:"Enter search query"});else if(void 0!==a)S=Object(g.jsxs)("div",{children:["Error: ",a]});else if(u||m){if(void 0!==y){var C=y.map((function(e){var t;return Object(g.jsx)("div",{title:e.url,className:"react-flow__node react-flow__node-multihandle",draggable:!0,onDragStart:function(t){return function(e,t){e.dataTransfer.setData("application/reactflow",JSON.stringify(t)),e.dataTransfer.effectAllowed="move"}(t,{task:{componentRef:e}})},children:null===(t=e.spec)||void 0===t?void 0:t.name},e.url)}));S=Object(g.jsx)(g.Fragment,{children:C})}}else S=Object(g.jsx)("div",{children:"Searching..."});return Object(g.jsxs)("div",{className:"nodeList",children:[Object(g.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==x&&(p(!1),function(e){N.apply(this,arguments)}(x))},children:[Object(g.jsx)("input",{placeholder:"XGBoost",onChange:function(e){O(e.target.value)}}),Object(g.jsx)("input",{type:"submit"})]}),Object(g.jsx)("div",{children:S})]})},q=function(e){var t=e.data,n=[];for(var r in t.handles)for(var a=t.handles[r],o=a.ids.length,c=0;c<o;c++){var i=a.ids[c],u=String(100*((c+1)/(o+1)))+"%",l=r===s.e.Top||r===s.e.Bottom?{left:u}:{top:u};n.push(Object(g.jsx)(s.c,{type:a.type,position:r,id:i,style:l,isConnectable:!0},i))}return Object(g.jsxs)(g.Fragment,{children:[t.label,n]})},K=Object(r.memo)(q),X=s.e.Top,Y=s.e.Bottom;function $(e,t,n,r){for(var a=[],o=e.length,c=0;c<o;c++){var i,u,l=e[c],d=r+l.name,p=String(100*((c+1)/(o+1)))+"%",f=n===s.e.Top||n===s.e.Bottom?{left:p}:{top:p},h=null!==(i=null===(u=l.type)||void 0===u?void 0:u.toString())&&void 0!==i?i:"Any",m=h;a.push(Object(g.jsx)(s.c,{type:t,position:n,id:d,style:f,isConnectable:!0,title:l.name+" : "+h,className:"handle_"+m},d))}return a}var z=function(e){var t,n,r,a=e.data.componentRef.spec;if(void 0===a)return Object(g.jsx)(g.Fragment,{});var o=null!==(t=a.name)&&void 0!==t?t:"<component>",c=$(null!==(n=a.inputs)&&void 0!==n?n:[],"target",X,"input_"),i=$(null!==(r=a.outputs)&&void 0!==r?r:[],"source",Y,"output_"),s=c.concat(i);return Object(g.jsxs)(g.Fragment,{children:[o,s]})},Q=Object(r.memo)(z),Z=(n(59),{multihandle:K,task:Q}),ee=[{id:"1",type:"input",data:{label:"input node"},position:{x:250,y:10}}],te=function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"},ne=0,re=function(){var e=Object(r.useState)(),t=Object(i.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(ee),c=Object(i.a)(o,2),u=c[0],l=c[1];return Object(g.jsx)("div",{className:"dndflow",children:Object(g.jsxs)(s.f,{children:[Object(g.jsx)("div",{className:"reactflow-wrapper",children:Object(g.jsxs)(s.h,{elements:u,onConnect:function(e){return l((function(t){return Object(s.g)(e,t)}))},onElementsRemove:function(e){return l((function(t){return Object(s.i)(e,t)}))},onEdgeUpdateStart:function(e,t){return console.log("start update",t)},onEdgeUpdateEnd:function(e,t){return console.log("end update",t)},onEdgeUpdate:function(e,t){return l((function(n){return Object(s.j)(e,t,n)}))},onLoad:function(e){return a(e)},onDrop:function(e){if(e.preventDefault(),n){var t=e.dataTransfer.getData("application/reactflow");if(""===t)return;var r=JSON.parse(t),a=Object.keys(r)[0],o=r[a],c=n.project({x:e.clientX,y:e.clientY-40}),i={id:"dndnode_".concat(ne++),type:a,position:c,data:o};l((function(e){return e.concat(i)}))}},onDragOver:te,nodeTypes:Z,deleteKeyCode:"Delete",multiSelectionKeyCode:"Control",snapToGrid:!0,snapGrid:[10,10],children:[Object(g.jsx)(s.d,{}),Object(g.jsx)(s.b,{}),Object(g.jsx)(s.a,{gap:10})]})}),Object(g.jsx)(O,{}),Object(g.jsx)(H,{})]})})};var ae=function(){return Object(g.jsx)("div",{className:"App",style:{width:"100%",height:"100%"},children:Object(g.jsx)(re,{})})},oe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ce(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,61)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))};c.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(ae,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/pipeline-editor",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/pipeline-editor","/service-worker.js");oe?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ce(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):ce(t,e)}))}}(),ie()}},[[60,1,2]]]);
//# sourceMappingURL=main.2e2752a7.chunk.js.map