(this["webpackJsonppipeline-editor"]=this["webpackJsonppipeline-editor"]||[]).push([[0],{33:function(e,t,n){},34:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(12),c=n.n(o),i=(n(33),n(34),n(2)),s=n.n(i),u=n(5),p=n(3),l=n(4),d=n(8),f=n(7),m=n(27),h=n(1),b=l.f.Top,v=l.f.Bottom;function j(e,t,n,r){for(var a=[],o=e.length,c=0;c<o;c++){var i,s,u=e[c],p=r+u.name,d=String(100*((c+1)/(o+1)))+"%",f=n===l.f.Top||n===l.f.Bottom?{left:d}:{top:d},m=null!==(i=null===(s=u.type)||void 0===s?void 0:s.toString())&&void 0!==i?i:"Any",b=m;a.push(Object(h.jsx)(l.d,{type:t,position:n,id:p,style:f,isConnectable:!0,title:u.name+" : "+m,className:"handle_"+b},p))}return a}var g=function(e){var t,n,r,a=e.data.componentRef.spec;if(void 0===a)return Object(h.jsx)(h.Fragment,{});var o=null!==(t=a.name)&&void 0!==t?t:"<component>",c=j(null!==(n=a.inputs)&&void 0!==n?n:[],"target",b,"input_"),i=j(null!==(r=a.outputs)&&void 0!==r?r:[],"source",v,"output_"),s=c.concat(i);return Object(h.jsxs)(h.Fragment,{children:[o,s]})},x=["children","initialGraphSpec"],O={task:Object(r.memo)(g)},k=function(e){var t=e.children,n=e.initialGraphSpec,a=void 0===n?{tasks:{}}:n,o=Object(m.a)(e,x),c=Object(r.useState)(),i=Object(p.a)(c,2),s=i[0],u=i[1],b=Object(r.useState)(a),v=Object(p.a)(b,2),j=v[0],g=v[1],k=j,y=Object.entries(k.tasks).map((function(e){var t=Object(p.a)(e,2),n=t[0],r=t[1],a={x:0,y:0};if(void 0!==r.annotations)try{var o=r.annotations["editor.position"],c=JSON.parse(o);a={x:c.x,y:c.y}}catch(i){}return{id:n,data:r,position:a,type:"task"}})),w=Object.entries(k.tasks).flatMap((function(e){var t,n=Object(p.a)(e,2),r=n[0],a=n[1];return Object.entries(null!==(t=a.arguments)&&void 0!==t?t:{}).flatMap((function(e){var t=Object(p.a)(e,2),n=t[0],a=t[1];if("string"!==typeof a&&"taskOutput"in a){var o=a.taskOutput;return[{id:"".concat(o.taskId,"_").concat(o.outputName,"-").concat(r,"_").concat(n),source:o.taskId,sourceHandle:"output_".concat(o.outputName),target:r,targetHandle:"input_".concat(n),arrowHeadType:l.a.ArrowClosed}]}return[]}))})),_=function(e){k=e,g(e)},S=function(e,t,n){var r=k.tasks[e],a=r.arguments,o=Object(f.a)({},a);void 0===n?delete o[t]:o[t]=n;var c=Object(f.a)(Object(f.a)({},k),{},{tasks:Object(f.a)({},k.tasks)});c.tasks[e]=Object(f.a)(Object(f.a)({},r),{},{arguments:o}),_(c)},C=function(e,t){return S(e,t,void 0)},A=function(e){if(null!==e.source&&null!==e.sourceHandle&&void 0!==e.sourceHandle&&null!==e.target&&null!==e.targetHandle&&void 0!==e.targetHandle){var t=e.targetHandle.replace(/^input_/,""),n=e.sourceHandle.replace(/^output_/,""),r={taskOutput:{taskId:e.source,outputName:n}};S(e.target,t,r)}},T=function(e){if(null!==e.sourceHandle&&void 0!==e.sourceHandle&&null!==e.targetHandle&&void 0!==e.targetHandle){var t=e.targetHandle.replace(/^input_/,"");C(e.target,t)}},I=function(e){for(var t=e.id,n=0,r=Object.entries(k.tasks);n<r.length;n++)for(var a=Object(p.a)(r[n],2),o=a[0],c=a[1],i=0,s=Object.entries(null!==(u=c.arguments)&&void 0!==u?u:{});i<s.length;i++){var u,l=Object(p.a)(s[i],2),d=l[0],m=l[1];"string"!==typeof m&&"taskOutput"in m&&m.taskOutput.taskId===t&&C(o,d)}var h=Object(f.a)(Object(f.a)({},k),{},{tasks:Object(f.a)({},k.tasks)});delete h.tasks[t],_(h)},N=y.concat(w);return Object(h.jsx)(l.h,Object(f.a)(Object(f.a)({},o),{},{elements:N,nodeTypes:O,onConnect:function(e){A(e)},onDragOver:function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"},onDrop:function(e){if(e.preventDefault(),s){var t=e.dataTransfer.getData("application/reactflow");if(""===t)return;var n=JSON.parse(t),r=Object.keys(n)[0],a=n[r],o=s.project({x:e.clientX,y:e.clientY-40});if("task"===r){var c=a,i=Object(f.a)({},c.annotations),u={x:o.x,y:o.y};i["editor.position"]=JSON.stringify(u),c.annotations=i;var p=function(e,t){for(var n,r,a,o=null!==(n=null===t||void 0===t||null===(r=t.componentRef)||void 0===r||null===(a=r.spec)||void 0===a?void 0:a.name)&&void 0!==n?n:e,c=o,i=0,s=new Set(Object.keys(k.tasks));s.has(c);)c=o+" "+(++i).toString();return c}(r,a);(k=Object(f.a)(Object(f.a)({},k),{},{tasks:Object(f.a)({},k.tasks)})).tasks[p]=c,_(k)}}},onEdgeUpdate:function(e,t){T(e),A(t)},onElementsRemove:function(e){var t,n=Object(d.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;Object(l.i)(r)&&T(r)}}catch(i){n.e(i)}finally{n.f()}var a,o=Object(d.a)(e);try{for(o.s();!(a=o.n()).done;){var c=a.value;Object(l.j)(c)&&I(c)}}catch(i){o.e(i)}finally{o.f()}},onLoad:function(e){return u(e)},children:t}))},y=n(22),w=n(23),_=n(28),S=n(13),C=n.n(S),A=n(9),T=n.n(A),I="https://api.github.com/search",N="raw.githubusercontent.com/.../component.yaml",E="components",P="hash_to_data",R="hash_to_component_name",D="url_to_hash",U="hash_to_url",L="url_version",G="bad_hashes",B=function(){var e=Object(u.a)(s.a.mark((function e(t,n){var r,a,o,c,i=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]&&i[2],e.next=3,caches.open(n);case 3:return a=e.sent,e.next=6,a.match(t);case 6:if(void 0===(o=e.sent)){e.next=10;break}return r&&a.add(t),e.abrupt("return",o);case 10:return e.next=12,a.add(t);case 12:return e.next=14,a.match(t);case 14:if(void 0!==(c=e.sent)){e.next=17;break}return e.abrupt("return",Promise.reject("Added object to cache, but counld not find it"));case 17:return e.abrupt("return",c);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,a,o,c,i,u,p,l=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:1,r=l.length>2&&void 0!==l[2]?l[2]:"indexed",a=l.length>3&&void 0!==l[3]?l[3]:"desc",o=encodeURIComponent(t),c=encodeURIComponent(r),i=encodeURIComponent(a),u="https://api.github.com/search/code?q=".concat(o,"&sort=").concat(c,"&order=").concat(i,"&per_page=100&page=").concat(n),e.next=9,B(u,I,!0);case 9:return p=e.sent,e.abrupt("return",p.json());case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(e){return e.replace("https://github.com/","https://raw.githubusercontent.com/").replace("/blob/","/")};function V(){return F.apply(this,arguments)}function F(){return(F=Object(_.a)(s.a.mark((function e(){var t,n,r,a,o,c,i,u,p,l=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=l.length>0&&void 0!==l[0]?l[0]:["kubeflow","Ark-kun"],n=[],r="filename:component.yaml "+t.map((function(e){return"user:"+e})).join(" "),a=1;case 4:if(!(a<100)){e.next=33;break}return e.next=7,Object(w.a)(W(r,a));case 7:if(o=e.sent,0!==(c=o.items).length){e.next=11;break}return e.abrupt("break",33);case 11:i=Object(d.a)(c),e.prev=12,i.s();case 14:if((u=i.n()).done){e.next=20;break}return p=u.value,e.next=18,{url:H(p.html_url),hash:p.sha};case 18:e.next=14;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(12),i.e(e.t0);case 25:return e.prev=25,i.f(),e.finish(25);case 28:return e.next=30,Object(w.a)(new Promise((function(e){return setTimeout(e,6e3*1.1)})));case 30:a++,e.next=4;break;case 33:return e.abrupt("return",n);case 34:case"end":return e.stop()}}),e,null,[[12,22,25,28]])})))).apply(this,arguments)}var J=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t,N);case 2:return n=e.sent,e.next=5,n.blob();case 5:return r=e.sent,e.next=8,r.text();case 8:return a=e.sent,o=C.a.load(a),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,r,a,o,c,i,u,p,l,d,f,m,h,b,v,j,g,x,O,k,w,_,S,A,I=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=I.length>0&&void 0!==I[0]?I[0]:["kubeflow","Ark-kun"],console.debug("Starting cacheAllComponents"),n=V(t),r=T.a.createInstance({name:E,storeName:D}),a=T.a.createInstance({name:E,storeName:U}),o=T.a.createInstance({name:E,storeName:P}),c=T.a.createInstance({name:E,storeName:R}),i=T.a.createInstance({name:E,storeName:L}),u=T.a.createInstance({name:E,storeName:G}),p=!0,l=!1,e.prev=11,f=Object(y.a)(n);case 13:return e.next=15,f.next();case 15:return m=e.sent,p=m.done,e.next=19,m.value;case 19:if(h=e.sent,p){e.next=90;break}return v=(b=h).hash.toLowerCase(),j=b.url,e.next=26,u.getItem(v);case 26:if(null===(g=e.sent)){e.next=30;break}return console.debug("Skipping url ".concat(j," with hash ").concat(v,' due to error: "').concat(g,'"')),e.abrupt("continue",87);case 30:if(e.prev=30,(x=H(j)).endsWith("component.yaml")){e.next=35;break}return console.debug("Skipping url ".concat(x,' since it does not end with "component.yaml"')),e.abrupt("continue",87);case 35:return e.next=37,r.getItem(x);case 37:return null!==(O=e.sent)&&O!==v&&console.error("Component cache is broken. Stored hash for ".concat(x,": ").concat(O," != ").concat(v,".")),e.next=41,i.getItem(x);case 41:if(k=e.sent,!(null!==O&&null!==k&&Number.parseInt(k)>=1)){e.next=44;break}return e.abrupt("continue",87);case 44:return console.debug("Processing new component candidate: ".concat(x,".")),e.next=47,B(x,N);case 47:return w=e.sent,_=void 0,S=void 0,e.prev=50,e.next=53,w.blob();case 53:return A=e.sent,e.next=56,A.text();case 56:S=e.sent,_=C.a.load(S),e.next=64;break;case 60:return e.prev=60,e.t0=e.catch(50),u.setItem(v,e.t0.name+": "+e.t0.message),e.abrupt("continue",87);case 64:if(void 0!==_.implementation){e.next=67;break}return u.setItem(v,'Component lacks the "impelmentation" section.'),e.abrupt("continue",87);case 67:return e.next=69,o.setItem(v,S);case 69:return e.next=71,a.getItem(v);case 71:if(null!==e.sent){e.next=75;break}return e.next=75,a.setItem(v,x);case 75:if(!_.name){e.next=78;break}return e.next=78,c.setItem(v,_.name);case 78:return e.next=80,r.setItem(x,v);case 80:return e.next=82,i.setItem(x,1);case 82:e.next=87;break;case 84:e.prev=84,e.t1=e.catch(30),console.error("Error when processing component candidate ".concat(j," Error: ").concat(e.t1,"."));case 87:p=!0,e.next=13;break;case 90:e.next=96;break;case 92:e.prev=92,e.t2=e.catch(11),l=!0,d=e.t2;case 96:if(e.prev=96,e.prev=97,p||null==f.return){e.next=101;break}return e.next=101,f.return();case 101:if(e.prev=101,!l){e.next=104;break}throw d;case 104:return e.finish(101);case 105:return e.finish(96);case 106:console.debug("Finished cacheAllComponents");case 107:case"end":return e.stop()}}),e,null,[[11,92,96,106],[30,84],[50,60],[97,,101,105]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,r,a,o,c,i=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:["kubeflow","Ark-kun"],n=T.a.createInstance({name:E,storeName:U}),r=T.a.createInstance({name:E,storeName:P}),a=new Map,o=M(t),e.next=7,r.length();case 7:if(e.t0=e.sent,0!==e.t0){e.next=11;break}return e.next=11,o;case 11:return e.next=13,r.iterate((function(e,t,n){try{var r=C.a.load(e);a.set(t,{spec:r})}catch(o){console.error("Error when parsing cached component. Hash: ".concat(t,". Error: ").concat(o,". Component text: ").concat(e))}}));case 13:return e.next=15,n.iterate((function(e,t,n){var r=a.get(t);void 0===r?console.error("Component db corrupted: Component with url ".concat(e," and hash ").concat(t," has no content in the DB.")):r.url=e}));case 15:return c=[],a.forEach((function(e,t){void 0===e.url?console.error("Component db corrupted: Component with hash ".concat(t," has content, but no URL in the DB.")):c.push(e)})),e.abrupt("return",c);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,a=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:["kubeflow","Ark-kun"],e.next=3,X(n);case 3:return r=e.sent,e.abrupt("return",r.filter((function(e){var n,r,a;return null!==(n=null===(r=e.spec)||void 0===r||null===(a=r.name)||void 0===a?void 0:a.toLowerCase().includes(t.toLowerCase()))&&void 0!==n&&n})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(e){var t=e.componentUrl,n=Object(r.useState)(void 0),a=Object(p.a)(n,2),o=a[0],c=a[1];return Object(r.useEffect)((function(){J(t).then(c)}),[t]),void 0===o?Object(h.jsx)("span",{children:"Loading..."}):Object(h.jsx)("div",{className:"react-flow__node react-flow__node-task",draggable:!0,onDragStart:function(e){return function(e,t){e.dataTransfer.setData("application/reactflow",JSON.stringify(t)),e.dataTransfer.effectAllowed="move"}(e,{task:{componentRef:{url:t,spec:o}}})},children:o.name})},z=function(e){var t=e.componentGroups;return Object(h.jsx)(h.Fragment,{children:Array.from(t).map((function(e,t){var n=e.category,r=e.componentUrls;return Object(h.jsxs)("details",{open:0===t,style:{border:"1px solid #aaa",borderRadius:"4px"},children:[Object(h.jsx)("summary",{style:{borderWidth:"1px",padding:"8px"},children:Object(h.jsx)("strong",{children:n})}),r.map((function(e){return Object(h.jsx)(K,{componentUrl:e},e)}))]},n)}))})},$=function(e){var t=e.componentGroups;return Object(h.jsxs)("details",{open:!0,children:[Object(h.jsx)("summary",{style:{border:"1px solid #aaa",padding:"5px",borderRadius:"8px"},children:Object(h.jsx)("strong",{children:"Component library"})}),Object(h.jsx)("div",{style:{paddingLeft:"10px"},children:Object(h.jsx)(z,{componentGroups:t})})]})},Y=["kubeflow","Ark-kun"],Q=function(e){var t=Object(r.useState)(void 0),n=Object(p.a)(t,2),a=n[0],o=n[1],c=Object(r.useState)(!0),i=Object(p.a)(c,2),l=i[0],d=i[1],f=Object(r.useState)(!1),m=Object(p.a)(f,2),b=m[0],v=m[1],j=Object(r.useState)(""),g=Object(p.a)(j,2),x=g[0],O=g[1],k=Object(r.useState)([]),y=Object(p.a)(k,2),w=y[0],_=y[1];function S(){return(S=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:q(t,Y).then((function(e){v(!0),_(e)}),(function(e){v(!0),o(e.message)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=Object(h.jsx)("span",{});if(l)C=Object(h.jsx)("div",{children:"Enter search query"});else if(void 0!==a)C=Object(h.jsxs)("div",{children:["Error: ",a]});else if(l||b){if(void 0!==w){var A=w.map((function(e){var t;return Object(h.jsx)("div",{title:e.url,className:"react-flow__node react-flow__node-multihandle",draggable:!0,onDragStart:function(t){return function(e,t){e.dataTransfer.setData("application/reactflow",JSON.stringify(t)),e.dataTransfer.effectAllowed="move"}(t,{task:{componentRef:e}})},children:null===(t=e.spec)||void 0===t?void 0:t.name},e.url)}));C=Object(h.jsx)(h.Fragment,{children:A})}}else C=Object(h.jsx)("div",{children:"Searching..."});return Object(h.jsxs)("div",{className:"nodeList",children:[Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==x&&(d(!1),function(e){S.apply(this,arguments)}(x))},children:[Object(h.jsx)("input",{type:"search",placeholder:"XGBoost",onChange:function(e){O(e.target.value)}}),Object(h.jsx)("input",{type:"submit"})]}),Object(h.jsx)("div",{children:C})]})},Z=function(e){return{"editor.position":JSON.stringify({x:e.__rf.position.x,y:e.__rf.position.y,width:e.__rf.width,height:e.__rf.height})}},ee=function(e,t){return e.__rf.position.x-t.__rf.position.x},te=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Component",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=e.filter((function(e){return"input"===e.type})).sort(ee),s=e.filter((function(e){return"output"===e.type})).sort(ee),u=e.filter((function(e){return"task"===e.type})).map((function(e){return e})),p=i.map((function(e){var t={name:e.id};return o&&(t.annotations=Z(e)),t})),l=s.map((function(e){var t={name:e.id};return o&&(t.annotations=t.annotations=Z(e)),t})),f=u.reduce((function(e,t){var n=t.data;return void 0!==n&&(n=Object.assign({},n),c||(n.componentRef=Object.assign({},n.componentRef),delete n.componentRef.spec),o&&(n.annotations=Z(t)),e[t.id]=n),e}),{}),m={},h=Object(d.a)(t);try{for(h.s();!(n=h.n()).done;){var b,v,j=n.value,g=j.source,x=null===(b=j.sourceHandle)||void 0===b?void 0:b.replace(/^output_/,""),O=j.target,k=null===(v=j.targetHandle)||void 0===v?void 0:v.replace(/^input_/,"");if(x&&void 0===f[g])console.error("Task node is connected to unknown node type:",j);else{var y=x?{taskOutput:{taskId:g,outputName:x}}:{graphInput:{inputName:g}};if(k){var w=f[O];if(void 0===w){console.error("Task node is connected to unknown node type:",j);continue}void 0===w.arguments&&(w.arguments={}),w.arguments[k]=y}else{var _=y;_?m[O]=_:console.error("Graph outputs can only come from task outputs.")}}}}catch(C){h.e(C)}finally{h.f()}var S={name:r,inputs:p,outputs:l,metadata:{annotations:a},implementation:{graph:{tasks:f,outputValues:m}}};return 0===p.length&&delete S.inputs,0===l.length&&delete S.outputs,0===Object.keys(a).length&&delete S.metadata,0===Object.keys(m).length&&delete S.implementation.graph.outputValues,S},ne=function(e){var t,n=e.pipelineName,r=Object(l.k)((function(e){return e.nodes})),a=Object(l.k)((function(e){return e.edges}));n=null!==(t=n)&&void 0!==t?t:"Pipeline";var o=te(r,a,n),c=C.a.dump(o,{lineWidth:1e4}),i=new Blob([c],{type:"text/yaml"}),s=Object(h.jsx)("a",{href:URL.createObjectURL(i),download:"component.yaml",children:"component.yaml"});return Object(h.jsxs)("details",{children:[Object(h.jsxs)("summary",{children:["Graph ",s]}),Object(h.jsx)("pre",{style:{overflow:"auto"},children:c})]})};var re=function(e){if("string"===typeof e){if(["integer"].includes(e.toLowerCase()))return"INT";if(["float","double"].includes(e.toLowerCase()))return"DOUBLE"}return"STRING"},ae=function(e){return{type:re(e)}},oe=function(e,t){var n,r;if(!("container"in e.implementation))throw Error("Nested graph components are not supported yet");var a=e.implementation.container,o=function(e,t){var n,r;if(!("container"in e.implementation))throw Error("resolveCommandLine only supports container components");var a=e.implementation.container,o=new Set,c=new Set,i=function e(n){if("string"==typeof n)return[n];if("inputValue"in n){var r=n.inputValue;return o.add(r),["{{$.inputs.parameters['".concat(r,"']}}")]}if("inputPath"in n){var a=n.inputPath;return c.add(a),["{{$.inputs.artifacts['".concat(a,"'].path}}")]}if("outputPath"in n){var i=n.outputPath;return["{{$.outputs.artifacts['".concat(i,"'].path}}")]}if("if"in n){var s=[n.if.cond,n.if.then,n.if.else],u=s[0],p=s[1],l=s[2],d=!1;if("string"===typeof u)d="true"===u.toLowerCase();else if("boolean"===typeof u)d=u;else if("isPresent"in u)d=u.isPresent in t;else{if(!("inputValue"in u))throw Error("Unexpected contition kind: "+u);var f=u.inputValue;if(f in t){var m=t[f];if("string"!==typeof m)throw Error("Using runtime conditions in component command line placeholders is not supported yet.");d="true"===m.toLowerCase()}else d=!1}var h=d?p:l;return void 0===h?[]:h.flatMap(e)}if("concat"in n)return n.concat.flatMap(e);throw Error("Unknown kind of command-line argument: ".concat(n))};return{command:null===(n=a.command)||void 0===n?void 0:n.flatMap(i),args:null===(r=a.args)||void 0===r?void 0:r.flatMap(i),inputsConsumedAsValue:o,inputsConsumedAsPath:c}}(e,t),c={container:{image:a.image,command:o.command,args:o.args}},i=new Map((null!==(n=e.inputs)&&void 0!==n?n:[]).map((function(e){return[e.name,e]}))),s={inputDefinitions:{parameters:Object.fromEntries(Array.from(o.inputsConsumedAsValue.values()).map((function(e){var t;return[e,ae(null===(t=i.get(e))||void 0===t?void 0:t.type)]}))),artifacts:Object.fromEntries(Array.from(o.inputsConsumedAsPath.values()).map((function(e){var t;return[e,(null===(t=i.get(e))||void 0===t||t.type,{artifactType:{schemaTitle:"system.Artifact"}})]})))},outputDefinitions:{parameters:{},artifacts:Object.fromEntries((null!==(r=e.outputs)&&void 0!==r?r:[]).map((function(e){return[e.name,(e.type,{artifactType:{schemaTitle:"system.Artifact"}})]})))},executorLabel:"<set later>"};return{vertexTaskSpec:{taskInfo:{name:"<set later>"},inputs:{parameters:Object.fromEntries(Array.from(o.inputsConsumedAsValue.values()).map((function(e){return[e,function(e){var n=t[e];if(void 0===n){var r=i.get(e);if(void 0===r)throw Error("Cannot happen: vertexTaskParameterArguments - inputMap.get(".concat(e,") === undefined"));if(void 0!==r.default)n=r.default;else{if(!0!==r.optional)throw Error('Argument was not provided for required input "'.concat(e,'"'));console.error('Input "'.concat(e,"\" is optional, but command-line still uses it when when it's not present.")),n=""}}if("string"===typeof n)return{runtimeValue:{constantValue:{stringValue:n}}};if("graphInput"in n)return{componentInputParameter:n.graphInput.inputName};if("taskOutput"in n)return{taskOutputParameter:{producerTask:n.taskOutput.taskId,outputParameterKey:n.taskOutput.outputName}};throw Error('Unknown kind of task argument: "'.concat(n,'"'))}(e)]}))),artifacts:Object.fromEntries(Array.from(o.inputsConsumedAsPath.values()).map((function(e){return[e,function(e){var n=t[e];if(void 0===n){var r=i.get(e);if(void 0===r)throw Error("Cannot happen: vertexTaskParameterArguments - inputMap.get(".concat(e,") === undefined"));if(void 0!==r.default)n=r.default;else{if(!0!==r.optional)throw Error('Argument was not provided for required input "'.concat(e,'"'));console.error('Input "'.concat(e,"\" is optional, but command-line still uses it when when it's not present.")),n=""}}if("string"===typeof n)throw Error("Constant arguments for artifact inputs are not supported yet.");if("graphInput"in n)return{componentInputArtifact:n.graphInput.inputName};if("taskOutput"in n)return{taskOutputArtifact:{producerTask:n.taskOutput.taskId,outputArtifactKey:n.taskOutput.outputName}};throw Error('Unknown kind of task argument: "'.concat(n,'"'))}(e)]})))},cachingOptions:{enableCache:!0},componentRef:{name:"<set later>"}},vertexComponentSpec:s,vertexExecutorSpec:c}},ce=function(e){var t,n;if(!("graph"in e.implementation))throw Error("Only graph components are supported for now");for(var r={parameters:Object.fromEntries((null!==(t=e.inputs)&&void 0!==t?t:[]).map((function(e){return[e.name,ae(e.type)]})))},a=e.implementation.graph,o={},c={},i={},s=0,u=Object.entries(a.tasks);s<u.length;s++){var l,d=Object(p.a)(u[s],2),f=d[0],m=d[1];if(void 0===m.componentRef.spec)throw Error('Task "'.concat(f,'" does not have taskSpec.componentRef.spec.'));var h=oe(m.componentRef.spec,null!==(l=m.arguments)&&void 0!==l?l:{}),b=h.vertexTaskSpec,v=h.vertexComponentSpec,j=h.vertexExecutorSpec,g=f+"_executor",x=f+"_component",O=f;o[g]=j,v.executorLabel=g,c[x]=v,b.componentRef.name=x,b.taskInfo.name=O,i[O]=b}var k,y=null!==(n=e.name)&&void 0!==n?n:"pipeline";return{pipelineInfo:{name:(k=y,k.toLowerCase().replace(/\W/,"-"))},sdkVersion:"Cloud-Pipelines",schemaVersion:"2.0.0",deploymentSpec:{executors:o},components:c,root:{inputDefinitions:r,dag:{tasks:i}}}},ie=function(e,t,n){var r={};if(void 0!==n)for(var a=0,o=Array.from(n.entries());a<o.length;a++){var c=Object(p.a)(o[a],2),i=c[0],s=c[1];r[i]={stringValue:s}}return{runtimeConfig:{parameters:r,gcsOutputDirectory:t},pipelineSpec:ce(e)}},se="640001104961-2m8hs192tmd9f9nssbr5thr5o3uhmita.apps.googleusercontent.com",ue="AIzaSyCDPTffgYGXoit-jKsj1_1WWbSxvU7aEdQ",pe=["us-central1","europe-west4","asia-east1"],le=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,a,o=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],r=o.length>2&&void 0!==o[2]?o[2]:ue,a=o.length>3&&void 0!==o[3]?o[3]:se,e.abrupt("return",new Promise((function(e,o){gapi.client.setApiKey(r),gapi.auth.authorize({client_id:a,scope:t,immediate:n},(function(t){void 0===t?(console.error("authorizeGoogleCloudClient failed"),o("gapi.auth.authorize result is undefined")):t.error?(console.error("authorizeGoogleCloudClient failed",t.error),o(t.error)):e(t)}))})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le(t,!1);case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]&&n[0],e.next=3,de(["https://www.googleapis.com/auth/cloud-platform"]);case 3:return e.next=5,gapi.client.request({path:"https://cloudresourcemanager.googleapis.com/v1/projects/"});case 5:return t=e.sent,e.abrupt("return",t.result);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,a,o=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"us-central1",r=o.length>2?o[2]:void 0,e.next=4,de(["https://www.googleapis.com/auth/cloud-platform"]);case 4:return e.next=6,gapi.client.request({path:"https://".concat(n,"-aiplatform.googleapis.com/v1beta1/projects/").concat(t,"/locations/").concat(n,"/pipelineJobs"),method:"POST",body:JSON.stringify(r)});case 6:return a=e.sent,e.abrupt("return",a.result);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=function(){var e=Object(r.useState)([]),t=Object(p.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(""),c=Object(p.a)(o,2),i=c[0],d=c[1],f=Object(r.useState)("us-central1"),m=Object(p.a)(f,2),b=m[0],v=m[1],j=Object(r.useState)(""),g=Object(p.a)(j,2),x=g[0],O=g[1],k=Object(r.useState)(""),y=Object(p.a)(k,2),w=y[0],_=y[1],S=Object(r.useState)(""),C=Object(p.a)(S,2),A=C[0],T=C[1],I=Object(l.k)((function(e){return e.nodes})),N=Object(l.k)((function(e){return e.edges})),E=void 0,P=void 0;try{var R=te(I,N,"Pipeline",void 0,!1,!0),D=ie(R,w);E=JSON.stringify(D,void 0,4),P=URL.createObjectURL(new Blob([E],{type:"application/json"}))}catch(U){}return Object(h.jsxs)("form",{onSubmit:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,a,o,c,u,p,l,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,"Pipeline",n=te(I,N,"Pipeline",void 0,!1,!0),r=ie(n,w),e.next=7,me(i,b,r);case 7:a=e.sent,o=a.name,c=o.split("/").slice(-1)[0],u="https://console.cloud.google.com/vertex-ai/locations/".concat(b,"/pipelines/runs/").concat(c,"?project=").concat(i),T(u),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(1),console.error(e.t0),T(""),O(null!==(p=null===e.t0||void 0===e.t0||null===(l=e.t0.result)||void 0===l||null===(d=l.error)||void 0===d?void 0:d.message)&&void 0!==p?p:"Error");case 19:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"project",children:"Project: "}),Object(h.jsx)("input",{id:"project",required:!0,type:"text",list:"projects",placeholder:"<my-project-id>",value:i,onChange:function(e){return d(e.target.value)}}),Object(h.jsx)("datalist",{id:"projects",children:n.map((function(e){return Object(h.jsx)("option",{value:e},e)}))}),Object(h.jsx)("button",{type:"button",onClick:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,o,c,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe();case 3:n=e.sent,r=n.projects.map((function(e){return e.projectId})),a(r),O(""),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),O(null!==(o=null===e.t0||void 0===e.t0||null===(c=e.t0.result)||void 0===c||null===(i=c.error)||void 0===i?void 0:i.message)&&void 0!==o?o:"Error");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),children:"\u27f3"})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"region",children:"Region: "}),Object(h.jsx)("input",{id:"region",required:!0,type:"text",list:"regions",value:b,onChange:function(e){return v(e.target.value)}}),Object(h.jsx)("datalist",{id:"regions",children:pe.map((function(e){return Object(h.jsx)("option",{value:e},e)}))})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"region",children:"GCS dir: "}),Object(h.jsx)("input",{id:"gcsOutputDirectory",required:!0,type:"text",value:w,onChange:function(e){return _(e.target.value)}})]}),Object(h.jsx)("input",{type:"submit",value:"Submit pipeline job"}),""!==A&&Object(h.jsx)("div",{children:Object(h.jsx)("a",{href:A,target:"_blank",rel:"noreferrer",children:"Job"})}),void 0!==P&&Object(h.jsxs)("div",{children:["Download ",Object(h.jsx)("a",{href:P,download:"vertex_pipeline_job.json",children:"vertex_pipeline_job.json"})]}),""!==x&&Object(h.jsxs)("div",{children:["Error: ",x]})]})},be=function(e){var t,n=e.pipelineName,r=Object(l.k)((function(e){return e.nodes})),a=Object(l.k)((function(e){return e.edges}));n=null!==(t=n)&&void 0!==t?t:"Pipeline";var o="";try{var c=te(r,a,n,void 0,!1,!0),i=ce(c);o=JSON.stringify(i,void 0,2)}catch(p){o=String(p)}var s=new Blob([o],{type:"application/json"}),u=URL.createObjectURL(s);return Object(h.jsxs)("details",{open:!0,children:[Object(h.jsxs)("summary",{children:["Cloud IR ",Object(h.jsx)("a",{href:u,download:"vertex_pipeline_spec.json",children:"vertex_pipeline_spec.json"})]}),Object(h.jsx)("pre",{style:{overflow:"auto"},children:o})]})},ve=function(e,t){e.dataTransfer.setData("application/reactflow",JSON.stringify(t)),e.dataTransfer.effectAllowed="move"},je=[{category:"Quick start",componentUrls:["https://raw.githubusercontent.com/Ark-kun/pipelines/2463ecda532517462590d75e6e14a8af6b55869a/components/datasets/Chicago_Taxi_Trips/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipelines/567c04c51ff00a1ee525b3458425b17adbe3df61/components/XGBoost/Train/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipelines/567c04c51ff00a1ee525b3458425b17adbe3df61/components/XGBoost/Predict/component.yaml"]},{category:"Datasets",componentUrls:["https://raw.githubusercontent.com/Ark-kun/pipelines/2463ecda532517462590d75e6e14a8af6b55869a/components/datasets/Chicago_Taxi_Trips/component.yaml"]},{category:"Data manipulation",componentUrls:["https://raw.githubusercontent.com/Ark-kun/pipelines/6162d55998b176b50267d351241100bb0ee715bc/components/pandas/Transform_DataFrame/in_CSV_format/component.yaml"]},{category:"Upload/Download",componentUrls:["https://raw.githubusercontent.com/Ark-kun/pipelines/54ac9a6a7173aecbbb30a043b2077e790cac6953/components/web/Download/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipelines/2dac60c400ad8767b452649d08f328dfaf230f96/components/google-cloud/storage/download/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipelines/2dac60c400ad8767b452649d08f328dfaf230f96/components/google-cloud/storage/upload_to_unique_uri/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipelines/2dac60c400ad8767b452649d08f328dfaf230f96/components/google-cloud/storage/upload_to_explicit_uri/component.yaml"]},{category:"XGBoost",componentUrls:["https://raw.githubusercontent.com/Ark-kun/pipelines/567c04c51ff00a1ee525b3458425b17adbe3df61/components/XGBoost/Train/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipelines/567c04c51ff00a1ee525b3458425b17adbe3df61/components/XGBoost/Predict/component.yaml"]},{category:"PyTorch",componentUrls:["https://raw.githubusercontent.com/Ark-kun/pipelines/4e1facea1a270535b515a9e8cc59422d1ad76a9e/components/PyTorch/Create_fully_connected_network/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipelines/603342c4b88fe2d69ff07682f702cd3601e883bb/components/PyTorch/Train_PyTorch_model/from_CSV/component.yaml","https://raw.githubusercontent.com/Ark-kun/pipelines/e011e4affa85542ef2b24d63fdac27f8d939bbee/components/PyTorch/Convert_to_OnnxModel_from_PyTorchScriptModule/component.yaml"]},{category:"TFX",componentUrls:[]}],ge=function(){return Object(h.jsxs)("aside",{className:"nodeList",children:[Object(h.jsxs)("details",{open:!0,style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px"},children:[Object(h.jsx)("summary",{style:{borderWidth:"1px",padding:"8px",fontWeight:"bold"},children:"Submit to Google Cloud"}),Object(h.jsx)(he,{})]}),Object(h.jsx)("div",{className:"description",children:"You can drag these nodes to the pane on the right."}),Object(h.jsx)("div",{className:"react-flow__node-input",onDragStart:function(e){return ve(e,{input:{label:"Input Node"}})},draggable:!0,children:"Input Node"}),Object(h.jsx)("div",{className:"react-flow__node-output",onDragStart:function(e){return ve(e,{output:{label:"Output Node"}})},draggable:!0,children:"Output Node"}),Object(h.jsx)($,{componentGroups:je}),Object(h.jsxs)("details",{open:!0,style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px"},children:[Object(h.jsx)("summary",{style:{borderWidth:"1px",padding:"8px",fontWeight:"bold"},children:"Component search"}),Object(h.jsx)(Q,{})]}),Object(h.jsx)(ne,{}),Object(h.jsx)(be,{})]})},xe={name:"XGBoost query train predict pipeline",inputs:[],outputs:[],implementation:{graph:{tasks:{dataset:{componentRef:{url:"https://raw.githubusercontent.com/Ark-kun/pipelines/60a2612541ec08c6a85c237d2ec7525b12543a43/components/datasets/Chicago_Taxi_Trips/component.yaml"},annotations:{"editor.position":'{"x":100,"y":100,"width":180,"height":40}'},arguments:{Select:"tips,trip_seconds,trip_miles,pickup_community_area,dropoff_community_area,fare,tolls,extras,trip_total",Where:'trip_start_timestamp >= "2019-01-01" AND trip_start_timestamp < "2019-02-01"'}},train:{componentRef:{url:"https://raw.githubusercontent.com/Ark-kun/pipelines/567c04c51ff00a1ee525b3458425b17adbe3df61/components/XGBoost/Train/component.yaml"},annotations:{"editor.position":'{"x":100,"y":200,"width":180,"height":40}'},arguments:{training_data:{taskOutput:{taskId:"dataset",outputName:"Table"}}}},predict:{componentRef:{url:"https://raw.githubusercontent.com/Ark-kun/pipelines/567c04c51ff00a1ee525b3458425b17adbe3df61/components/XGBoost/Predict/component.yaml"},annotations:{"editor.position":'{"x":100,"y":300,"width":180,"height":40}'},arguments:{data:{taskOutput:{taskId:"dataset",outputName:"Table"}},model:{taskOutput:{taskId:"train",outputName:"model"}},label_column:"0"}}}}}},Oe=function(){var e=Object(u.a)(s.a.mark((function e(t,n){var r,a,o,c,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=new Map),!("graph"in t.implementation)){e.next=19;break}r=0,a=Object.values(t.implementation.graph.tasks);case 3:if(!(r<a.length)){e.next=19;break}if(o=a[r],c=o.componentRef.url,void 0!==o.componentRef.spec||void 0===c){e.next=16;break}if(void 0!==(i=n.get(c))){e.next=13;break}return e.next=11,J(c);case 11:i=e.sent,n.set(c,i);case 13:return o.componentRef.spec=i,e.next=16,Oe(i,n);case 16:r++,e.next=3;break;case 19:return e.abrupt("return",t);case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ke=(n(62),function(){var e=Object(r.useState)(),t=Object(p.a)(e,2),n=t[0],a=t[1];if(void 0===n)try{Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe(xe);case 2:"graph"in(t=e.sent).implementation&&a(t.implementation.graph);case 4:case"end":return e.stop()}}),e)})))()}catch(o){}return void 0===n?Object(h.jsx)(h.Fragment,{}):Object(h.jsx)("div",{className:"dndflow",children:Object(h.jsxs)(l.g,{children:[Object(h.jsx)("div",{className:"reactflow-wrapper",children:Object(h.jsxs)(k,{initialGraphSpec:n,deleteKeyCode:"Delete",multiSelectionKeyCode:"Control",snapToGrid:!0,snapGrid:[10,10],children:[Object(h.jsx)(l.e,{}),Object(h.jsx)(l.c,{}),Object(h.jsx)(l.b,{gap:10})]})}),Object(h.jsx)(ge,{})]})})});var ye=function(){return Object(h.jsx)("div",{className:"App",style:{width:"100%",height:"100%"},children:Object(h.jsx)(ke,{})})},we=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function _e(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,64)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))};c.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(ye,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/pipeline-editor",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/pipeline-editor","/service-worker.js");we?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):_e(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):_e(t,e)}))}}(),Se()}},[[63,1,2]]]);
//# sourceMappingURL=main.55500444.chunk.js.map