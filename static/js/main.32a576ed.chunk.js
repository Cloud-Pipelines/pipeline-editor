/*! For license information please see main.32a576ed.chunk.js.LICENSE.txt */
(this["webpackJsonppipeline-editor"]=this["webpackJsonppipeline-editor"]||[]).push([[0],{109:function(e,t,n){},110:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(15),c=n.n(o),i=(n(109),n(110),n(8)),s=n(16),u=n(25),l=n.n(u),p=n(18),d=n(26),f=n(86),m=n(22),b=(n(144),n(1)),v="autosaved.component.yaml",j=function(e){var t=e.componentSpec,n=Object(s.k)((function(e){return e.nodes}));return void 0!==n&&n.length>0&&function(e,t){try{void 0!==t&&(0===t.length&&console.warn("saveComponentSpec: nodes.length === 0"),e=Object(d.a)(e,t,!0,!0));var n=Object(p.c)(e);window.sessionStorage.setItem(v,n)}catch(a){var r;!0!==(null===a||void 0===a||null===(r=a.message)||void 0===r?void 0:r.startsWith("The nodes array does not"))&&console.error(a)}}(t,n),null},h=function(){return window.navigator.platform.startsWith("Mac")||window.navigator.platform.startsWith("iPhone")||window.navigator.platform.startsWith("iPad")||window.navigator.platform.startsWith("iPod")},O=function(){var e=Object(r.useState)(),t=Object(i.a)(e,2),n=t[0],a=t[1];if(void 0===n){var o=function(){try{var e=window.sessionStorage.getItem(v);if(null!==e){var t=l.a.load(e);if(null!==t&&"object"===typeof t)return t}}catch(n){console.error(n)}}();void 0===o?Object(m.e)(m.d).then(a):a(o)}return void 0===n?Object(b.jsx)(b.Fragment,{}):Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"dndflow",children:Object(b.jsxs)(s.g,{children:[Object(b.jsx)("div",{className:"reactflow-wrapper",children:Object(b.jsxs)(d.b,{componentSpec:n,setComponentSpec:a,deleteKeyCode:h()?"Backspace":"Delete",multiSelectionKeyCode:h()?"Command":"Control",snapToGrid:!0,snapGrid:[10,10],children:[Object(b.jsx)(s.e,{}),Object(b.jsx)(s.c,{}),Object(b.jsx)(s.b,{gap:10})]})}),Object(b.jsx)(f.a,{componentSpec:n,setComponentSpec:a}),Object(b.jsx)(j,{componentSpec:n})]})})})},x=n(188);var g=function(){return Object(b.jsx)("footer",{className:"footer",style:{width:"100%",height:"30px",padding:"4px",textAlign:"center",backgroundColor:"ghostwhite"},children:Object(b.jsx)("div",{style:{display:"inline-block"},children:Object(b.jsx)(x.a,{href:"https://github.com/Cloud-Pipelines/pipeline-editor/issues",underline:"hover",target:"_blank",rel:"noopener",children:"Give feedback"})})})};var w=function(){return Object(b.jsxs)("div",{className:"App",style:{width:"100%",height:"calc(100% - 30px)"},children:[Object(b.jsx)(O,{}),Object(b.jsx)(g,{})]})},k=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function y(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,193)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))};c.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(w,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/pipeline-editor",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/pipeline-editor","/service-worker.js");k?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):y(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):y(t,e)}))}}(),S()},146:function(e,t,n){"use strict";n.r(t);var r=n(8),a=n(3),o=n.n(a),c=n(9),i=n(0),s=n(1),u=function(e){e.componentSpec;var t=Object(i.useState)(""),n=Object(r.a)(t,2),a=n[0],u=n[1];return Object(s.jsxs)("div",{children:[Object(s.jsx)("button",{onClick:function(){var e=Object(c.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://addr-dot-us-central2.pipelines.googleusercontent.com/apis/v1beta1/runs",{headers:new Headers({Authorization:"Bearer "})});case 2:return n=e.sent,e.next=5,n.text();case 5:r=e.sent,u(r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"List KFP runs"}),Object(s.jsx)("button",{onClick:function(){var e=Object(c.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://IP/api/v1/pods/",{headers:new Headers({Authorization:"Bearer ","Content-Type":"application/json; charset=utf-8"})});case 2:return n=e.sent,e.next=5,n.text();case 5:r=e.sent,u(r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"List K8s cluster objects"}),Object(s.jsx)("span",{children:a})]})},l=n(190),p=n(191),d=n(152),f=n(147),m=n(148),b=n(187),v=n(149),j=n(99);t.default=function(e){var t=e.componentSpec,n=(e.setComponentSpec,Object(i.useState)(!1)),a=Object(r.a)(n,2),o=a[0],c=a[1];return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(u,{componentSpec:t}),Object(s.jsx)(l.a,{children:Object(s.jsx)(p.a,{children:"Summary"})}),Object(s.jsx)("button",{onClick:function(e){c(!0)},children:"Show dialog"}),Object(s.jsxs)(d.a,{open:o,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(s.jsx)(f.a,{id:"alert-dialog-title",children:"Do something?"}),Object(s.jsx)(m.a,{children:Object(s.jsx)(b.a,{id:"alert-dialog-description",children:"foo bar"})}),Object(s.jsxs)(v.a,{children:[Object(s.jsx)(j.a,{color:"primary",onClick:function(e){return c(!1)},children:"Disagree"}),Object(s.jsx)(j.a,{color:"primary",onClick:function(e){return c(!1)},autoFocus:!0,children:"Agree"})]})]})]})}},18:function(e,t,n){"use strict";n.d(t,"g",(function(){return g})),n.d(t,"h",(function(){return k})),n.d(t,"b",(function(){return _})),n.d(t,"a",(function(){return I})),n.d(t,"i",(function(){return E})),n.d(t,"e",(function(){return T})),n.d(t,"f",(function(){return R})),n.d(t,"d",(function(){return A})),n.d(t,"c",(function(){return N}));var r=n(24),a=n(6),o=n(3),c=n.n(o),i=n(9),s=n(25),u=n.n(s),l=n(11),p=n.n(l),d=n(21),f="components",m="digest_to_component_data",b="digest_to_component_spec",v="url_to_digest",j="digest_to_canonical_url",h="file_store_",O=function(){var e=Object(i.a)(c.a.mark((function e(t){var n,r,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?(new TextEncoder).encode(t):t,e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,a=Array.from(new Uint8Array(r)),o=a.map((function(e){return e.toString(16).padStart(2,"0")})).join(""),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(i.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.a.createInstance({name:f,storeName:b}),a=p.a.createInstance({name:f,storeName:"digest_to_component_name"}),e.next=4,r.setItem(t,n);case 4:if(void 0===n.name){e.next=7;break}return e.next=7,a.setItem(t,n.name);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(i.a)(c.a.mark((function e(t){var n,r,a,o,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="string"===typeof t?t:(new TextDecoder).decode(t),r="string"===typeof t?(new TextEncoder).encode(t):t,"object"===typeof(a=u.a.load(n))&&null!==a){e.next=5;break}throw Error("componentText is not a YAML-encoded object: ".concat(a));case 5:if(Object(d.c)(a)){e.next=7;break}throw Error("componentText does not encode a valid pipeline component: ".concat(a));case 7:return o=a,e.next=10,O(r);case 10:return i=e.sent,s={componentRef:{spec:o,digest:i},data:r},e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(i.a)(c.a.mark((function e(t){var n,r,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?(new TextEncoder).encode(t):t,e.next=3,g(t);case 3:return r=e.sent,a=p.a.createInstance({name:f,storeName:m}),o=r.componentRef,e.next=8,a.setItem(r.componentRef.digest,n);case 8:return e.next=10,x(o.digest,o.spec);case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(i.a)(c.a.mark((function e(t){var n,r,a,o,i,s,u,l,d,h,O,x,g,k,y,S=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=S.length>1&&void 0!==S[1]&&S[1],r=p.a.createInstance({name:f,storeName:v}),a=p.a.createInstance({name:f,storeName:b}),o=p.a.createInstance({name:f,storeName:m}),e.next=6,r.getItem(t);case 6:if(null===(i=e.sent)){e.next=21;break}return e.next=10,a.getItem(i);case 10:return s=e.sent,e.next=13,o.getItem(i);case 13:if(u=e.sent,null===s||null===u){e.next=20;break}return l={componentRef:{url:t,digest:i,spec:s},data:u},e.abrupt("return",l);case 20:console.error("Component db is corrupted: Component with url ".concat(t," was added before with digest ").concat(i," but now has no content in the DB."));case 21:return e.next=23,fetch(t);case 23:return d=e.sent,e.next=26,d.arrayBuffer();case 26:return h=e.sent,e.next=29,w(h);case 29:if(O=e.sent,(x=O.componentRef).url=t,void 0!==(g=x.digest)){e.next=36;break}return console.error("Cannot happen: storeComponentText has returned componentReference with digest === undefined."),e.abrupt("return",O);case 36:return null!==i&&g!==i&&console.error("Component db is corrupted: Component with url ".concat(t," previously had digest ").concat(i," but now has digest ").concat(g,".")),k=p.a.createInstance({name:f,storeName:j}),e.next=40,k.getItem(g);case 40:if(null!==(y=e.sent)){e.next=46;break}return e.next=44,k.setItem(g,t);case 44:e.next=51;break;case 46:if(t===y){e.next=51;break}if(console.debug('The component with digest "'.concat(g,'" is being loaded from "').concat(t,'", but was previously loaded from "').concat(y,'".')+(n?" Changing the canonical url.":"")),!n){e.next=51;break}return e.next=51,k.setItem(g,t);case 51:return e.next=53,r.setItem(t,g);case 53:return e.abrupt("return",O);case 54:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e,t){for(var n=e,r=1;t.has(n);)n=e+" "+(++r).toString();return n},S=function(){var e=Object(i.a)(c.a.mark((function e(t,n,r){var o,i,s,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t);case 2:return o=h+t,i=p.a.createInstance({name:f,storeName:o}),e.next=6,i.getItem(n);case 6:return s=e.sent,u=new Date,l=null===s?{componentRef:r.componentRef,name:n,creationTime:u,modificationTime:u,data:r.data}:Object(a.a)(Object(a.a)({},s),{},{name:n,modificationTime:u,data:r.data,componentRef:r.componentRef}),e.next=11,i.setItem(n,l);case 11:return e.abrupt("return",l);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),C=function(){var e=Object(i.a)(c.a.mark((function e(t,n){var r,a,o,i,s,u=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:"Component",e.next=3,D(t);case 3:return a=h+t,o=p.a.createInstance({name:f,storeName:a}),e.t0=Set,e.next=8,o.keys();case 8:return e.t1=e.sent,i=new e.t0(e.t1),s=y(r,i),e.abrupt("return",S(t,s,n));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=Object(i.a)(c.a.mark((function e(t,n){var r,a,o,i=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>2&&void 0!==i[2]?i[2]:"Component",e.next=3,k(n);case 3:return o=e.sent,e.abrupt("return",C(t,o,null!==(r=o.componentRef.spec.name)&&void 0!==r?r:a));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=Object(i.a)(c.a.mark((function e(t,n,r){var a,o,i,s=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.length>3&&void 0!==s[3]?s[3]:"Component",e.next=3,w(n);case 3:return i=e.sent,e.abrupt("return",C(t,i,null!==(a=null!==r&&void 0!==r?r:i.componentRef.spec.name)&&void 0!==a?a:o));case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),E=function(){var e=Object(i.a)(c.a.mark((function e(t,n,r){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(r);case 2:return a=e.sent,e.abrupt("return",S(t,n,a));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),T=function(){var e=Object(i.a)(c.a.mark((function e(t){var n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t);case 2:return n=h+t,r=p.a.createInstance({name:f,storeName:n}),a=new Map,e.next=7,r.iterate((function(e,t,n){a.set(t,e)}));case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(i.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t);case 2:return r=h+t,a=p.a.createInstance({name:f,storeName:r}),e.abrupt("return",a.getItem(n));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A=function(){var e=Object(i.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t);case 2:return r=h+t,a=p.a.createInstance({name:f,storeName:r}),e.abrupt("return",a.removeItem(n));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=function(e){return u.a.dump(e,{lineWidth:1e4})},D=function(){var e=Object(i.a)(c.a.mark((function e(t){var n,a,o,i,s,u,l,d,b,v,j,x,g,w,k,S,C,_,I,E,T,R,A,D,L,P,U,M,F,W;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="component_list_format_version_"+t,o=p.a.createInstance({name:f,storeName:"component_store_settings"}),i=h+t,s=p.a.createInstance({name:f,storeName:i}),e.next=6,o.getItem(a);case 6:if(e.t1=n=e.sent,e.t0=null!==e.t1,!e.t0){e.next=10;break}e.t0=void 0!==n;case 10:if(!e.t0){e.next=14;break}e.t2=n,e.next=15;break;case 14:e.t2=1;case 15:if(u=e.t2,[1,2,3].includes(u)){e.next=18;break}throw Error('upgradeComponentListDb: Unknown component list version "'.concat(u,'" for the list ').concat(t));case 18:if(1!==u){e.next=60;break}return console.log("componentStore: Upgrading the component list DB ".concat(t)),d=p.a.createInstance({name:f,storeName:"component_ref_lists"}),e.next=23,d.getItem(t);case 23:if(e.t4=l=e.sent,e.t3=null!==e.t4,!e.t3){e.next=27;break}e.t3=void 0!==l;case 27:if(!e.t3){e.next=31;break}e.t5=l,e.next=32;break;case 31:e.t5=[];case 32:b=e.t5,v=new Set,j="user_pipelines"===t?"Pipeline":"Component",x=Object(r.a)(b),e.prev=36,x.s();case 38:if((g=x.n()).done){e.next=48;break}return k=g.value,S=null!==(w=k.spec.name)&&void 0!==w?w:j,C=y(S,v),_={componentRef:k},e.next=45,s.setItem(C,_);case 45:v.add(C);case 46:e.next=38;break;case 48:e.next=53;break;case 50:e.prev=50,e.t6=e.catch(36),x.e(e.t6);case 53:return e.prev=53,x.f(),e.finish(53);case 56:return e.next=58,o.setItem(a,2);case 58:u=2,console.log("componentStore: Upgraded the component list DB ".concat(t," to version ").concat(u));case 60:if(2!==u){e.next=107;break}return I=p.a.createInstance({name:f,storeName:m}),e.next=64,s.keys();case 64:E=e.sent,T=Object(r.a)(E),e.prev=66,T.s();case 68:if((R=T.n()).done){e.next=95;break}return A=R.value,e.next=72,s.getItem(A);case 72:if(null!==(D=e.sent)){e.next=75;break}throw Error('File "'.concat(A,'" has disappeared during upgrade'));case 75:return L=D.componentRef,e.next=78,I.getItem(D.componentRef.digest);case 78:if(null!==(P=e.sent)){e.next=89;break}return console.error('Db is corrupted: Could not find data for file "'.concat(A,'" with digest ').concat(D.componentRef.digest,".")),U=N(D.componentRef.spec),P=(new TextEncoder).encode(U),e.next=85,O(P);case 85:throw M=e.sent,L.digest=M,console.warn('The component "'.concat(A,'" was re-serialized. Old digest: ').concat(D.componentRef.digest,". New digest ").concat(M,".")),Error('Db is corrupted: Could not find data for file "'.concat(A,'" with digest ').concat(D.componentRef.digest,"."));case 89:return F=new Date,W={name:A,creationTime:F,modificationTime:F,data:P,componentRef:L},e.next=93,s.setItem(A,W);case 93:e.next=68;break;case 95:e.next=100;break;case 97:e.prev=97,e.t7=e.catch(66),T.e(e.t7);case 100:return e.prev=100,T.f(),e.finish(100);case 103:return u=3,e.next=106,o.setItem(a,u);case 106:console.log("componentStore: Upgraded the component list DB ".concat(t," to version ").concat(u));case 107:case"end":return e.stop()}}),e,null,[[36,50,53,56],[66,97,100,103]])})));return function(t){return e.apply(this,arguments)}}()},21:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var r=function(e){return"object"===typeof e&&"implementation"in e},a=function(e){return"container"in e},o=function(e){return"graph"in e}},22:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"d",(function(){return i}));var r=n(3),a=n.n(r),o=n(9),c=n(30),i="https://raw.githubusercontent.com/Ark-kun/pipelines/2edfd25b5ee3a4aa149c24a225a50041fbd3662d/components/XGBoost/_samples/sample_pipeline.pipeline.component.yaml",s="https://raw.githubusercontent.com/Ark-kun/pipelines/b45c82e42588ee0a86b8875d1908d972275bfd2f/samples/test/data_passing.pipeline.component.yaml",u="https://raw.githubusercontent.com/Ark-kun/pipeline_components/84e782224ff79a0690e84e7d66c93cec5089e041/components/google-cloud/Optimizer/_samples/Optimization.pipeline.component.yaml",l=[i,"https://raw.githubusercontent.com/Ark-kun/pipelines/237cd6bc0b6db26f615c22897be20aad77270b50/components/PyTorch/_samples/Train_fully-connected_network.pipeline.component.yaml","https://raw.githubusercontent.com/Ark-kun/pipeline_components/44b0543525ab6149ce995a411f88997e7131a53d/components/google-cloud/Vertex_AI/AutoML/Tables/_samples/VertexAI.AutoML.Tables.pipeline.component.yaml","https://raw.githubusercontent.com/Ark-kun/pipelines/2765b13699ac28de523f499eeaa9eb2ed9b8798a/components/deprecated/tfx/_samples/TFX.pipeline.component.yaml"],p=function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,o,i,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=new Map),!("graph"in t.implementation)){e.next=19;break}r=0,o=Object.values(t.implementation.graph.tasks);case 3:if(!(r<o.length)){e.next=19;break}if(i=o[r],s=i.componentRef.url,void 0!==i.componentRef.spec||void 0===s){e.next=16;break}if(void 0!==(u=n.get(s))){e.next=13;break}return e.next=11,Object(c.a)(s);case 11:u=e.sent,n.set(s,u);case 13:return i.componentRef.spec=u,e.next=16,p(u,n);case 16:r++,e.next=3;break;case 19:return e.abrupt("return",t);case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(o.length>1&&void 0!==o[1])||o[1],e.next=3,Object(c.a)(t);case 3:if(r=e.sent,!n){e.next=8;break}return e.next=7,p(r);case 7:r=e.sent;case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},26:function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var r=n(24),a=n(4),o=n(17),c=n(8),i=n(6),s=n(0),u=n(16),l=n(21),p=n(3),d=n.n(p),f=n(9),m=n(56),b=n(1),v=function(e){var t=e.taskSpec,n=e.closeEditor,r=e.setArguments,a=Object(s.useState)(Object(i.a)({},t.arguments)),o=Object(c.a)(a,2),u=o[0],l=o[1],p=t.componentRef.spec;return void 0===p?(console.error("ArgumentsEditor called with missing taskSpec.componentRef.spec",t),Object(b.jsx)(b.Fragment,{})):Object(b.jsxs)("form",{onSubmit:function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),style:{position:"fixed",background:"white",border:"1px solid black",borderRadius:"4px",padding:"15px"},children:[Object(b.jsxs)("legend",{children:["Input arguments for ",p.name]}),Object(b.jsx)(m.a,{componentSpec:p,componentArguments:u,setComponentArguments:l}),Object(b.jsx)("button",{type:"button",onClick:n,children:"Close"}),Object(b.jsx)("button",{type:"button",onClick:function(e){null===r||void 0===r||r(u),null===n||void 0===n||n()},children:"Apply"})]})},j=u.f.Top,h=u.f.Bottom,O=function(e){return"task"===e.type&&void 0!==e.data&&"taskSpec"in e.data};function x(e,t,n,r,a){for(var o=[],i=e.length,s=0;s<i;s++){var l,p,d=e[s],f=r+d.name,m=String(100*((s+1)/(i+1)))+"%",v=n===u.f.Top||n===u.f.Bottom?{left:m}:{top:m},j=null!==(l=null===(p=d.type)||void 0===p?void 0:p.toString())&&void 0!==l?l:"Any",h=["handle_".concat(r).concat(j).replace(" ","_")];(null!==a&&void 0!==a?a:[]).includes(d.name)&&h.push("missing-argument"),h=h.map((function(e){return e.replace(" ","_")}));var O=g(n,i),x=Object(c.a)(O,2),w=x[0],k=x[1];o.push(Object(b.jsx)(u.d,{type:t,position:n,id:f,style:v,isConnectable:!0,title:d.name+" : "+j,className:h.join(" "),children:Object(b.jsx)("div",{className:w,style:k,children:d.name})},f))}return o}function g(e,t){var n=180,r="label";return e===u.f.Top||e===u.f.Bottom?(t>1&&(n=180/(t+1)),n<35&&(n=50,r+=" label-angled")):n=60,[r,{maxWidth:"".concat(n,"px")}]}var w=function(e){var t,n,r,a,o=e.data,i=Object(s.useState)(!1),u=Object(c.a)(i,2),l=u[0],p=u[1],d=o.taskSpec,f=d.componentRef.spec;if(void 0===f)return Object(b.jsx)(b.Fragment,{});var m=null!==(t=f.name)&&void 0!==t?t:"<component>",O=(null!==(n=f.inputs)&&void 0!==n?n:[]).filter((function(e){var t;return!0!==e.optional&&void 0===e.default&&!(e.name in(null!==(t=d.arguments)&&void 0!==t?t:{}))})).map((function(e){return e.name})),g=function(e,t){return x(e,"target",j,"input_",t)}(null!==(r=f.inputs)&&void 0!==r?r:[],O),w=x(null!==(a=f.outputs)&&void 0!==a?a:[],"source",h,"output_"),k=g.concat(w);return Object(b.jsxs)("div",{onDoubleClick:function(){p(!l)},title:o.taskId,children:[m,k,l&&Object(b.jsx)(v,{taskSpec:d,closeEditor:function(){p(!1)},setArguments:o.setArguments})]})},k=["name","description","metadata","inputs","outputs","implementation"],y=["children","componentSpec","setComponentSpec"],S="https://cloud-pipelines.net/pipeline-editor/",C=function(e){return"task_"+e},_=function(e){return"input_"+e},I=function(e){return"output_"+e},E=function(e){return e.replace(/^task_/,"")},T=function(e){return e.replace(/^input_/,"")},R=function(e){return e.replace(/^output_/,"")},A=function(e,t){var n,r,s,u=arguments.length>2&&void 0!==arguments[2]&&arguments[2],p=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e=Object(i.a)({},e);var d=function(e){return JSON.stringify({x:e.__rf.position.x,y:e.__rf.position.y,width:e.__rf.width,height:e.__rf.height})},f=function(e,t){var n=e.__rf.position.x-t.__rf.position.x,r=e.__rf.position.y-t.__rf.position.y;return 0!==n?n:r},m=function(e,t){var n=e.__rf.position.x-t.__rf.position.x,r=e.__rf.position.y-t.__rf.position.y;return 0!==r?r:n},b=t.filter((function(e){return"input"===e.type})).sort(f),v=t.filter((function(e){return"output"===e.type})).sort(f),j=t.filter(O).sort(m),h=new Map(b.map((function(e){return[T(e.id),d(e)]}))),x=new Map(b.map((function(e,t){return[T(e.id),t]}))),g=function(e,t){var n,r;return(null!==(n=x.get(e.name))&&void 0!==n?n:1/0)-(null!==(r=x.get(t.name))&&void 0!==r?r:1/0)},w=new Map(v.map((function(e){return[R(e.id),d(e)]}))),y=new Map(v.map((function(e,t){return[R(e.id),t]}))),C=function(e,t){var n,r;return(null!==(n=y.get(e.name))&&void 0!==n?n:1/0)-(null!==(r=y.get(t.name))&&void 0!==r?r:1/0)},_=new Map(j.map((function(e){return[E(e.id),d(e)]}))),I=new Map(j.map((function(e,t){return[E(e.id),t]}))),A=function(e,t){var n,r;return(null!==(n=I.get(e[0]))&&void 0!==n?n:1/0)-(null!==(r=I.get(t[0]))&&void 0!==r?r:1/0)};if(e.inputs=null===(n=e.inputs)||void 0===n?void 0:n.map((function(e){if(!h.has(e.name)||!x.has(e.name))throw Error("The nodes array does not have input node ".concat(e.name));var t=Object(i.a)({},e.annotations);p?t["editor.position"]=h.get(e.name):delete t["editor.position"];var n=Object(i.a)(Object(i.a)({},e),{},{annotations:t});return 0===Object.keys(t).length&&delete n.annotations,n})).sort(g),e.outputs=null===(r=e.outputs)||void 0===r?void 0:r.map((function(e){if(!w.has(e.name)||!y.has(e.name))throw Error("The nodes array does not have output node ".concat(e.name));var t=Object(i.a)({},e.annotations);p?t["editor.position"]=w.get(e.name):delete t["editor.position"];var n=Object(i.a)(Object(i.a)({},e),{},{annotations:t});return void 0!==t&&0!==Object.keys(t).length||delete n.annotations,n})).sort(C),!Object(l.b)(e.implementation))return e;var N=Object(i.a)({},e.implementation.graph),D=Object.fromEntries(Object.entries(N.tasks||{}).map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];if(!_.has(n)||!I.has(n))throw Error("The nodes array does not have task node ".concat(n));var a=Object(i.a)({},r.annotations);p?a["editor.position"]=_.get(n):delete a["editor.position"];var o=Object(i.a)(Object(i.a)({},r),{},{annotations:a});return void 0!==a&&0!==Object.keys(a).length||delete o.annotations,u||void 0===o.componentRef.spec||void 0===o.componentRef.url||(o.componentRef=Object(i.a)({},o.componentRef),delete o.componentRef.spec),[n,o]})).sort(A));void 0!==D&&(N.tasks=D),e=Object(i.a)(Object(i.a)({},e),{},{implementation:Object(i.a)(Object(i.a)({},e.implementation),{},{graph:N})});var L=function(e){var t=e.name,n=e.description,r=e.metadata,o=e.inputs,c=e.outputs,s=e.implementation,u=Object(a.a)(e,k);return Object(i.a)(Object(i.a)(Object(i.a)(Object(i.a)(Object(i.a)(Object(i.a)({},t&&{name:t}),n&&{description:n}),r&&{metadata:r}),o&&{inputs:o}),c&&{outputs:c}),{},{implementation:s},u)};return e=L(e=Object(i.a)(Object(i.a)({},e),{},{metadata:Object(i.a)(Object(i.a)({},e.metadata),{},{annotations:Object(i.a)(Object(i.a)({},null===(s=e.metadata)||void 0===s?void 0:s.annotations),{},Object(o.a)({},"sdk",S))})}))},N={task:Object(s.memo)(w)};t.b=function(e){var t,n,o,l=e.children,p=e.componentSpec,d=void 0===p?{implementation:{graph:{tasks:{}}}}:p,f=e.setComponentSpec,m=Object(a.a)(e,y),v=Object(s.useState)(),j=Object(c.a)(v,2),h=j[0],O=j[1];if(!("graph"in d.implementation))return Object(b.jsx)(b.Fragment,{});var x=d.implementation.graph,g=Object.entries(x.tasks).map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1],a={x:0,y:0};if(void 0!==r.annotations)try{var o=r.annotations["editor.position"],i=JSON.parse(o);a={x:i.x,y:i.y}}catch(s){}return{id:C(n),data:{taskSpec:r,taskId:n,setArguments:function(e){return U(n,e)}},position:a,type:"task"}})),w=(null!==(t=d.inputs)&&void 0!==t?t:[]).map((function(e){var t={x:0,y:0};if(void 0!==e.annotations)try{var n=e.annotations["editor.position"],r=JSON.parse(n);t={x:r.x,y:r.y}}catch(a){}return{id:_(e.name),data:{label:e.name},position:t,type:"input"}})),k=(null!==(n=d.outputs)&&void 0!==n?n:[]).map((function(e){var t={x:0,y:0};if(void 0!==e.annotations)try{var n=e.annotations["editor.position"],r=JSON.parse(n);t={x:r.x,y:r.y}}catch(a){}return{id:I(e.name),data:{label:e.name},position:t,type:"output"}})),S=Object.entries(x.tasks).flatMap((function(e){var t,n=Object(c.a)(e,2),r=n[0],a=n[1];return Object.entries(null!==(t=a.arguments)&&void 0!==t?t:{}).flatMap((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];if("string"===typeof a)return[];if("taskOutput"in a){var o=a.taskOutput;return[{id:"".concat(o.taskId,"_").concat(o.outputName,"-").concat(r,"_").concat(n),source:C(o.taskId),sourceHandle:"output_".concat(o.outputName),target:C(r),targetHandle:"input_".concat(n),arrowHeadType:u.a.ArrowClosed}]}if("graphInput"in a){var i=a.graphInput;return[{id:"Input_".concat(i.inputName,"-").concat(r,"_").concat(n),source:_(i.inputName),sourceHandle:null,target:C(r),targetHandle:"input_".concat(n),arrowHeadType:u.a.ArrowClosed}]}return console.error("Impossible task input argument kind: ",a),[]}))})),A=Object.entries(null!==(o=x.outputValues)&&void 0!==o?o:{}).map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1].taskOutput;return{id:"".concat(r.taskId,"_").concat(r.outputName,"-Output_").concat(n),source:C(r.taskId),sourceHandle:"output_".concat(r.outputName),target:I(n),targetHandle:null,arrowHeadType:u.a.ArrowClosed}})),D=g.concat(w).concat(k).concat(S).concat(A),L=function(e){d=e,f(e)},P=function(e){x=e,L(Object(i.a)(Object(i.a)({},d),{},{implementation:{graph:x}}))},U=function(e,t){var n=Object(i.a)(Object(i.a)({},x),{},{tasks:Object(i.a)({},x.tasks)});n.tasks[e]=Object(i.a)(Object(i.a)({},x.tasks[e]),{},{arguments:t}),P(n)},M=function(e,t,n){var r=x.tasks[e].arguments,a=Object(i.a)({},r);void 0===n?delete a[t]:a[t]=n,U(e,a)},F=function(e,t){return M(e,t,void 0)},W=function(e,t){var n=Object(i.a)({},x.outputValues);void 0===t?delete n[e]:n[e]=t,x=Object(i.a)(Object(i.a)({},x),{},{outputValues:n}),P(x)},G=function(e){return W(e)},B=function(e){var t,n;if(null!==e.source&&null!==e.target){var r=null===(t=e.targetHandle)||void 0===t?void 0:t.replace(/^input_/,""),a=null===(n=e.sourceHandle)||void 0===n?void 0:n.replace(/^output_/,"");if(void 0!==a){var o={taskOutput:{taskId:E(e.source),outputName:a}};void 0!==r?M(E(e.target),r,o):W(R(e.target),o)}else{var c={graphInput:{inputName:T(e.source)}};void 0!==r?M(E(e.target),r,c):console.error("addConnection: Cannot directly connect graph input to graph output: ",e)}}else console.error("addConnection called with missing source or target: ",e)},V=function(e){var t,n=null===(t=e.targetHandle)||void 0===t?void 0:t.replace(/^input_/,"");void 0!==n?F(E(e.target),n):G(R(e.target))},H=function(e){if("input"===e.type)!function(e){for(var t,n=0,r=Object.entries(x.tasks);n<r.length;n++)for(var a=Object(c.a)(r[n],2),o=a[0],s=a[1],u=0,l=Object.entries(null!==(p=s.arguments)&&void 0!==p?p:{});u<l.length;u++){var p,f=Object(c.a)(l[u],2),m=f[0],b=f[1];"string"!==typeof b&&"graphInput"in b&&b.graphInput.inputName===e&&F(o,m)}var v=(null!==(t=d.inputs)&&void 0!==t?t:[]).filter((function(t){return t.name!==e}));d=Object(i.a)(Object(i.a)({},d),{},{inputs:v}),L(d)}(T(e.id));else if("output"===e.type){!function(e){var t;G(e);var n=(null!==(t=d.outputs)&&void 0!==t?t:[]).filter((function(t){return t.name!==e}));d=Object(i.a)(Object(i.a)({},d),{},{outputs:n}),L(d)}(R(e.id))}else if("task"===e.type){!function(e){for(var t,n=0,r=Object.entries(x.tasks);n<r.length;n++)for(var a=Object(c.a)(r[n],2),o=a[0],s=a[1],u=0,l=Object.entries(null!==(p=s.arguments)&&void 0!==p?p:{});u<l.length;u++){var p,d=Object(c.a)(l[u],2),f=d[0],m=d[1];"string"!==typeof m&&"taskOutput"in m&&m.taskOutput.taskId===e&&F(o,f)}var b=Object.fromEntries(Object.entries(null!==(t=x.outputValues)&&void 0!==t?t:{}).filter((function(t){var n=Object(c.a)(t,2);return n[0],n[1].taskOutput.taskId!==e})));x=Object(i.a)(Object(i.a)({},x),{},{outputValues:b});var v=Object(i.a)(Object(i.a)({},x),{},{tasks:Object(i.a)({},x.tasks)});delete v.tasks[e],P(v)}(E(e.id))}else console.log("removeNode: Unexpected note type: ",e)},J=function(e,t){for(var n=e,r=1;t.has(n);)n=e+" "+(++r).toString();return n};return Object(b.jsx)(u.h,Object(i.a)(Object(i.a)({},m),{},{elements:D,nodeTypes:N,onConnect:function(e){B(e)},onDragOver:function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"},onDrop:function(e){if(e.preventDefault(),h){var t=e.dataTransfer.getData("application/reactflow");if(""===t)return;var n=JSON.parse(t),r=Object.keys(n)[0],a=n[r],o=0,c=0,s=e.dataTransfer.getData("DragStart.offset");if(""!==s){var u,l,p=JSON.parse(s);o=null!==(u=.68*p.offsetX)&&void 0!==u?u:0,c=null!==(l=.64*p.offsetY)&&void 0!==l?l:0}var f=h.project({x:e.clientX-o,y:e.clientY-c}),m={x:f.x,y:f.y},b={"editor.position":JSON.stringify(m)};if("task"===r){var v,j,O=a,g=Object(i.a)(Object(i.a)({},O.annotations),b);O.annotations=g;var w=Object(i.a)(Object(i.a)({},O),{},{annotations:g}),k=function(){return J(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Task",new Set(Object.keys(x.tasks)))}(null!==(v=null===(j=O.componentRef.spec)||void 0===j?void 0:j.name)&&void 0!==v?v:"Task");(x=Object(i.a)(Object(i.a)({},x),{},{tasks:Object(i.a)({},x.tasks)})).tasks[k]=w,P(x)}else if("input"===r){var y,S={name:function(){var e;return J(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Input",new Set(null===(e=d.inputs)||void 0===e?void 0:e.map((function(e){return e.name}))))}(),annotations:b},C=(null!==(y=d.inputs)&&void 0!==y?y:[]).concat([S]);d=Object(i.a)(Object(i.a)({},d),{},{inputs:C}),L(d)}else if("output"===r){var _,I={name:function(){var e;return J(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Output",new Set(null===(e=d.outputs)||void 0===e?void 0:e.map((function(e){return e.name}))))}(),annotations:b},E=(null!==(_=d.outputs)&&void 0!==_?_:[]).concat([I]);d=Object(i.a)(Object(i.a)({},d),{},{outputs:E}),L(d)}}},onEdgeUpdate:function(e,t){V(e),B(t)},onElementsRemove:function(e){var t,n=Object(r.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;Object(u.i)(a)&&V(a)}}catch(s){n.e(s)}finally{n.f()}var o,c=Object(r.a)(e);try{for(c.s();!(o=c.n()).done;){var i=o.value;Object(u.j)(i)&&H(i)}}catch(s){c.e(s)}finally{c.f()}},onLoad:function(e){return O(e)},children:l}))}},30:function(e,t,n){"use strict";n.d(t,"a",(function(){return T})),n.d(t,"c",(function(){return U})),n.d(t,"b",(function(){return F})),n.d(t,"d",(function(){return W}));var r=n(24),a=n(3),o=n.n(a),c=n(9),i=n(69),s=n(76),u=n(97),l=n(25),p=n.n(l),d=n(11),f=n.n(d),m=n(39),b=n(21),v=n(22),j="https://api.github.com/search",h="raw.githubusercontent.com/.../component.yaml",O="components",x="hash_to_data",g="hash_to_component_name",w="url_to_hash",k="hash_to_url",y="url_version",S="bad_hashes",C=function(){var e=Object(c.a)(o.a.mark((function e(t){var n,r,a,c,i,s,u,l,p=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:1,r=p.length>2&&void 0!==p[2]?p[2]:"indexed",a=p.length>3&&void 0!==p[3]?p[3]:"desc",c=encodeURIComponent(t),i=encodeURIComponent(r),s=encodeURIComponent(a),u="https://api.github.com/search/code?q=".concat(c,"&sort=").concat(i,"&order=").concat(s,"&per_page=100&page=").concat(n),e.next=9,Object(m.a)(u,j,!0);case 9:return l=e.sent,e.abrupt("return",l.json());case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(e){return e.replace("https://github.com/","https://raw.githubusercontent.com/").replace("/blob/","/")};function I(e){return E.apply(this,arguments)}function E(){return(E=Object(u.a)(o.a.mark((function e(t){var n,a,c,i,u,l,p,d,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=["filename:component.yaml"].concat(t),c=a.join(" "),i=1;case 4:if(!(i<100)){e.next=33;break}return e.next=7,Object(s.a)(C(c,i));case 7:if(u=e.sent,0!==(l=u.items).length){e.next=11;break}return e.abrupt("break",33);case 11:p=Object(r.a)(l),e.prev=12,p.s();case 14:if((d=p.n()).done){e.next=20;break}return f=d.value,e.next=18,{url:_(f.html_url),hash:f.sha};case 18:e.next=14;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(12),p.e(e.t0);case 25:return e.prev=25,p.f(),e.finish(25);case 28:return e.next=30,Object(s.a)(new Promise((function(e){return setTimeout(e,6e3*1.1)})));case 30:i++,e.next=4;break;case 33:return e.abrupt("return",n);case 34:case"end":return e.stop()}}),e,null,[[12,22,25,28]])})))).apply(this,arguments)}var T=function(){var e=Object(c.a)(o.a.mark((function e(t){var n,r,a,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.a)(t,h);case 2:return n=e.sent,e.next=5,n.blob();case 5:return r=e.sent,e.next=8,r.text();case 8:if(a=e.sent,"object"===typeof(c=p.a.load(a))&&null!==c){e.next=12;break}throw Error("componentText is not a YAML-encoded object: ".concat(c));case 12:if(Object(b.c)(c)){e.next=14;break}throw Error("componentText does not encode a valid pipeline component: ".concat(c));case 14:return i=c,e.abrupt("return",i);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(c.a)(o.a.mark((function e(t){var n,r,a,c,s,u,l,d,v,j,C,E,T,R,A,N,D,L,P,U,M,F,W,G,B;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.debug("Starting cacheAllComponents"),n=I(t),r=f.a.createInstance({name:O,storeName:w}),a=f.a.createInstance({name:O,storeName:k}),c=f.a.createInstance({name:O,storeName:x}),s=f.a.createInstance({name:O,storeName:g}),u=f.a.createInstance({name:O,storeName:y}),l=f.a.createInstance({name:O,storeName:S}),d=!0,v=!1,e.prev=10,C=Object(i.a)(n);case 12:return e.next=14,C.next();case 14:return E=e.sent,d=E.done,e.next=18,E.value;case 18:if(T=e.sent,d){e.next=94;break}return A=(R=T).hash.toLowerCase(),N=R.url,e.next=25,l.getItem(A);case 25:if(null===(D=e.sent)){e.next=29;break}return console.debug("Skipping url ".concat(N," with hash ").concat(A,' due to error: "').concat(D,'"')),e.abrupt("continue",91);case 29:if(e.prev=29,(L=_(N)).endsWith("component.yaml")){e.next=34;break}return console.debug("Skipping url ".concat(L,' since it does not end with "component.yaml"')),e.abrupt("continue",91);case 34:return e.next=36,r.getItem(L);case 36:return null!==(P=e.sent)&&P!==A&&console.error("Component cache is broken. Stored hash for ".concat(L,": ").concat(P," != ").concat(A,".")),e.next=40,u.getItem(L);case 40:if(U=e.sent,!(null!==P&&null!==U&&Number.parseInt(U)>=1)){e.next=43;break}return e.abrupt("continue",91);case 43:return console.debug("Processing new component candidate: ".concat(L,".")),e.next=46,Object(m.a)(L,h);case 46:return M=e.sent,F=void 0,W=void 0,e.prev=49,e.next=52,M.blob();case 52:return G=e.sent,e.next=55,G.text();case 55:if(W=e.sent,"object"===typeof(B=p.a.load(W))&&null!==B){e.next=59;break}throw Error("componentText is not a YAML-encoded object: ".concat(B));case 59:if(Object(b.c)(B)){e.next=61;break}throw Error("componentText does not encode a valid pipeline component: ".concat(B));case 61:F=B,e.next=68;break;case 64:return e.prev=64,e.t0=e.catch(49),l.setItem(A,e.t0.name+": "+e.t0.message),e.abrupt("continue",91);case 68:if(void 0!==F.implementation){e.next=71;break}return l.setItem(A,'Component lacks the "implementation" section.'),e.abrupt("continue",91);case 71:return e.next=73,c.setItem(A,W);case 73:return e.next=75,a.getItem(A);case 75:if(null!==e.sent){e.next=79;break}return e.next=79,a.setItem(A,L);case 79:if(!F.name){e.next=82;break}return e.next=82,s.setItem(A,F.name);case 82:return e.next=84,r.setItem(L,A);case 84:return e.next=86,u.setItem(L,1);case 86:e.next=91;break;case 88:e.prev=88,e.t1=e.catch(29),console.error("Error when processing component candidate ".concat(N," Error: ").concat(e.t1,"."));case 91:d=!0,e.next=12;break;case 94:e.next=100;break;case 96:e.prev=96,e.t2=e.catch(10),v=!0,j=e.t2;case 100:if(e.prev=100,e.prev=101,d||null==C.return){e.next=105;break}return e.next=105,C.return();case 105:if(e.prev=105,!v){e.next=108;break}throw j;case 108:return e.finish(105);case 109:return e.finish(100);case 110:console.debug("Finished cacheAllComponents");case 111:case"end":return e.stop()}}),e,null,[[10,96,100,110],[29,88],[49,64],[101,,105,109]])})));return function(t){return e.apply(this,arguments)}}(),A=function(e){return"componentRef"in e},N=function(e){return"object"===typeof e&&"components"in e&&function(e){return Array.isArray(e)&&e.every(A)}(e.components)};function D(e){return void 0!==e}var L=function(){var e=Object(c.a)(o.a.mark((function e(t){var n,r,a,c,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:(new TextDecoder).decode(t),r="blob "+n.length.toString()+"\0"+n,a=(new TextEncoder).encode(r),e.next=5,crypto.subtle.digest("SHA-1",a);case 5:return c=e.sent,i=Array.from(new Uint8Array(c)),s=i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(c.a)(o.a.mark((function e(t){var n,r,a,s,u,l,d,v,j,C,_,I,E,T,R,A,P,U,M,F,W,G,B,V,H,J,K,Y,q,z,$;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.debug("Starting importComponentsFromFeed"),console.debug("Downloading component feed: ".concat(t,".")),e.next=4,fetch(t);case 4:return n=e.sent,e.next=7,n.blob();case 7:return r=e.sent,e.next=10,r.text();case 10:if(a=e.sent,s=p.a.load(a),N(s)){e.next=14;break}throw new Error('Component feed loaded from "'.concat(t,'" had invalid content inside.'));case 14:return u=s,e.next=17,Promise.all(u.components.map(function(){var e=Object(c.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(n=t.componentRef.url)){e.next=4;break}return console.error("Component feed entry has no reference URL."),e.abrupt("return",void 0);case 4:return e.t0=n,e.next=7,L(t.data);case 7:return e.t1=e.sent,e.t2=t.data,e.abrupt("return",{url:e.t0,hash:e.t1,data:e.t2});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 17:l=e.sent.filter(D),d=f.a.createInstance({name:O,storeName:w}),v=f.a.createInstance({name:O,storeName:k}),j=f.a.createInstance({name:O,storeName:x}),C=f.a.createInstance({name:O,storeName:g}),_=f.a.createInstance({name:O,storeName:y}),I=f.a.createInstance({name:O,storeName:S}),E=!0,T=!1,e.prev=26,A=Object(i.a)(l);case 28:return e.next=30,A.next();case 30:return P=e.sent,E=P.done,e.next=34,P.value;case 34:if(U=e.sent,E){e.next=108;break}return F=(M=U).hash.toLowerCase(),W=M.url,e.next=41,I.getItem(F);case 41:if(null===(G=e.sent)){e.next=45;break}return console.debug("Skipping url ".concat(W," with hash ").concat(F,' due to error: "').concat(G,'"')),e.abrupt("continue",105);case 45:return e.prev=45,B=M.url,e.next=49,d.getItem(B);case 49:return null!==(V=e.sent)&&V!==F&&console.error("Component cache is broken. Stored hash for ".concat(B,": ").concat(V," != ").concat(F,".")),e.next=53,_.getItem(B);case 53:if(H=e.sent,!(null!==V&&null!==H&&Number.parseInt(H)>=1)){e.next=56;break}return e.abrupt("continue",105);case 56:if(console.debug("Processing new component candidate: ".concat(B,".")),void 0!==(J=M.data)){e.next=76;break}return e.next=61,Object(m.a)(B,h);case 61:return K=e.sent,e.prev=62,e.next=65,K.blob();case 65:return Y=e.sent,e.next=68,Y.text();case 68:J=e.sent,e.next=76;break;case 71:return e.prev=71,e.t0=e.catch(62),q=e.t0 instanceof Error?e.t0.name+": "+e.t0.message:String(e.t0),I.setItem(F,q),e.abrupt("continue",105);case 76:if("object"===typeof(z=p.a.load(J))&&null!==z){e.next=79;break}throw Error("componentText is not a YAML-encoded object: ".concat(z));case 79:if(Object(b.c)(z)){e.next=81;break}throw Error("componentText does not encode a valid pipeline component: ".concat(z));case 81:if(void 0!==($=z).implementation){e.next=85;break}return I.setItem(F,'Component lacks the "implementation" section.'),e.abrupt("continue",105);case 85:return e.next=87,j.setItem(F,J);case 87:return e.next=89,v.getItem(F);case 89:if(null!==e.sent){e.next=93;break}return e.next=93,v.setItem(F,B);case 93:if(!$.name){e.next=96;break}return e.next=96,C.setItem(F,$.name);case 96:return e.next=98,d.setItem(B,F);case 98:return e.next=100,_.setItem(B,1);case 100:e.next=105;break;case 102:e.prev=102,e.t1=e.catch(45),console.error("Error when processing component candidate ".concat(W," Error: ").concat(e.t1,"."));case 105:E=!0,e.next=28;break;case 108:e.next=114;break;case 110:e.prev=110,e.t2=e.catch(26),T=!0,R=e.t2;case 114:if(e.prev=114,e.prev=115,E||null==A.return){e.next=119;break}return e.next=119,A.return();case 119:if(e.prev=119,!T){e.next=122;break}throw R;case 122:return e.finish(119);case 123:return e.finish(114);case 124:console.debug("Finished importComponentsFromFeed");case 125:case"end":return e.stop()}}),e,null,[[26,110,114,124],[45,102],[62,71],[115,,119,123]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(c.a)(o.a.mark((function e(t){var n,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ComponentFeedUrls){e.next=24;break}n=Object(r.a)(t.ComponentFeedUrls),e.prev=2,n.s();case 4:if((a=n.n()).done){e.next=16;break}return c=a.value,e.prev=6,e.next=9,P(c);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),console.error('Error importing component feed "'.concat(c,'": ').concat(e.t0));case 14:e.next=4;break;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(2),n.e(e.t1);case 21:return e.prev=21,n.f(),e.finish(21);case 24:if(void 0===t.GitHubSearchLocations){e.next=27;break}return e.next=27,R(t.GitHubSearchLocations);case 27:case"end":return e.stop()}}),e,null,[[2,18,21,24],[6,11]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(c.a)(o.a.mark((function e(){var t,n,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.a.createInstance({name:O,storeName:k}),n=f.a.createInstance({name:O,storeName:x}),r=new Map,e.next=5,n.iterate((function(e,t,n){try{var a=p.a.load(e);Object(v.f)(a),r.set(t,{spec:a})}catch(o){console.error("Error when parsing cached component. Hash: ".concat(t,". Error: ").concat(o,". Component text: ").concat(e))}}));case 5:return e.next=7,t.iterate((function(e,t,n){var a=r.get(t);void 0===a?console.error("Component db corrupted: Component with url ".concat(e," and hash ").concat(t," has no content in the DB.")):a.url=e}));case 7:return a=[],r.forEach((function(e,t){void 0===e.url?console.error("Component db corrupted: Component with hash ".concat(t," has content, but no URL in the DB.")):a.push(e)})),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(c.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.a.createInstance({name:O,storeName:x}),e.next=3,t.length();case 3:return e.t0=e.sent,e.abrupt("return",0===e.t0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(c.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:return n=e.sent,e.abrupt("return",n.filter((function(e){var n,r,a;return null!==(n=null===(r=e.spec)||void 0===r||null===(a=r.name)||void 0===a?void 0:a.toLowerCase().includes(t.toLowerCase()))&&void 0!==n&&n})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},39:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(3),a=n.n(r),o=n(9),c=function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,o,c,i,s=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],e.next=3,caches.open(n);case 3:return o=e.sent,e.next=6,o.match(t);case 6:if(void 0===(c=e.sent)){e.next=10;break}return r&&o.add(t),e.abrupt("return",c);case 10:return e.next=12,o.add(t);case 12:return e.next=14,o.match(t);case 14:if(void 0!==(i=e.sent)){e.next=17;break}return e.abrupt("return",Promise.reject("Added object to cache, but could not find it"));case 17:return e.abrupt("return",i);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},42:function(e,t,n){"use strict";var r=n(6),a=n(4),o=n(1),c=["componentReference"];t.a=function(e){var t,n,i=e.componentReference,s=Object(a.a)(e,c);return Object(o.jsx)("div",Object(r.a)(Object(r.a)({className:"react-flow__node react-flow__node-task sidebar-node",draggable:!0,onDragStart:function(e){return function(e,t){e.dataTransfer.setData("application/reactflow",JSON.stringify(t)),e.dataTransfer.setData("DragStart.offset",JSON.stringify({offsetX:e.nativeEvent.offsetX,offsetY:e.nativeEvent.offsetY})),e.dataTransfer.effectAllowed="move"}(e,{task:{componentRef:i}})}},s),{},{children:null!==(t=null===(n=i.spec)||void 0===n?void 0:n.name)&&void 0!==t?t:"Component"}))}},56:function(e,t,n){"use strict";var r=n(6),a=n(1);t.a=function(e){var t,n=e.componentSpec,o=e.componentArguments,c=e.setComponentArguments,i=e.shrinkToWidth,s=void 0!==i&&i;return Object(a.jsx)("div",{className:"highlight-invalid-inputs",style:{display:"table",borderSpacing:"5px",tableLayout:s?"fixed":"auto",width:"100%"},children:(null!==(t=n.inputs)&&void 0!==t?t:[]).map((function(e){var t,n=e.name,i=void 0,s=void 0,u=o[n];void 0===u?i=e.default:"string"===typeof u?i=u:s="taskOutput"in u?"<from task ".concat(u.taskOutput.taskId," / ").concat(u.taskOutput.outputName,">"):"graphInput"in u?"<from graph input ".concat(u.graphInput.inputName,">"):"<reference>";var l,p=!(n in o)&&!0!==e.optional&&void 0===e.default,d=(void 0===(l=e.type)?"Any":"string"===typeof l?l:JSON.stringify(l))+(!0===e.optional?"?":"");return Object(a.jsxs)("div",{style:{display:"table-row"},children:[Object(a.jsx)("label",{title:"".concat(n," (").concat(d,")"),style:{textAlign:"right",display:"table-cell",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:Object(a.jsxs)("span",{children:[n," (",Object(a.jsx)("span",{style:{textOverflow:"ellipsis",overflow:"hidden",maxWidth:"90px",display:"inline-block",verticalAlign:"bottom"},title:d,children:d}),")"]})}),Object(a.jsx)("input",{style:{display:"table-cell",borderWidth:"1px",minWidth:"50px",maxWidth:"100%"},placeholder:s,required:p,value:null!==(t=i)&&void 0!==t?t:"",pattern:void e.type,onChange:function(e){o[n]=e.target.value,c(Object(r.a)({},o))}}),Object(a.jsx)("div",{style:{display:"table-cell",width:"30px"},children:Object(a.jsx)("button",{type:"button",title:"Reset to default",onClick:function(e){delete o[n],c(Object(r.a)({},o))},disabled:!(n in o),children:"\u2327"})})]},n)}))})}},58:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r="/pipeline-editor/component_library.yaml",a={ComponentFeedUrls:["https://raw.githubusercontent.com/Ark-kun/pipeline_components/pipeline_component_feed/pipeline_component_feed.yaml"],GitHubSearchLocations:["repo:Ark-kun/pipeline_components path:components"]}},68:function(e,t,n){"use strict";n.d(t,"b",(function(){return I})),n.d(t,"a",(function(){return E}));var r,a,o=n(6),c=n(8),i=n(17),s=n(21);!function(e){e.PRIMITIVE_TYPE_UNSPECIFIED="PRIMITIVE_TYPE_UNSPECIFIED",e.INT="INT",e.DOUBLE="DOUBLE",e.STRING="STRING"}(r||(r={})),function(e){e.TRIGGER_STRATEGY_UNSPECIFIED="TRIGGER_STRATEGY_UNSPECIFIED",e.ALL_UPSTREAM_TASKS_SUCCEEDED="ALL_UPSTREAM_TASKS_SUCCEEDED",e.ALL_UPSTREAM_TASKS_COMPLETED="ALL_UPSTREAM_TASKS_COMPLETED"}(a||(a={}));var u=function(e){return e.toLowerCase().replace(/\W/,"-")},l=function(e){if("string"===typeof e){if(["integer"].includes(e.toLowerCase()))return r.INT;if(["float","double"].includes(e.toLowerCase()))return r.DOUBLE}return r.STRING},p=function(e){return{type:l(e)}},d=function(e,t){switch(t){case r.STRING:return{stringValue:e};case r.INT:return{intValue:parseInt(e)};case r.DOUBLE:return{doubleValue:parseFloat(e)};default:throw Error("Unknown primitive type ".concat(t))}},f="_make_artifact",m="_make_artifact",b="parameter",v="artifact",j=function(e){return{componentRef:{name:f},taskInfo:{name:"Make artifact"},inputs:{parameters:Object(i.a)({},b,e)},cachingOptions:{enableCache:!0}}},h={executorLabel:m,inputDefinitions:{parameters:Object(i.a)({},b,{type:r.STRING})},outputDefinitions:{artifacts:Object(i.a)({},v,{artifactType:{schemaTitle:"system.Artifact"}})}},O={container:{image:"alpine",command:["sh","-ec",'mkdir -p "$(dirname "$1")"; printf "%s" "$0" > "$1"',"{{$.inputs.parameters['".concat(b,"']}}"),"{{$.outputs.artifacts['".concat(v,"'].path}}")]}};function x(e,t){if(void 0===e)if(void 0!==t.default)e=t.default;else{if(!0!==t.optional)throw Error('Argument was not provided for required input "'.concat(t.name,'"'));console.error('Input "'.concat(t.name,"\" is optional, but command-line still uses it when when it's not present.")),e=""}if("string"===typeof e)return{runtimeValue:{constantValue:d(e,l(t.type))}};if("graphInput"in e)return{componentInputParameter:e.graphInput.inputName};if("taskOutput"in e)return{taskOutputParameter:{producerTask:e.taskOutput.taskId,outputParameterKey:e.taskOutput.outputName}};throw Error('Unknown kind of task argument: "'.concat(e,'"'))}function g(e,t,n,r){if(void 0===e)if(void 0!==t.default)e=t.default;else{if(!0!==t.optional)throw Error('Argument was not provided for required input "'.concat(t.name,'"'));console.error('Input "'.concat(t.name,"\" is optional, but command-line still uses it when when it's not present.")),e=""}var a;if("string"===typeof e)return a=r({runtimeValue:{constantValue:{stringValue:e}}},"Make artifact");if("graphInput"in e){if(n)a=r({componentInputParameter:e.graphInput.inputName},"Make artifact for "+e.graphInput.inputName);else a={componentInputArtifact:e.graphInput.inputName};return a}if("taskOutput"in e)return a={taskOutputArtifact:{producerTask:e.taskOutput.taskId,outputArtifactKey:e.taskOutput.outputName}};throw Error('Unknown kind of task argument: "'.concat(e,'"'))}var w=function(e){if(void 0===e)throw TypeError("Object is undefined");return e};function k(e,t,n,r){var a,o,c;if(!Object(s.a)(e.implementation))throw Error("Only container components are supported by this function");var i=e.implementation.container,u=function(e,t,n){var r,a;if(!Object(s.a)(e.implementation))throw Error("resolveCommandLine only supports container components");var o=e.implementation.container,c=new Set,i=new Set,u=function e(r){if("string"==typeof r)return[r];if("inputValue"in r){var a=r.inputValue;return n.has(a)?(c.add(a),["{{$.inputs.parameters['".concat(a,"']}}")]):(i.add(a),["{{$.inputs.artifacts['".concat(a,"'].value}}")])}if("inputPath"in r){var o=r.inputPath;return i.add(o),["{{$.inputs.artifacts['".concat(o,"'].path}}")]}if("outputPath"in r){var s=r.outputPath;return["{{$.outputs.artifacts['".concat(s,"'].path}}")]}if("if"in r){var u=[r.if.cond,r.if.then,r.if.else],l=u[0],p=u[1],d=u[2],f=!1;if("string"===typeof l)f="true"===l.toLowerCase();else if("boolean"===typeof l)f=l;else if("isPresent"in l)f=l.isPresent in t;else{if(!("inputValue"in l))throw Error("Unexpected condition kind: "+l);var m=l.inputValue;if(m in t){var b=t[m];if("string"!==typeof b)throw Error("Using runtime conditions in component command line placeholders is not supported yet.");f="true"===b.toLowerCase()}else f=!1}var v=f?p:d;return void 0===v?[]:v.flatMap(e)}if("concat"in r)return[r.concat.flatMap(e).join("")];throw Error("Unknown kind of command-line argument: ".concat(r))};return{command:null===(r=o.command)||void 0===r?void 0:r.flatMap(u),args:null===(a=o.args)||void 0===a?void 0:a.flatMap(u),inputsConsumedAsParameter:c,inputsConsumedAsArtifact:i}}(e,t,n),l=r({container:{image:i.image,command:u.command,args:u.args}},null!==(a=e.name)&&void 0!==a?a:"Component"),d=new Map((null!==(o=e.inputs)&&void 0!==o?o:[]).map((function(e){return[e.name,e]})));return{inputDefinitions:{parameters:Object.fromEntries(Array.from(u.inputsConsumedAsParameter.values()).map((function(e){var t;return[e,p(null===(t=d.get(e))||void 0===t?void 0:t.type)]}))),artifacts:Object.fromEntries(Array.from(u.inputsConsumedAsArtifact.values()).map((function(e){var t;return[e,(null===(t=d.get(e))||void 0===t||t.type,{artifactType:{schemaTitle:"system.Artifact"}})]})))},outputDefinitions:{parameters:{},artifacts:Object.fromEntries((null!==(c=e.outputs)&&void 0!==c?c:[]).map((function(e){return[e.name,(e.type,{artifactType:{schemaTitle:"system.Artifact"}})]})))},executorLabel:l}}function y(e,t,n,r,a){var i,u,l;if(!Object(s.b)(e.implementation))throw Error("Only graph components are supported by this function");for(var d=e.implementation.graph,b=new Set,x=new Set,g={},w=new Map,k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Task",n=JSON.stringify(e),r=w.get(n);if(void 0!==r)return r;var a=new Set(Object.keys(g)),o=_(t,a);return w.set(n,o),g[o]=e,o},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Make artifact",n=r(O,m),c=Object(o.a)(Object(o.a)({},h),{},{executorLabel:n}),i=a(c,f),s=j(e);s.componentRef.name=i;var u=k(s,t),l={taskOutputArtifact:{producerTask:u,outputArtifactKey:v}};return l},S=0,I=Object.entries(d.tasks);S<I.length;S++){var E=Object(c.a)(I[S],2),T=E[0],R=E[1];if(void 0===R.componentRef.spec)throw Error('Task "'.concat(T,'" does not have taskSpec.componentRef.spec.'));try{var A,N=C(R.componentRef.spec,null!==(A=R.arguments)&&void 0!==A?A:{},n,r,a,y);if(T in g)throw Error('Task ID "'.concat(T,'" is not unique. This cannot happen (unless user task ID clashes with special task ID).'));g[T]=N;for(var D=0,L=Object.values(null!==(P=null===(U=N.inputs)||void 0===U?void 0:U.parameters)&&void 0!==P?P:{});D<L.length;D++){var P,U,M=L[D];void 0!==M.componentInputParameter&&b.add(M.componentInputParameter)}for(var F=0,W=Object.values(null!==(G=null===(B=N.inputs)||void 0===B?void 0:B.artifacts)&&void 0!==G?G:{});F<W.length;F++){var G,B,V=W[F];"componentInputArtifact"in V&&x.add(V.componentInputArtifact)}}catch($){throw $ instanceof Error&&($.message="Error compiling task ".concat(T,": ")+$.message),$}}var H=Array.from(b).filter((function(e){return x.has(e)}));if(H.length>0)throw Error('Compiler error: Some inputs are used both as parameter and artifact: "'.concat(H,'". Please file a bug report.'));var J=Array.from(n).filter((function(e){return x.has(e)}));if(J.length>0)throw Error('Compiler error: Some parameter inputs are consumer as artifact: "'.concat(J,'". Please file a bug report.'));var K,Y,q=(K=null!==(i=d.outputValues)&&void 0!==i?i:{},Y=function(e){return{artifactSelectors:[{producerSubtask:e.taskOutput.taskId,outputArtifactKey:e.taskOutput.outputName}]}},Object.fromEntries(Object.entries(K).map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];return[n,Y(r)]})))),z=new Map((null!==(u=e.inputs)&&void 0!==u?u:[]).map((function(e){return[e.name,e]})));return{inputDefinitions:{parameters:Object.fromEntries(Array.from(b.values()).map((function(e){var t;return[e,p(null===(t=z.get(e))||void 0===t?void 0:t.type)]}))),artifacts:Object.fromEntries(Array.from(x.values()).map((function(e){var t;return[e,(null===(t=z.get(e))||void 0===t||t.type,{artifactType:{schemaTitle:"system.Artifact"}})]})))},outputDefinitions:{artifacts:Object.fromEntries((null!==(l=e.outputs)&&void 0!==l?l:[]).map((function(e){return[e.name,(e.type,{artifactType:{schemaTitle:"system.Artifact"}})]})))},dag:{tasks:g,outputs:{artifacts:q}}}}function S(e,t,n,r,a){if(Object(s.a)(e.implementation))return k(e,t,n,r);if(Object(s.b)(e.implementation))return y(e,0,n,r,a);throw Error("Unsupported component implementation kind: ".concat(e.implementation))}var C=function(e,t,n,r,a,o){var c,i,s,u,l,p,d,f,m=new Set((null!==(c=e.inputs)&&void 0!==c?c:[]).map((function(e){return e.name})).filter((function(e){var r=t[e];return void 0===r||("string"===typeof r||!(!("graphInput"in r)||!n.has(r.graphInput.inputName)))}))),b=new Map((null!==(i=e.inputs)&&void 0!==i?i:[]).map((function(e){return[e.name,e]}))),v=S(e,t,m,r,a),j=a(v,null!==(s=e.name)&&void 0!==s?s:"Component"),h=Object.fromEntries(Object.keys(null!==(u=null===(l=v.inputDefinitions)||void 0===l?void 0:l.parameters)&&void 0!==u?u:{}).map((function(e){return[e,x(t[e],w(b.get(e)))]}))),O=Object.fromEntries(Object.keys(null!==(p=null===(d=v.inputDefinitions)||void 0===d?void 0:d.artifacts)&&void 0!==p?p:{}).map((function(e){return[e,g(t[e],w(b.get(e)),m.has(e),o)]})));return{taskInfo:{name:null!==(f=e.name)&&void 0!==f?f:"Component"},inputs:{parameters:h,artifacts:O},cachingOptions:{enableCache:!0},componentRef:{name:j}}},_=function(e,t){for(var n=e,r=1;t.has(n);)n=e+" "+(++r).toString();return n},I=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pipeline",a={},o=new Map,c={},i=new Map,s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Executor",n=JSON.stringify(e),r=o.get(n);if(void 0!==r)return r;var c=new Set(Object.keys(a)),i=_(t,c);return o.set(n,i),a[i]=e,i},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Component",n=JSON.stringify(e),r=i.get(n);if(void 0!==r)return r;var a=new Set(Object.keys(c)),o=_(t,a);return i.set(n,o),c[o]=e,o},p=new Set((null!==(t=e.inputs)&&void 0!==t?t:[]).map((function(e){return e.name}))),d=Object.fromEntries((null!==(n=e.inputs)&&void 0!==n?n:[]).map((function(e){var t={graphInput:{inputName:e.name}};return[e.name,t]}))),f=S(e,d,p,s,l),m={pipelineInfo:{name:u(r)},sdkVersion:"Cloud-Pipelines",schemaVersion:"2.0.0",deploymentSpec:{executors:a},components:c,root:f};return m},E=function(e,t,n){var r,a,o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pipeline",s=I(e,i),u=null!==(r=(null!==(a=s.root.inputDefinitions)&&void 0!==a?a:{}).parameters)&&void 0!==r?r:{},l={};if(void 0!==n)for(var p=0,f=Array.from(n.entries());p<f.length;p++){var m=Object(c.a)(f[p],2),b=m[0],v=m[1];b in u?l[b]=d(v,u[b].type):console.error('A pipeline argument was provided for the input "'.concat(b,'" that does not exist in the pipeline spec.'))}var j={displayName:null!==(o=e.name)&&void 0!==o?o:"Pipeline",runtimeConfig:{parameters:l,gcsOutputDirectory:t},pipelineSpec:s};return j}},86:function(e,t,n){"use strict";(function(e){var r=n(87),a=n(88),o=n(89),c=n(90),i=n(91),s=n(22),u=n(92),l=n(96),p=n(58),d=n(1),f=function(e,t){e.dataTransfer.setData("application/reactflow",JSON.stringify(t)),e.dataTransfer.setData("DragStart.offset",JSON.stringify({offsetX:e.nativeEvent.offsetX,offsetY:e.nativeEvent.offsetY})),e.dataTransfer.effectAllowed="move"};t.a=function(t){var m,b,v=t.componentSpec,j=t.setComponentSpec,h=function(){return null};if("development"===(null===(m=e)||void 0===m||null===(b=Object({NODE_ENV:"production",PUBLIC_URL:"/pipeline-editor",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}))||void 0===b?void 0:b.NODE_ENV)){var O=n(146).default;h=function(){return O({componentSpec:v,setComponentSpec:j})}}return Object(d.jsxs)("aside",{className:"nodeList",children:[Object(d.jsxs)("details",{style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px"},children:[Object(d.jsx)("summary",{style:{borderWidth:"1px",padding:"4px",fontWeight:"bold"},children:"Save/Load pipeline"}),Object(d.jsx)(l.a,{componentSpec:v,setComponentSpec:j})]}),Object(d.jsxs)("details",{style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px"},children:[Object(d.jsx)("summary",{style:{borderWidth:"1px",padding:"4px",fontWeight:"bold"},children:"Submit to Google Cloud"}),Object(d.jsx)(c.a,{componentSpec:v})]}),Object(d.jsx)("h3",{children:"Drag components to the canvas:"}),Object(d.jsxs)("details",{style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px"},children:[Object(d.jsx)("summary",{children:Object(d.jsx)("strong",{children:"Special"})}),Object(d.jsx)("div",{className:"react-flow__node react-flow__node-input sidebar-node",onDragStart:function(e){return f(e,{input:{label:"Input"}})},draggable:!0,children:"Input"}),Object(d.jsx)("div",{className:"react-flow__node react-flow__node-output sidebar-node",onDragStart:function(e){return f(e,{output:{label:"Output"}})},draggable:!0,children:"Output"})]}),Object(d.jsx)(r.a,{url:p.a}),Object(d.jsxs)("details",{style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px"},children:[Object(d.jsx)("summary",{style:{borderWidth:"1px",padding:"4px",fontWeight:"bold"},children:"User components"}),Object(d.jsx)(u.a,{})]}),Object(d.jsxs)("details",{open:!0,style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px"},children:[Object(d.jsx)("summary",{style:{borderWidth:"1px",padding:"4px",fontWeight:"bold"},children:"Component search"}),Object(d.jsx)(a.a,{})]}),Object(d.jsxs)("details",{children:[Object(d.jsx)("summary",{children:"Debug"}),v&&Object(d.jsx)(o.a,{componentSpec:v}),v&&Object(d.jsx)(i.a,{componentSpec:v}),Object(d.jsx)("button",{type:"button",onClick:function(e){Object(s.e)(s.a).then(j)},children:"Load Data Passing pipeline"}),Object(d.jsx)("button",{type:"button",onClick:function(e){Object(s.e)(s.b).then(j)},children:"Load Google Cloud Optimizer pipeline"}),Object(d.jsx)(h,{})]})]})}}).call(this,n(138))},87:function(e,t,n){"use strict";var r=n(3),a=n.n(r),o=n(9),c=n(8),i=n(25),s=n.n(i),u=n(0),l=n(30),p=n(39),d=n(42),f=n(1),m=function(e){var t=e.componentUrl,n=Object(u.useState)(void 0),r=Object(c.a)(n,2),a=r[0],o=r[1];return Object(u.useEffect)((function(){Object(l.a)(t).then(o)}),[t]),void 0===a?Object(f.jsx)("div",{children:"Loading..."}):Object(f.jsx)(d.a,{componentReference:{url:t,spec:a}})},b=function e(t){var n=t.folder,r=t.isOpen,a=void 0!==r&&r;return Object(f.jsxs)("details",{open:a,style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px",paddingLeft:"10px"},children:[Object(f.jsx)("summary",{style:{borderWidth:"1px",padding:"4px"},children:Object(f.jsx)("strong",{children:n.name})}),n.folders&&Array.from(n.folders).map((function(t,n){return Object(f.jsx)(e,{folder:t,isOpen:a&&0===n},t.name)})),n.components&&Array.from(n.components).map((function(e){return e.url&&Object(f.jsx)(m,{componentUrl:e.url},e.url)}))]},n.name)},v=function(e){var t=e.componentLibraryStruct;return Object(f.jsxs)("details",{open:!0,children:[Object(f.jsx)("summary",{style:{border:"1px solid #aaa",padding:"4px",borderRadius:"4px"},children:Object(f.jsx)("strong",{children:"Component library"})}),Object(f.jsx)("div",{style:{paddingLeft:"10px"},children:t&&Array.from(t.folders).map((function(e,t){return Object(f.jsx)(b,{folder:e,isOpen:0===t},e.name)}))})]})},j=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)(t,"cache",!0);case 2:return n=e.sent,e.next=5,n.arrayBuffer();case 5:if(r=e.sent,"object"===typeof(o=s.a.load((new TextDecoder).decode(r)))&&null!==o){e.next=9;break}throw Error("Component library data is not a YAML-encoded object: ".concat(o));case 9:if("folders"in o){e.next=11;break}throw Error("Invalid Component library data structure: ".concat(o));case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.a=function(e){var t=e.url,n=Object(u.useState)(),r=Object(c.a)(n,2),i=r[0],s=r[1];return Object(u.useEffect)((function(){void 0===i&&Object(o.a)(a.a.mark((function e(){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(t);case 2:n=e.sent,s(n);case 4:case"end":return e.stop()}}),e)})))()}),[i,t]),void 0===i?null:Object(f.jsx)(v,{componentLibraryStruct:i})}},88:function(e,t,n){"use strict";var r=n(3),a=n.n(r),o=n(9),c=n(8),i=n(0),s=n(30),u=n(42),l=n(58),p=n(1);t.a=function(e){var t=Object(i.useState)(void 0),n=Object(c.a)(t,2),r=n[0],d=n[1],f=Object(i.useState)(!0),m=Object(c.a)(f,2),b=m[0],v=m[1],j=Object(i.useState)(!1),h=Object(c.a)(j,2),O=h[0],x=h[1],g=Object(i.useState)(""),w=Object(c.a)(g,2),k=w[0],y=w[1],S=Object(i.useState)([]),C=Object(c.a)(S,2),_=C[0],I=C[1];function E(){return(E=Object(o.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s.b)();case 3:if(e.sent){e.next=11;break}return e.next=6,Object(s.d)(t);case 6:n=e.sent,x(!0),I(n),e.next=12;break;case 11:console.debug("Component DB is empty. Need to populate the DB first.");case 12:return e.next=14,Object(s.c)(l.b);case 14:return x(!0),e.next=17,Object(s.d)(t);case 17:r=e.sent,I(r),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),d(e.t0.message);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})))).apply(this,arguments)}var T=Object(p.jsx)("span",{});if(b)T=Object(p.jsx)("div",{children:"Enter search query"});else if(void 0!==r)T=Object(p.jsxs)("div",{children:["Error: ",r]});else if(b||O){if(void 0!==_){var R=_.map((function(e){var t;return Object(p.jsx)(u.a,{componentReference:e},null!==(t=e.digest)&&void 0!==t?t:e.url)}));T=Object(p.jsx)(p.Fragment,{children:R})}}else T=Object(p.jsx)("div",{children:"Searching..."});return Object(p.jsxs)("div",{className:"nodeList",children:[Object(p.jsxs)("form",{onSubmit:function(e){var t,n;e.preventDefault(),""!==k&&(v(!1),function(e){E.apply(this,arguments)}(k)),null===(t=(n=window).gtag)||void 0===t||t.call(n,"event","ComponentSearch_search",{})},children:[Object(p.jsx)("input",{type:"search",placeholder:"XGBoost",onChange:function(e){y(e.target.value)}}),Object(p.jsx)("input",{type:"submit"})]}),Object(p.jsx)("div",{children:T})]})}},89:function(e,t,n){"use strict";var r=n(16),a=n(26),o=n(18),c=n(1);t.a=function(e){var t=e.componentSpec,n=Object(r.k)((function(e){return e.nodes})),i="";try{var s=Object(a.a)(t,n,!1,!0);i=Object(o.c)(s)}catch(p){i=String(p)}var u=new Blob([i],{type:"text/yaml"}),l=Object(c.jsx)("a",{href:URL.createObjectURL(u),download:"component.yaml",children:"component.yaml"});return Object(c.jsxs)("details",{children:[Object(c.jsxs)("summary",{children:["Graph ",l]}),Object(c.jsx)("pre",{style:{overflow:"auto"},children:i})]})}},90:function(e,t,n){"use strict";var r=n(6),a=n(8),o=n(3),c=n.n(o),i=n(9),s=n(0),u=n(68),l=n(56),p=n(1),d="GoogleCloudSubmitter/gcsOutputDirectory",f="GoogleCloudSubmitter/projectId",m="GoogleCloudSubmitter/region",b="GoogleCloudSubmitter/projectIds",v="640001104961-2m8hs192tmd9f9nssbr5thr5o3uhmita.apps.googleusercontent.com",j=["us-central1","us-east1","us-west1","europe-west1","europe-west2","europe-west4","asia-east1","asia-southeast1","northamerica-northeast1"],h=function(){var e=Object(i.a)(c.a.mark((function e(t){var n,r,a=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],r=a.length>2&&void 0!==a[2]?a[2]:v,e.abrupt("return",new Promise((function(e,a){gapi.auth.authorize({client_id:r,scope:t,immediate:n},(function(n){if(void 0===n)console.error("authorizeGoogleCloudClient failed"),a("gapi.auth.authorize result is undefined");else if(n.error)console.error("authorizeGoogleCloudClient failed",n.error),a(n.error);else{var r=n.scope,o=null===r||void 0===r?void 0:r.split(" ");if(void 0!==o&&t.every((function(e){return o.includes(e)})))e(n);else{var c="Authorization call succeeded, but the returned scopes are ".concat(r);console.error(c),a(c)}}}))})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(i.a)(c.a.mark((function e(t){var n,r,a,o,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h(t,!0);case 3:null===(n=(r=window).gtag)||void 0===n||n.call(r,"event","GoogleCloud_auth",{result:"succeeded",immediate:"true"}),e.next=17;break;case 6:return e.prev=6,e.t0=e.catch(0),e.prev=8,e.next=11,h(t,!1);case 11:null===(a=(o=window).gtag)||void 0===a||a.call(o,"event","GoogleCloud_auth",{result:"succeeded",immediate:"false"}),e.next=17;break;case 14:e.prev=14,e.t1=e.catch(8),null===(i=(s=window).gtag)||void 0===i||i.call(s,"event","GoogleCloud_auth",{result:"failed",immediate:"false"});case 17:case"end":return e.stop()}}),e,null,[[0,6],[8,14]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(i.a)(c.a.mark((function e(){var t,n=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]&&n[0],e.next=3,O(["https://www.googleapis.com/auth/cloud-platform"]);case 3:return e.next=5,gapi.client.request({path:"https://cloudresourcemanager.googleapis.com/v1/projects/"});case 5:return t=e.sent,e.abrupt("return",t.result);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(i.a)(c.a.mark((function e(t){var n,r,a,o,i,s=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:"us-central1",o=s.length>2?s[2]:void 0,e.next=4,O(["https://www.googleapis.com/auth/cloud-platform"]);case 4:return e.next=6,gapi.client.request({path:"https://".concat(a,"-aiplatform.googleapis.com/v1beta1/projects/").concat(t,"/locations/").concat(a,"/pipelineJobs"),method:"POST",body:JSON.stringify(o)});case 6:return i=e.sent,null===(n=(r=window).gtag)||void 0===n||n.call(r,"event","GoogleCloud_submit_pipeline_job",{result:"succeeded"}),e.abrupt("return",i.result);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.a=function(e){var t,n,o=e.componentSpec,v=Object(s.useState)((function(){var e,t;return JSON.parse(null!==(e=null===(t=window.localStorage)||void 0===t?void 0:t.getItem(b))&&void 0!==e?e:"[]")})),h=Object(a.a)(v,2),O=h[0],w=h[1],k=Object(s.useState)((function(){var e,t;return null!==(e=null===(t=window.localStorage)||void 0===t?void 0:t.getItem(f))&&void 0!==e?e:""})),y=Object(a.a)(k,2),S=y[0],C=y[1],_=Object(s.useState)((function(){var e,t;return null!==(e=null===(t=window.localStorage)||void 0===t?void 0:t.getItem(m))&&void 0!==e?e:"us-central1"})),I=Object(a.a)(_,2),E=I[0],T=I[1],R=Object(s.useState)(""),A=Object(a.a)(R,2),N=A[0],D=A[1],L=Object(s.useState)((function(){var e,t;return null!==(e=null===(t=window.localStorage)||void 0===t?void 0:t.getItem(d))&&void 0!==e?e:""})),P=Object(a.a)(L,2),U=P[0],M=P[1],F=Object(s.useState)(""),W=Object(a.a)(F,2),G=W[0],B=W[1],V=Object(s.useState)(""),H=Object(a.a)(V,2),J=H[0],K=H[1],Y=Object(s.useState)({}),q=Object(a.a)(Y,2),z=q[0],$=q[1],X=void 0,Q=void 0;if(void 0!==o){var Z,ee=Object.fromEntries((null!==(Z=o.inputs)&&void 0!==Z?Z:[]).filter((function(e){return void 0!==e.default})).map((function(e){return[e.name,String(e.default)]}))),te=Object(r.a)(Object(r.a)({},ee),z),ne=new Map(Object.entries(te).filter((function(e){return"string"===typeof e[1]})));try{(Q=Object(u.a)(o,U,ne)).labels={sdk:"cloud-pipelines-editor","cloud-pipelines-editor-version":"0-0-1"},X=JSON.stringify(Q,void 0,2),""!==J&&K("")}catch(oe){oe.toString()!==J&&K(oe.toString())}}var re=X&&URL.createObjectURL(new Blob([X],{type:"application/json"})),ae=""!==S&&""!==E&&void 0!==Q;return Object(p.jsxs)("form",{onSubmit:function(){var e=Object(i.a)(c.a.mark((function e(t){var n,r,a,o,i,s,u,l,p,b,v,j;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),void 0!==Q){e.next=3;break}return e.abrupt("return");case 3:B(""),e.prev=4;try{null===(n=window.localStorage)||void 0===n||n.setItem(d,U),null===(r=window.localStorage)||void 0===r||r.setItem(f,S),null===(a=window.localStorage)||void 0===a||a.setItem(m,E)}catch(oe){console.error("GoogleCloudSubmitter: Error writing properties to the localStorage",oe)}return e.next=8,g(S,E,Q);case 8:o=e.sent,i=o.name,s=i.split("/").slice(-1)[0],u="https://console.cloud.google.com/vertex-ai/locations/".concat(E,"/pipelines/runs/").concat(s,"?project=").concat(S),B(u),D(""),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(4),console.error(e.t0),D(null!==(l=null===e.t0||void 0===e.t0||null===(p=e.t0.result)||void 0===p||null===(b=p.error)||void 0===b?void 0:b.message)&&void 0!==l?l:"Error"),null===(v=(j=window).gtag)||void 0===v||v.call(j,"event","GoogleCloud_submit_pipeline_job",{result:"failed"});case 21:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}(),children:[void 0===o||0===(null!==(t=null===o||void 0===o||null===(n=o.inputs)||void 0===n?void 0:n.length)&&void 0!==t?t:0)?void 0:Object(p.jsxs)("fieldset",{style:{padding:"2px"},children:[Object(p.jsx)("legend",{children:"Arguments"}),Object(p.jsx)(l.a,{componentSpec:o,componentArguments:z,setComponentArguments:$,shrinkToWidth:!0})]}),Object(p.jsxs)("div",{style:{whiteSpace:"nowrap",margin:"5px"},children:[Object(p.jsx)("label",{htmlFor:"project",children:"Project: "}),Object(p.jsx)("input",{id:"project",required:!0,type:"text",list:"projects",placeholder:"<my-project-id>",value:S,onChange:function(e){return C(e.target.value)}}),Object(p.jsx)("datalist",{id:"projects",children:O.map((function(e){return Object(p.jsx)("option",{value:e},e)}))}),Object(p.jsx)("button",{type:"button",onClick:function(){var e=Object(i.a)(c.a.mark((function e(t){var n,r,a,o,i,s,u,l,p,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x();case 3:a=e.sent,o=a.projects.map((function(e){return e.projectId})),w(o),D("");try{null===(i=window.localStorage)||void 0===i||i.setItem(b,JSON.stringify(o))}catch(oe){console.error("GoogleCloudSubmitter: Error writing properties to the localStorage",oe)}null===(n=(r=window).gtag)||void 0===n||n.call(r,"event","GoogleCloud_list_projects",{result:"succeeded"}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),D(null!==(s=null===e.t0||void 0===e.t0||null===(u=e.t0.result)||void 0===u||null===(l=u.error)||void 0===l?void 0:l.message)&&void 0!==s?s:"Error"),null===(p=(d=window).gtag)||void 0===p||p.call(d,"event","GoogleCloud_list_projects",{result:"failed"});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),children:"\u27f3"})]}),Object(p.jsxs)("div",{style:{whiteSpace:"nowrap",margin:"5px"},children:[Object(p.jsx)("label",{htmlFor:"region",children:"Region: "}),Object(p.jsx)("input",{id:"region",required:!0,type:"text",list:"regions",value:E,onChange:function(e){return T(e.target.value)}}),Object(p.jsx)("datalist",{id:"regions",children:j.map((function(e){return Object(p.jsx)("option",{value:e},e)}))})]}),Object(p.jsxs)("div",{style:{whiteSpace:"nowrap",margin:"5px"},children:[Object(p.jsx)("label",{htmlFor:"region",children:"GCS dir: "}),Object(p.jsx)("input",{id:"gcsOutputDirectory",required:!0,type:"text",value:U,onChange:function(e){return M(e.target.value)}})]}),Object(p.jsxs)("div",{style:{whiteSpace:"nowrap",margin:"5px"},children:[Object(p.jsx)("input",{type:"submit",disabled:!ae,value:"Submit pipeline job"}),""!==G&&Object(p.jsx)("a",{href:G,target:"_blank",rel:"noreferrer",style:{margin:"5px"},children:"Job"})]}),void 0!==re&&Object(p.jsxs)("div",{style:{margin:"5px"},children:["Or download the"," ",Object(p.jsx)("a",{href:re,download:"vertex_pipeline_job.json",children:"pipeline_job.json"})," ","file, then go to"," ",Object(p.jsx)("a",{href:"https://console.cloud.google.com/vertex-ai/pipelines",children:"Vertex Pipelines"})," ","and"," ",Object(p.jsx)("a",{href:"https://cloud.google.com/vertex-ai/docs/pipelines/run-pipeline#console",children:"create a new run"}),"."]}),""!==J&&Object(p.jsx)("div",{children:J}),""!==N&&Object(p.jsxs)("div",{children:["Error: ",N]})]})}},91:function(e,t,n){"use strict";var r=n(16),a=n(26),o=n(68),c=n(1);t.a=function(e){var t=e.componentSpec,n=Object(r.k)((function(e){return e.nodes})),i="";try{t=Object(a.a)(t,n,!0,!0);var s=Object(o.b)(t);i=JSON.stringify(s,void 0,2)}catch(p){i=String(p)}var u=new Blob([i],{type:"application/json"}),l=URL.createObjectURL(u);return Object(c.jsxs)("details",{children:[Object(c.jsxs)("summary",{children:["Cloud IR ",Object(c.jsx)("a",{href:l,download:"vertex_pipeline_spec.json",children:"vertex_pipeline_spec.json"})]}),Object(c.jsx)("pre",{style:{overflow:"auto"},children:i})]})}},92:function(e,t,n){"use strict";var r=n(6),a=n(3),o=n.n(a),c=n(9),i=n(8),s=n(77),u=n(153),l=n(152),p=n(147),d=n(148),f=n(150),m=n(149),b=n(99),v=n(0),j=n(95),h=n(18),O=n(42),x=n(1),g="user_components";t.a=function(){var e=Object(v.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],l=Object(v.useState)(new Map),p=Object(i.a)(l,2),d=p[0],f=p[1],m=Object(v.useState)(),b=Object(i.a)(m,2),k=b[0],y=b[1],S=Object(v.useState)(),C=Object(i.a)(S,2),_=C[0],I=C[1],E=Object(v.useState)(!1),T=Object(i.a)(E,2),R=T[0],A=T[1],N=Object(v.useCallback)((function(){Object(h.e)(g).then(f)}),[f]);Object(v.useEffect)(N,[N]);var D=Object(v.useCallback)((function(e){e.forEach((function(e){var t=new FileReader;t.onabort=function(){return console.log("file reading was aborted")},t.onerror=function(){return console.log("file reading has failed")},t.onload=Object(c.a)(o.a.mark((function e(){var n,r,c,i,s,u,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=t.result)&&void 0!==n){e.next=4;break}return console.error("Dropped file reader result was ".concat(n)),e.abrupt("return");case 4:return e.prev=4,e.next=7,Object(h.a)(g,n);case 7:i=e.sent,s=i.componentRef,console.debug("storeComponentText succeeded",s),null===(r=(c=window).gtag)||void 0===r||r.call(c,"event","UserComponents_component_import",{result:"succeeded"}),a(""),N(),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(4),a("Error parsing the dropped file as component: ".concat(e.t0.toString(),".")),console.error("Error parsing the dropped file as component",e.t0),null===(u=(l=window).gtag)||void 0===u||u.call(l,"event","UserComponents_component_import",{result:"failed"});case 20:case"end":return e.stop()}}),e,null,[[4,15]])}))),t.readAsArrayBuffer(e)}))}),[N]),L=Object(v.useCallback)(function(){var e=Object(c.a)(o.a.mark((function e(t){var n,r,c,i,s,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(h.b)(g,t);case 3:c=e.sent,i=c.componentRef,console.debug("addComponentToListByUrl succeeded",i),null===(n=(r=window).gtag)||void 0===n||n.call(r,"event","UserComponents_component_import_from_url_succeeded"),a(""),N(),A(!1),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),a("Error parsing the file as component: ".concat(e.t0.toString(),".")),console.error("Error importing component from the URL",e.t0),null===(s=(u=window).gtag)||void 0===s||s.call(u,"event","UserComponents_component_import_from_url_failed");case 17:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),[N]),P=function(){var e=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=5;break}return y(void 0),e.next=4,Object(h.d)(g,k);case 4:N();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=Object(j.a)({onDrop:D,accept:".yaml"}),M=U.getRootProps,F=U.getInputProps,W=U.isDragActive;return Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{onClick:function(e){return A(!0)},style:{marginBottom:"4px"},children:"Import from URL"}),Object(x.jsxs)("div",Object(r.a)(Object(r.a)({},M()),{},{children:[Object(x.jsx)("input",Object(r.a)({},F())),Object(x.jsxs)("div",{style:{border:"1px solid black",padding:"4px",minHeight:"3em"},children:[W?"Drop the files here ...":n||"Drag and drop component.yaml files or click to select files",Array.from(d.entries()).map((function(e){var t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(x.jsx)(O.a,{componentReference:r.componentRef,onContextMenu:function(e){e.preventDefault(),I(e.currentTarget),y(n)}},n)}))]})]})),Object(x.jsx)(s.a,{open:void 0!==k,anchorEl:_,onClose:function(){y(void 0)},children:Object(x.jsx)(u.a,{dense:!0,onClick:P,children:"Delete"})}),Object(x.jsx)(w,{isOpen:R,onCancel:function(){return A(!1)},initialValue:"https://raw.githubusercontent.com/.../component.yaml",onImport:L})]})};var w=function(e){var t=e.isOpen,n=e.onImport,r=e.onCancel,a=e.initialValue,o=Object(v.useRef)();return Object(x.jsxs)(l.a,{open:t,fullWidth:!0,children:[Object(x.jsx)(p.a,{children:"Import component"}),Object(x.jsxs)("form",{onSubmit:function(e){o.current&&n(o.current.value),e.preventDefault()},children:[Object(x.jsx)(d.a,{children:Object(x.jsx)(f.a,{id:"name",type:"text",placeholder:a,label:"Component URL",inputRef:o,required:!0,autoFocus:!0,fullWidth:!0})}),Object(x.jsxs)(m.a,{children:[Object(x.jsx)(b.a,{onClick:r,children:"Cancel"}),Object(x.jsx)(b.a,{color:"primary",type:"submit",autoFocus:!0,children:"Import"})]})]})]})}},96:function(e,t,n){"use strict";var r=n(3),a=n.n(r),o=n(9),c=n(8),i=n(24),s=n(152),u=n(147),l=n(149),p=n(99),d=n(148),f=n(150),m=n(77),b=n(153),v=n(0),j=n(16),h=n(21),O=n(18),x=n(26),g=n(1),w=function(e){var t=e.componentSpec,n=e.downloadFileName,r=void 0===n?"component.yaml":n,a=e.linkText,o=void 0===a?"component.yaml":a,c=e.linkRef,i=e.style,s=Object(j.k)((function(e){return e.nodes}));try{t=Object(x.a)(t,s,!1,!0)}catch(d){var u;if(!0!==(null===d||void 0===d||null===(u=d.message)||void 0===u?void 0:u.startsWith("The nodes array does not")))return console.error(d),Object(g.jsx)(g.Fragment,{children:"err.toString()"})}var l=Object(O.c)(t),p=new Blob([l],{type:"text/yaml"});return Object(g.jsx)("a",{ref:c,href:URL.createObjectURL(p),download:r,style:i,children:o})},k=n(22),y=function(e){var t=e.setComponentSpec,n=Object(v.useState)([]),r=Object(c.a)(n,2),i=r[0],s=r[1];return Object(v.useEffect)((function(){Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==i.length){e.next=5;break}return e.next=3,Promise.all(k.c.map(function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.h)(t);case 2:return n=e.sent,r=n.componentRef,e.next=6,Object(k.f)(r.spec);case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:t=e.sent,s(t);case 5:case"end":return e.stop()}}),e)})))()}),[i.length]),Object(g.jsx)("div",{style:{overflow:"auto",whiteSpace:"nowrap"},children:Object(g.jsx)("div",{style:{overflow:"auto",marginLeft:"10px"},children:i.map((function(e){var n;return Object(g.jsxs)("div",{children:["\u22ee ",Object(g.jsx)("button",{className:"link-button",onClick:function(n){null===t||void 0===t||t(e.spec)},children:null!==(n=e.spec.name)&&void 0!==n?n:"<Pipeline>"})]},e.digest)}))})})},S="user_pipelines",C=function(e,t){var n,r=Object(i.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.endsWith(a)&&(e=e.substring(0,e.length-a.length))}}catch(o){r.e(o)}finally{r.f()}return e},_=function(e){var t=e.isOpen,n=e.onPipelineSave,r=e.onCancel,i=e.initialName,s=Object(v.useState)(i),u=Object(c.a)(s,2),l=u[0],p=u[1],d=Object(v.useState)(!1),f=Object(c.a)(d,2),m=f[0],b=f[1],j=function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(t),e.prev=1,e.next=4,n(t,!1);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),b(!0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(E,{isOpen:t,onSave:j,onCancel:r,initialValue:l,inputLabel:"Pipeline name"}),Object(g.jsx)(I,{isOpen:t&&m,title:"Overwrite?",okButtonText:"Overwrite",onOk:function(){l&&(b(!1),n(l,!0))},onCancel:function(){b(!1)}})]})},I=function(e){var t=e.isOpen,n=e.title,r=e.okButtonText,a=void 0===r?"OK":r,o=e.cancelButtonText,c=void 0===o?"Cancel":o,i=e.onOk,d=e.onCancel;return Object(g.jsxs)(s.a,{open:t,"aria-labelledby":"alert-dialog-title",children:[Object(g.jsx)(u.a,{id:"alert-dialog-title",children:n}),Object(g.jsxs)(l.a,{children:[Object(g.jsx)(p.a,{color:"primary",onClick:d,children:c}),Object(g.jsx)(p.a,{color:"secondary",onClick:i,children:a})]})]})},E=function(e){var t=e.isOpen,n=e.onSave,r=e.onCancel,a=e.initialValue,o=e.inputLabel,c=void 0===o?"Pipeline name":o,i=Object(v.useRef)();return Object(g.jsxs)(s.a,{open:t,"aria-labelledby":"alert-dialog-title",children:[Object(g.jsx)(u.a,{id:"alert-dialog-title",children:"Save pipeline"}),Object(g.jsxs)("form",{onSubmit:function(e){i.current&&n(i.current.value),e.preventDefault()},children:[Object(g.jsx)(d.a,{children:Object(g.jsx)(f.a,{id:"name",type:"text",defaultValue:a,label:c,inputRef:i,required:!0,autoFocus:!0,fullWidth:!0,margin:"dense"})}),Object(g.jsxs)(l.a,{children:[Object(g.jsx)(p.a,{onClick:r,children:"Cancel"}),Object(g.jsx)(p.a,{color:"primary",type:"submit",autoFocus:!0,children:"Save"})]})]})]})};t.a=function(e){var t=e.componentSpec,n=e.setComponentSpec,r=Object(v.useState)(new Map),i=Object(c.a)(r,2),s=i[0],u=i[1],l=Object(v.useState)(),p=Object(c.a)(l,2),d=p[0],f=p[1],I=Object(v.useState)(!1),E=Object(c.a)(I,2),T=E[0],R=E[1],A=Object(j.k)((function(e){return e.nodes})),N=Object(v.useState)(),D=Object(c.a)(N,2),L=D[0],P=D[1],U=Object(v.useState)(),M=Object(c.a)(U,2),F=M[0],W=M[1],G=Object(v.useCallback)((function(){Object(O.e)(S).then(u)}),[u]);Object(v.useEffect)(G,[G]);var B=Object(v.useCallback)(function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.f)(t.componentRef.spec);case 2:null===n||void 0===n||n(t.componentRef.spec),f(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,f]),V=Object(v.useCallback)((function(e){e.forEach((function(e){var t=new FileReader;t.onabort=function(){return console.log("file reading was aborted")},t.onerror=function(){return console.log("file reading has failed")},t.onload=Object(o.a)(a.a.mark((function n(){var r,o,c,i,s,u,l,p,d,f;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==(r=t.result)&&void 0!==r){n.next=4;break}return console.error("Dropped file reader result was ".concat(r)),n.abrupt("return");case 4:return o=C(e.name,[".pipeline.component.yaml",".component.yaml",".pipeline.yaml",".yaml"])||"Pipeline",n.prev=5,n.next=8,Object(O.g)(r);case 8:if(s=n.sent,u=s.componentRef,Object(h.b)(u.spec.implementation)){n.next=13;break}return console.error("Dropped component is not a graph component"),n.abrupt("return");case 13:return n.next=15,Object(k.f)(u.spec);case 15:return n.next=17,Object(O.a)(S,r,o);case 17:l=n.sent,p=l.componentRef,console.debug("storeComponentText succeeded",p),null===(c=(i=window).gtag)||void 0===c||c.call(i,"event","PipelineLibrary_pipeline_import",{result:"succeeded"}),G(),n.next=28;break;case 24:n.prev=24,n.t0=n.catch(5),console.error("Error parsing the dropped file as component",n.t0),null===(d=(f=window).gtag)||void 0===d||d.call(f,"event","PipelineLibrary_pipeline_import",{result:"failed"});case 28:case"end":return n.stop()}}),n,null,[[5,24]])}))),t.readAsArrayBuffer(e)}))}),[G]),H=Object(v.useCallback)((function(){R(!0)}),[R]),J=Object(v.useCallback)((function(){R(!1)}),[R]),K=Object(v.useCallback)(function(){var e=Object(o.a)(a.a.mark((function e(n){var r,o,c,i=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.length>1&&void 0!==i[1]&&i[1]){e.next=7;break}return e.next=4,Object(O.f)(S,n);case 4:if(null===e.sent){e.next=7;break}throw Error('File "'.concat(n,'" already exists.'));case 7:if(t){e.next=9;break}return e.abrupt("return");case 9:return(r=Object(x.a)(t,A,!1,!0)).name=n,o=Object(O.c)(r),e.next=14,Object(O.i)(S,n,o);case 14:return c=e.sent,e.next=17,B(c);case 17:J(),G();case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,J,A,B,G]),Y=function(){var e=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!L){e.next=5;break}return P(void 0),e.next=4,Object(O.d)(S,L);case 4:G();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!L){e.next=10;break}return P(void 0),e.next=4,Object(O.f)(S,L);case 4:if(t=e.sent){e.next=8;break}return console.error("handleContextMenuOpen: File ".concat(L," does not exist.")),e.abrupt("return");case 8:return e.next=10,B(t);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=Object(v.useRef)(null),$=Object(v.useRef)(null);return Object(g.jsxs)("div",{style:{overflow:"auto",whiteSpace:"nowrap"},children:[Object(g.jsxs)("div",{style:{margin:"5px"},children:[Object(g.jsx)("button",{onClick:function(e){d?K(null===d||void 0===d?void 0:d.name,!0):H()},children:"Save"}),Object(g.jsx)("button",{onClick:H,children:"Save as"}),t&&Object(g.jsx)(_,{initialName:t.name,isOpen:T,onCancel:J,onPipelineSave:K}),Object(g.jsx)("input",{ref:z,type:"file",accept:".yaml",onChange:function(e){var t;return V(Array.from(null!==(t=e.target.files)&&void 0!==t?t:[]))},style:{display:"none"}}),Object(g.jsx)("button",{onClick:function(e){var t;return null===(t=z.current)||void 0===t?void 0:t.click()},children:"+ Import"}),Object(g.jsx)("button",{onClick:function(e){var t;null===(t=$.current)||void 0===t||t.click()},children:"Export"}),t&&Object(g.jsx)(w,{linkRef:$,componentSpec:t,linkText:"\ud83d\udd17",downloadFileName:(t.name?t.name+".":"")+"pipeline.component.yaml",style:{textDecoration:"none"}})]}),Object(g.jsxs)("div",{style:{overflow:"auto",marginLeft:"10px"},children:[Array.from(s.entries()).map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];return Object(g.jsxs)("div",{children:["\u22ee ",Object(g.jsx)("button",{className:"link-button",onClick:function(e){return B(r)},style:n===(null===d||void 0===d?void 0:d.name)?{fontWeight:"bold"}:void 0,onContextMenu:function(e){e.preventDefault(),W(e.currentTarget),P(n)},children:n})]},n)})),Object(g.jsxs)(m.a,{open:void 0!==L,anchorEl:F,onClose:function(){P(void 0)},children:[Object(g.jsx)(b.a,{dense:!0,onClick:q,children:"Open"}),Object(g.jsx)(b.a,{dense:!0,onClick:Y,children:"Delete"})]})]}),Object(g.jsxs)("details",{open:!0,style:{border:"1px solid #aaa",borderRadius:"4px",padding:"4px"},children:[Object(g.jsx)("summary",{children:Object(g.jsx)("strong",{children:"Sample pipelines"})}),Object(g.jsx)(y,{setComponentSpec:n})]})]})}}},[[145,1,2]]]);
//# sourceMappingURL=main.32a576ed.chunk.js.map